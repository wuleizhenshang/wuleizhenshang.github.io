<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Android学习笔记 | Blog-无泪真伤</title><meta name="author" content="无泪真伤"><meta name="copyright" content="无泪真伤"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="referrer" content="no-referrer"><meta name="description" content="安卓开发笔记开发必做distributionUrl&#x3D;https\:&#x2F;&#x2F;mirrors.cloud.tencent.com&#x2F;gradle&#x2F;gradle-7.3.3-bin.zip 12345678910111213141516171819202122232425262728293031323334353637383940414243444546buildscript &#123;     repos">
<meta property="og:type" content="article">
<meta property="og:title" content="Android学习笔记">
<meta property="og:url" content="https://www.wuleizhenshang.love/2022/02/24/%E5%AE%89%E5%8D%93%E5%BC%80%E5%8F%91%E7%AC%94%E8%AE%B0/index.html">
<meta property="og:site_name" content="Blog-无泪真伤">
<meta property="og:description" content="安卓开发笔记开发必做distributionUrl&#x3D;https\:&#x2F;&#x2F;mirrors.cloud.tencent.com&#x2F;gradle&#x2F;gradle-7.3.3-bin.zip 12345678910111213141516171819202122232425262728293031323334353637383940414243444546buildscript &#123;     repos">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://pic.imgdb.cn/item/65dd5b1c9f345e8d035100ba.jpg">
<meta property="article:published_time" content="2022-02-24T12:45:00.000Z">
<meta property="article:modified_time" content="2024-03-15T04:01:41.486Z">
<meta property="article:author" content="无泪真伤">
<meta property="article:tag" content="开发常用">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://pic.imgdb.cn/item/65dd5b1c9f345e8d035100ba.jpg"><link rel="shortcut icon" href="/img/86634.jpg"><link rel="canonical" href="https://www.wuleizhenshang.love/2022/02/24/%E5%AE%89%E5%8D%93%E5%BC%80%E5%8F%91%E7%AC%94%E8%AE%B0/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"找不到您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":200},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":50,"languages":{"author":"作者: 无泪真伤","link":"链接: ","source":"来源: Blog-无泪真伤","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Android学习笔记',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-03-15 12:01:41'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.0.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://pic.imgdb.cn/item/65582252c458853aeff7c6f5.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">13</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">6</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">4</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://pic.imgdb.cn/item/65dd5b1c9f345e8d035100ba.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="Blog-无泪真伤"><span class="site-name">Blog-无泪真伤</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Android学习笔记</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-02-24T12:45:00.000Z" title="发表于 2022-02-24 20:45:00">2022-02-24</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-03-15T04:01:41.486Z" title="更新于 2024-03-15 12:01:41">2024-03-15</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%BC%80%E5%8F%91%E5%B8%B8%E7%94%A8/">开发常用</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">26.8k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>119分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Android学习笔记"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="安卓开发笔记"><a href="#安卓开发笔记" class="headerlink" title="安卓开发笔记"></a>安卓开发笔记</h1><h2 id="开发必做"><a href="#开发必做" class="headerlink" title="开发必做"></a>开发必做</h2><p><code>distributionUrl=https\://mirrors.cloud.tencent.com/gradle/gradle-7.3.3-bin.zip</code></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">buildscript &#123;</span><br><span class="line"> </span><br><span class="line">    repositories &#123;</span><br><span class="line"> </span><br><span class="line">        maven &#123;</span><br><span class="line">            url &#x27;http://maven.aliyun.com/nexus/content/groups/public/&#x27;</span><br><span class="line">            allowInsecureProtocol = true</span><br><span class="line">        &#125;</span><br><span class="line">        maven &#123;</span><br><span class="line">            url &#x27;http://maven.aliyun.com/nexus/content/repositories/jcenter&#x27;</span><br><span class="line">            allowInsecureProtocol = true</span><br><span class="line">        &#125;</span><br><span class="line">        maven &#123;</span><br><span class="line">            url &#x27;http://maven.aliyun.com/nexus/content/repositories/google&#x27;</span><br><span class="line">            allowInsecureProtocol = true</span><br><span class="line">        &#125;</span><br><span class="line">        maven &#123;</span><br><span class="line">            url &#x27;http://maven.aliyun.com/nexus/content/repositories/gradle-plugin&#x27;</span><br><span class="line">            allowInsecureProtocol = true</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        google()</span><br><span class="line">        jcenter()</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">allprojects &#123;</span><br><span class="line">    repositories &#123;</span><br><span class="line">        maven &#123;</span><br><span class="line">            url &#x27;http://maven.aliyun.com/nexus/content/groups/public/&#x27;</span><br><span class="line">            allowInsecureProtocol = true</span><br><span class="line">        &#125;</span><br><span class="line">        maven &#123;</span><br><span class="line">            url &#x27;http://maven.aliyun.com/nexus/content/repositories/google&#x27;</span><br><span class="line">            allowInsecureProtocol = true</span><br><span class="line">        &#125;</span><br><span class="line">        maven &#123;</span><br><span class="line">            url &#x27;http://maven.aliyun.com/nexus/content/repositories/gradle-plugin&#x27;</span><br><span class="line">            allowInsecureProtocol = true</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        google()</span><br><span class="line">        jcenter() </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>kotlin为</p>
<p><code>maven&#123; setUrl(&quot;http://maven.aliyun.com/nexus/content/groups/public/&quot;)&#125;</code></p>
<p>crtl + p 提示</p>
<p>ctrl +win+alt+L格式化整理代码</p>
<p>测试安装不了</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">android.injected.testOnly=false</span><br></pre></td></tr></table></figure>



<p><img src="C:\Users\GTR\Desktop\43ee001766f0eb2d7ce42f7d72bd5a49.png"></p>
<p><strong>连接手机</strong></p>
<p>先在电脑<code>cmd</code>窗口<code>adb tcpip 5555</code>，再把手机置静态IP连接热点，之后<code>adb connect 192.168.137.66:5555</code></p>
<p>1、先确认Android设备开启开发者模式，并且开启USB调试；</p>
<p>2、确认Android设备和电脑处于同一局域网；</p>
<p>如果上述都确认还是出现 “由于目标计算机积极拒绝，无法连接。 (10061)” 这个问题，那就极有可能是端口被占用了：</p>
<p>（1）使用如下adb命令可以查看端口使用情况：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -ano | findstr 5037</span><br></pre></td></tr></table></figure>

<p> 如果出现以下情况：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">TCP    127.0.0.1:5037         0.0.0.0:0              LISTENING       5596</span><br><span class="line">TCP    127.0.0.1:5037         127.0.0.1:49508        ESTABLISHED     5596</span><br><span class="line">TCP    127.0.0.1:5037         127.0.0.1:50671        TIME_WAIT       0</span><br><span class="line">TCP    127.0.0.1:5037         127.0.0.1:50672        TIME_WAIT       0</span><br><span class="line">TCP    127.0.0.1:5037         127.0.0.1:50673        TIME_WAIT       0</span><br></pre></td></tr></table></figure>

<p>从上面的 “TCP 127.0.0.1:5037 127.0.0.1:49508 ESTABLISHED 5596” 可以看出进程5596占用了端口，这时找到5596，并关掉它就可以了。关掉之前可以先看看是什么进程，查看进程的命令：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tasklist |findstr 5596</span><br></pre></td></tr></table></figure>

<p>关掉进程的命令：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">taskkill /pid 5596 /f</span><br></pre></td></tr></table></figure>

<p>此时再次尝试adb连接Android设备，如果还不行，则使用下面的最后一种方法；</p>
<p>（2）使用USB连接电脑，然后执行以下命令行：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb tcpip 5555</span><br></pre></td></tr></table></figure>

<p>在没有报错的前提下，断开USB，再使用命令：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb connect IP地址:5555</span><br></pre></td></tr></table></figure>

<p>此时就能连接Android设备了，如果还不行，对不起，我也没办法了！</p>
<h5 id="themes设置相关"><a href="#themes设置相关" class="headerlink" title="themes设置相关"></a>themes设置相关</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">colorPrimary : 顧名思義，就是主要的顏色，這個通常指得是 App 本身產品的代表色，通常也是品牌的主要視覺色</span><br><span class="line">colorPrimaryVariant：主要顏色的變體，通常會從 colorPrimary 往較淡或較濃的色澤</span><br><span class="line">colorOnPrimary：字面意思就是主要顏色上頭的顏色，這個顏色通常使用在背景色是主要顏色的元件上頭(例如字樣 Label 、icon 等)</span><br><span class="line">colorSecondary：app 次要的品牌顏色，這些用於裝飾某些特定需要的 widget</span><br><span class="line">colorSecondaryVariant：次要顏色的變體，也就是次要顏色偏暗或偏亮的樣式</span><br><span class="line">colorOnSecondary：用於顯示於次要顏色上元件的顏色</span><br><span class="line">colorError：顯示錯誤的顏色 (最常見的就是紅色)</span><br><span class="line">colorOnError：在錯誤顏色上頭元件的顏色</span><br><span class="line">colorSurface：表層顏色(就是 Sheet 的顏色)</span><br><span class="line">colorOnSurface：在表層顏色上的的元件顏色</span><br><span class="line">android:colorBackground：最底的背景色</span><br><span class="line">colorOnBackground：用於對底背景色上頭的元件用的顏色</span><br><span class="line">利用这些属性，搭配上面的那些技巧，可以組合出很棒的效果。</span><br></pre></td></tr></table></figure>



<p><strong><code>.bridge</code>是让按钮等不默认使用主题色，<code>.NoActionBar</code>是不显示顶部导航条,现在用<code>Toolbar</code>替代<code>ActionBar</code>了,要用自带标题栏就用<code>Toolbar</code></strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--安卓默认生成--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resources</span> <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Base application theme. --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">&quot;Theme.MyApplication&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;Theme.MaterialComponents.DayNight.DarkActionBar&quot;</span>&gt;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">        <span class="comment">&lt;!-- Primary brand color. --&gt;</span></span></span><br><span class="line"><span class="language-xml">        </span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;colorPrimary&quot;</span>&gt;</span>@color/purple_500<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;colorPrimaryVariant&quot;</span>&gt;</span>@color/purple_700<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;colorOnPrimary&quot;</span>&gt;</span>@color/white<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="comment">&lt;!-- Secondary brand color. --&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;colorSecondary&quot;</span>&gt;</span>@color/teal_200<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;colorSecondaryVariant&quot;</span>&gt;</span>@color/teal_700<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;colorOnSecondary&quot;</span>&gt;</span>@color/black<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="comment">&lt;!-- Status bar color. --&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:statusBarColor&quot;</span>&gt;</span>?attr/colorPrimaryVariant<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="comment">&lt;!-- Customize your theme here. --&gt;</span></span></span><br><span class="line"><span class="language-xml">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br></pre></td></tr></table></figure>





<h5 id="沉侵式体验"><a href="#沉侵式体验" class="headerlink" title="沉侵式体验"></a>沉侵式体验</h5><p>沉浸式状态栏</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP) &#123;</span><br><span class="line">        <span class="type">Window</span> <span class="variable">window</span> <span class="operator">=</span> getWindow();</span><br><span class="line">        window.getDecorView().setSystemUiVisibility(</span><br><span class="line">                View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN | View.SYSTEM_UI_FLAG_LAYOUT_STABLE);</span><br><span class="line">        window.setStatusBarColor(Color.TRANSPARENT);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    setContentView(R.layout.activity_main); <span class="comment">// 设置你的布局文件</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>沉浸式导航栏</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP) &#123;</span><br><span class="line">    <span class="type">Window</span> <span class="variable">window</span> <span class="operator">=</span> getWindow();</span><br><span class="line">    window.getDecorView().setSystemUiVisibility(</span><br><span class="line">            View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN |</span><br><span class="line">            View.SYSTEM_UI_FLAG_LAYOUT_STABLE |</span><br><span class="line">            View.SYSTEM_UI_FLAG_LAYOUT_HIDE_NAVIGATION);</span><br><span class="line">    window.setStatusBarColor(Color.TRANSPARENT);</span><br><span class="line">    window.setNavigationBarColor(Color.TRANSPARENT);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>使用沉浸式布局</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">RelativeLayout</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:fitsSystemWindows</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- Your content here --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">RelativeLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>这将会让布局内容在状态栏和导航栏区域留出空间。</p>
<h5 id="透明状态栏"><a href="#透明状态栏" class="headerlink" title="透明状态栏"></a>透明状态栏</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//沉浸式状态栏，显示上面图标但状态栏透明，下面2行代码连用，如果整个界面是白色图标会消失</span></span><br><span class="line"><span class="comment">//下面这样代码一定要这么写,1024和256，单用1024就可以了其实</span></span><br><span class="line">getWindow().getDecorView().setSystemUiVisibility(View.SYSTEM_UI_FLAG_VISIBLE</span><br><span class="line">                                                 | View.SYSTEM_UI_FLAG_LAYOUT_STABLE);</span><br><span class="line"><span class="comment">//下面这句是设置背景色的，下面这个是设置为透明，自己按需求改，只用这条属性不做设置上面各种小图标也会消失，透明了，最新方法</span></span><br><span class="line">getWindow().setStatusBarColor(Color.TRANSPARENT);</span><br><span class="line"></span><br><span class="line"><span class="comment">//隐藏状态栏并且会自动消失，与其他一起使用无效</span></span><br><span class="line">getWindow().addFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN);</span><br><span class="line"><span class="comment">//显示状态栏，</span></span><br><span class="line">getWindow().clearFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN);</span><br></pre></td></tr></table></figure>





<table>
<thead>
<tr>
<th align="center">属性</th>
<th align="center">作用</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><code>View.SYSTEM_UI_FLAG_VISIBLE</code></td>
<td align="center">状态栏和Activity共存，Activity不全屏显示。也就是应用平常的显示画面</td>
</tr>
<tr>
<td align="center"><code>View.SYSTEM_UI_FLAG_FULLSCREEN</code></td>
<td align="center">Activity全屏显示，且状态栏被覆盖掉，但下拉会出现并且不能再隐藏</td>
</tr>
<tr>
<td align="center"><code>View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN </code></td>
<td align="center">Activity全屏显示，但是状态栏不会被覆盖掉，而是正常显示，只是Activity顶端布  局会被覆盖住</td>
</tr>
<tr>
<td align="center"><code>View.INVISIBLE </code></td>
<td align="center">Activity全屏显示，隐藏状态栏</td>
</tr>
</tbody></table>
<h5 id="隐藏ActionBar"><a href="#隐藏ActionBar" class="headerlink" title="隐藏ActionBar"></a>隐藏ActionBar</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">getSupportActionBar().hide();</span><br></pre></td></tr></table></figure>



<h4 id="隐藏导航栏"><a href="#隐藏导航栏" class="headerlink" title="隐藏导航栏"></a>隐藏导航栏</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">getWindow().getDecorView().setSystemUiVisibility(View.SYSTEM_UI_FLAG_LAYOUT_HIDE_NAVIGATION);</span><br></pre></td></tr></table></figure>



<h4 id="依赖设置"><a href="#依赖设置" class="headerlink" title="依赖设置"></a>依赖设置</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">jcenter()</span><br><span class="line">maven &#123; url <span class="string">&#x27;https://www.jitpack.io&#x27;</span> &#125;</span><br></pre></td></tr></table></figure>





<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">implementation <span class="string">&#x27;com.google.android.material:material:1.1.0&#x27;</span><span class="comment">//降为这个版本，不然预览视图有bug</span></span><br></pre></td></tr></table></figure>





<h4 id="全屏手势"><a href="#全屏手势" class="headerlink" title="全屏手势"></a>全屏手势</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">getWindow().getDecorView().setSystemUiVisibility(</span><br><span class="line">                View.SYSTEM_UI_FLAG_LAYOUT_STABLE</span><br><span class="line">                        | View.SYSTEM_UI_FLAG_LAYOUT_HIDE_NAVIGATION</span><br><span class="line">                        | View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN</span><br><span class="line">                        | View.SYSTEM_UI_FLAG_HIDE_NAVIGATION</span><br><span class="line">                        | View.SYSTEM_UI_FLAG_FULLSCREEN</span><br><span class="line">                        | View.SYSTEM_UI_FLAG_IMMERSIVE_STICKY);</span><br></pre></td></tr></table></figure>









<table>
<thead>
<tr>
<th align="center">属性</th>
<th align="center">作用</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><code>View.SYSTEM_UI_FLAG_VISIBLE</code></td>
<td align="center">状态栏和Activity共存，Activity不全屏显示。也就是应用平常的显示画面</td>
</tr>
<tr>
<td align="center"><code>View.SYSTEM_UI_FLAG_FULLSCREEN</code></td>
<td align="center">Activity全屏显示，且状态栏被覆盖掉</td>
</tr>
<tr>
<td align="center"><code>View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN </code></td>
<td align="center">Activity全屏显示，但是状态栏不会被覆盖掉，而是正常显示，只是Activity顶端布  局会被覆盖住</td>
</tr>
<tr>
<td align="center"><code>View.INVISIBLE </code></td>
<td align="center">Activity全屏显示，隐藏状态栏</td>
</tr>
</tbody></table>
<h5 id="设置图标"><a href="#设置图标" class="headerlink" title="设置图标"></a>设置图标</h5><p>第一种：(最简单的方法)</p>
<p>将你准备好的 图标放入res目录下的drawable，在AndroidManifest.<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=xml&spm=1001.2101.3001.7020">xml</a>文件中，找到android:icon以及android:roundIcon这两个属性,设置为你放入的图标文件。</p>
<p>在这里，这两个属性都能对图标进行设置，在设置时只使用一个也可以达到效果，但如果两个同时使用的话，属性指定的对象需要设置一致。若不一致，我测试结果是显示的roundIcon指定的对象，找到android:roundIcon 属性的解释：</p>
<p>android:roundIcon 属性指定一个图标，但只有你需要给应用设置一个特别的圆形图标时才要用到这个属性。</p>
<p>第二种：(稍微复杂)</p>
<p>更详细的解释可以看这两篇文章</p>
<p><a target="_blank" rel="noopener" href="https://www.jb51.net/article/188580.htm">https://www.jb51.net/article/188580.htm</a></p>
<p>[Android神兵利器之Image Asset Studio]</p>
<p><a target="_blank" rel="noopener" href="https://www.jb51.net/article/138346.htm">https://www.jb51.net/article/138346.htm</a></p>
<p>[application中 android:icon 和 android:roundIcon 的区别]</p>
<h5 id="使用外部字体"><a href="#使用外部字体" class="headerlink" title="使用外部字体"></a>使用外部字体</h5><p>在<code>src/main</code>中创建了一个文件夹<code>assets</code>文件夹，在<code>assets</code>文件夹中创建<code>fonts</code>文件夹，把字体文件放到<code>fonts</code>目录下</p>
<p>此外，在具有以下内容的同一文件夹内创建一个名为fonts.xml的文件：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;font-family xmlns:android=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span><br><span class="line">    xmlns:app=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">      &lt;font</span><br><span class="line">              app:fontStyle=<span class="string">&quot;normal&quot;</span></span><br><span class="line">              app:fontWeight=<span class="string">&quot;700&quot;</span></span><br><span class="line">              app:font=<span class="string">&quot;@font/customfont&quot;</span>/&gt;</span><br><span class="line"></span><br><span class="line">      &lt;font</span><br><span class="line">              app:fontStyle=<span class="string">&quot;normal&quot;</span></span><br><span class="line">              app:fontWeight=<span class="string">&quot;700&quot;</span></span><br><span class="line">              app:font=<span class="string">&quot;@font/customfont_bold&quot;</span>/&gt;</span><br><span class="line">&lt;/font-family&gt;</span><br></pre></td></tr></table></figure>

<p>然后，编辑文件app&gt; src&gt; res&gt; values&gt; styles.xml，为整个应用程序应用默认字体。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- Base application theme. --&gt;</span><br><span class="line">&lt;style name=<span class="string">&quot;AppTheme&quot;</span> parent=<span class="string">&quot;Theme.AppCompat.Light.NoActionBar&quot;</span>&gt;</span><br><span class="line">    &lt;item name=<span class="string">&quot;colorPrimary&quot;</span>&gt;<span class="meta">@color</span>/colorPrimary&lt;/item&gt;</span><br><span class="line">    &lt;item name=<span class="string">&quot;colorPrimaryDark&quot;</span>&gt;<span class="meta">@color</span>/colorPrimaryDark&lt;/item&gt;</span><br><span class="line">    &lt;item name=<span class="string">&quot;colorAccent&quot;</span>&gt;<span class="meta">@color</span>/colorAccent&lt;/item&gt;</span><br><span class="line">    &lt;item name=<span class="string">&quot;android:fontFamily&quot;</span>&gt;<span class="meta">@font</span>/customfont&lt;/item&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>如果要更改单个UI元素的字体，请执行以下操作：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;TextView</span><br><span class="line">    android:fontFamily=<span class="string">&quot;@font/customfont&quot;</span></span><br><span class="line">    android:layout_height=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">    android:layout_width=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">    android:textColor=<span class="string">&quot;@color/black&quot;</span></span><br><span class="line">    android:textSize=<span class="string">&quot;18sp&quot;</span></span><br><span class="line">    android:text=<span class="string">&quot;Some text&quot;</span></span><br><span class="line">    /&gt;</span><br></pre></td></tr></table></figure>

<p>java中使用</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">TextView tv=(TextView)findViewById(R.id.custom);</span><br><span class="line">Typeface face=Typeface.createFromAsset(getAssets(),<span class="string">&quot;fonts/Verdana.ttf&quot;</span>);<span class="comment">//记得加fonts文件名</span></span><br><span class="line">tv.setTypeface(face);</span><br></pre></td></tr></table></figure>





<h5 id="使用内置绘制矢量图"><a href="#使用内置绘制矢量图" class="headerlink" title="使用内置绘制矢量图"></a>使用内置绘制矢量图</h5><p>在<code>Project</code>模式下<strong>右击</strong>选择<code>src</code>,然后选择<code>New/Vector Asset</code></p>
<h5 id="双击退出"><a href="#双击退出" class="headerlink" title="双击退出"></a>双击退出</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//双击返回</span></span><br><span class="line"><span class="meta">@SuppressLint(&quot;WrongConstant&quot;)</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">onKeyUp</span><span class="params">(<span class="type">int</span> keyCode, KeyEvent event)</span> &#123;</span><br><span class="line">    <span class="type">long</span> <span class="variable">tempTime</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">    <span class="keyword">if</span> (keyCode == KeyEvent.KEYCODE_BACK) &#123;</span><br><span class="line">        <span class="keyword">if</span> (tempTime - startTime &gt;= <span class="number">2000</span>) &#123;</span><br><span class="line">            startTime = tempTime;</span><br><span class="line">            Toast.makeText(<span class="built_in">this</span>, <span class="string">&quot;再点击一次退出应用&quot;</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.exit(<span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">super</span>.onKeyUp(keyCode, event);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="网络请求"><a href="#网络请求" class="headerlink" title="网络请求"></a>网络请求</h3><ul>
<li><strong>OKHttp</strong></li>
<li><strong>Retrofit（对OKHttp的封装，下面的Retrofit2的库包含了OKHttp）</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//retrofit2和retrofit转换器</span></span><br><span class="line">implementation <span class="string">&#x27;com.squareup.retrofit2:retrofit:2.9.0&#x27;</span></span><br><span class="line">implementation <span class="string">&quot;com.squareup.retrofit2:converter-gson:2.9.0&quot;</span></span><br></pre></td></tr></table></figure>









<h3 id="布局"><a href="#布局" class="headerlink" title="布局"></a>布局</h3><p>布局代码过长时可以把一部分代码放带到另一个xml文件中，然后在要引用的地方<code>&lt;include	layout=&quot;@layout/tab1&quot;/&gt;</code></p>
<ul>
<li><strong>线性布局</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*android:layout_gravity=&quot;center_horizontal&quot;在线性布局中没有作用是因为</span></span><br><span class="line"><span class="comment">没有设置布局属性android:orientation=&quot;vertical&quot;*/</span></span><br></pre></td></tr></table></figure>



<p>一些技巧，把一个控件放在底部时，要让上面的整个界面布满可以用<code>android:layout_weight=&quot;1&quot;</code>属性，如在fragment和viewpager</p>
<p>使用时</p>
<h3 id="控件"><a href="#控件" class="headerlink" title="控件"></a>控件</h3><h4 id="设置控件可见与不可见"><a href="#设置控件可见与不可见" class="headerlink" title="设置控件可见与不可见"></a>设置控件可见与不可见</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//xml </span></span><br><span class="line">android:visibility=<span class="string">&quot;visible&quot;</span>;</span><br><span class="line"><span class="comment">//（可见）</span></span><br><span class="line"> android:visibility=<span class="string">&quot;invisible&quot;</span>;</span><br><span class="line"><span class="comment">//（不可见，保留布局位置）</span></span><br><span class="line"> android:visibility=<span class="string">&quot;gone&quot;</span>;</span><br><span class="line"><span class="comment">//（隐藏不保留布局位置）</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//java</span></span><br><span class="line">view.setVisibility(View.VISIBLE);</span><br><span class="line"><span class="comment">//（可见）</span></span><br><span class="line">view.setVisibility(View.INVISIBLE);</span><br><span class="line"><span class="comment">//（不可见，保留布局位置）</span></span><br><span class="line">view.setVisibility(View.GONE);</span><br><span class="line"><span class="comment">//（隐藏不保留布局位置）</span></span><br></pre></td></tr></table></figure>



<p><strong>View的一些公共属性</strong></p>
<p><code>android:id=&quot;@+id/tv_hello&quot;</code>注<code>dp</code>是与设备无关的属性，<code>px</code>像素就不一样了，<code>sp</code>是给字体用的</p>
<p><code>android:layout_width=&quot;match_parent&quot;</code></p>
<p><code>android:layout_height=&quot;match_parent&quot;</code></p>
<p><code>android:gravity=&quot;right|center_vertical&quot;</code> &#x2F;&#x2F;gravity属性字面意思重力的意思，控制view里面的内容的，多个属性用竖线分隔</p>
<p><code>android:layout_gravity=&quot;center_vertical&quot;</code> &#x2F;&#x2F;这个是来控制这个控件在父布局中的位置的，也会由父布局的特性影响到</p>
<p><code>android:background=&quot;@color/teal_200&quot;</code></p>
<p>padding和margin</p>
<h4 id="自定义背景"><a href="#自定义背景" class="headerlink" title="自定义背景"></a>自定义背景</h4><ul>
<li>新建Drawable Resource File文件</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span><br><span class="line">&lt;shape xmlns:android=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span><br><span class="line">    android:shape=<span class="string">&quot;rectangle&quot;</span>&gt;</span><br><span class="line">    <span class="comment">//android:shape属性设置形状</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//这个属性设置圆角弧度</span></span><br><span class="line">    &lt;corners</span><br><span class="line">        android:radius=<span class="string">&quot;20dp&quot;</span>/&gt;</span><br><span class="line">            </span><br><span class="line">	<span class="comment">//这个属性设置描边</span></span><br><span class="line">    &lt;stroke</span><br><span class="line">        android:color=<span class="string">&quot;@color/teal_200&quot;</span></span><br><span class="line">        android:width=<span class="string">&quot;2dp&quot;</span>/&gt;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//这个属性设置描边内部的填充色        </span></span><br><span class="line">    &lt;solid</span><br><span class="line">        android:color=<span class="string">&quot;@color/teal_200&quot;</span>/&gt;</span><br><span class="line"></span><br><span class="line">&lt;/shape&gt;</span><br></pre></td></tr></table></figure>



<h4 id="Dialog（对话框）"><a href="#Dialog（对话框）" class="headerlink" title="Dialog（对话框）"></a>Dialog（对话框）</h4><p><em>1. 最简单的提示对话框</em></p>
<p>（1）创建<code>AlertDialog.Builder</code>实例对象。</p>
<p>（2）通过<code>Builder</code>对象设置对话框的属性。</p>
<ul>
<li><code>setTitle()</code>设置标题</li>
<li><code>setIcon ()</code>设置图标</li>
<li><code>setMessage ()</code>设置要显示的内容</li>
<li><code>setItems()</code>设置在对话框中显示的项目列表</li>
<li><code>setView()</code>设置自定义的对话框样式</li>
<li><code>setPositiveButton ()</code>设置确定按钮</li>
<li><code>setNegativeButton ()</code>设置取消按钮</li>
<li><code>setNeutralButton ()</code>设置中立按钮</li>
<li><code>setSingleChoiceItems</code>单选框</li>
<li><code>setMultiChoiceItems</code>复选框</li>
</ul>
<p>（3）调用<code>Builder</code>对象的<code>create()</code>方法创建<code>AlertDialog</code>对话框</p>
<p>（4）调用<code>AlertDialog</code>的<code>show()</code>方法来显示对话框</p>
<p>（5）调用<code>AlertDialog</code>的<code>dimiss()</code>方法销毁对话框。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">AlertDialog.Builder builder= <span class="keyword">new</span> <span class="title class_">AlertDialog</span>.Builder(<span class="built_in">this</span>).setMessage(<span class="string">&quot;是否要修改个人信息&quot;</span>)</span><br><span class="line">                .setPositiveButton(<span class="string">&quot;确定&quot;</span>, <span class="keyword">new</span> <span class="title class_">DialogInterface</span>.OnClickListener() &#123;</span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(DialogInterface dialogInterface, <span class="type">int</span> i)</span> &#123;</span><br><span class="line">                        isConfirm = <span class="number">1</span>;</span><br><span class="line">                        dialogInterface.dismiss();</span><br><span class="line">                        Toast.makeText(ChangeMessageActivity.<span class="built_in">this</span>, <span class="string">&quot;个人信息保存成功！&quot;</span>,</span><br><span class="line">                                Toast.LENGTH_SHORT).show();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;)</span><br><span class="line">                .setNegativeButton(<span class="string">&quot;取消&quot;</span>, <span class="keyword">new</span> <span class="title class_">DialogInterface</span>.OnClickListener() &#123;</span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(DialogInterface dialogInterface, <span class="type">int</span> i)</span> &#123;</span><br><span class="line">                        dialogInterface.dismiss();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">        <span class="type">AlertDialog</span> <span class="variable">alertDialog</span> <span class="operator">=</span> builder.create();</span><br><span class="line">        alertDialog.show();</span><br></pre></td></tr></table></figure>



<p><img src="/%E5%AE%89%E5%8D%93%E5%BC%80%E5%8F%91%E7%AC%94%E8%AE%B0.assets/1.png"></p>
<p><em>2. 列表对话框（供选择）</em></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//setItems形成列表，第一个参数传列表条目的数组进去，第二个参数是监听，监听的第二个参数为选择了第几个条目，点击条目后会自动关闭</span></span><br><span class="line">String[] s = <span class="keyword">new</span> <span class="title class_">String</span>[]&#123;<span class="string">&quot;第一条&quot;</span>,<span class="string">&quot;第二条&quot;</span>,<span class="string">&quot;第三条&quot;</span>&#125;;</span><br><span class="line">        AlertDialog.Builder builder= <span class="keyword">new</span> <span class="title class_">AlertDialog</span>.Builder(<span class="built_in">this</span>)</span><br><span class="line">                .setItems(s, <span class="keyword">new</span> <span class="title class_">DialogInterface</span>.OnClickListener() &#123;</span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(DialogInterface dialogInterface, <span class="type">int</span> i)</span> &#123;</span><br><span class="line">                        Toast.makeText(ChangeMessageActivity.<span class="built_in">this</span>, <span class="string">&quot;选择了第&quot;</span>+i+<span class="number">1</span>+<span class="string">&quot;条消息&quot;</span>,</span><br><span class="line">                                Toast.LENGTH_SHORT).show();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">        <span class="type">AlertDialog</span> <span class="variable">alertDialog</span> <span class="operator">=</span> builder.create();</span><br><span class="line">        alertDialog.show();</span><br></pre></td></tr></table></figure>

<p><img src="/%E5%AE%89%E5%8D%93%E5%BC%80%E5%8F%91%E7%AC%94%E8%AE%B0.assets/2.png"></p>
<p><em>3. 单选列表对话框</em></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//setSingleChoiceItems第一个参数传列表条目数组，第二个参数为默认选择值，第三个为监听</span></span><br><span class="line">String[] s = <span class="keyword">new</span> <span class="title class_">String</span>[]&#123;<span class="string">&quot;第一条&quot;</span>,<span class="string">&quot;第二条&quot;</span>,<span class="string">&quot;第三条&quot;</span>&#125;;</span><br><span class="line">        AlertDialog.Builder builder= <span class="keyword">new</span> <span class="title class_">AlertDialog</span>.Builder(<span class="built_in">this</span>)</span><br><span class="line">                .setSingleChoiceItems(s, <span class="number">0</span>, <span class="keyword">new</span> <span class="title class_">DialogInterface</span>.OnClickListener() &#123;</span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(DialogInterface dialogInterface, <span class="type">int</span> i)</span> &#123;</span><br><span class="line">                        isConfirm = i;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;)</span><br><span class="line">                .setPositiveButton(<span class="string">&quot;确定&quot;</span>, <span class="keyword">new</span> <span class="title class_">DialogInterface</span>.OnClickListener() &#123;</span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(DialogInterface dialogInterface, <span class="type">int</span> i)</span> &#123;</span><br><span class="line">                        Toast.makeText(ChangeMessageActivity.<span class="built_in">this</span>, <span class="string">&quot;选择了第&quot;</span>+i+<span class="number">1</span>+<span class="string">&quot;条条目&quot;</span></span><br><span class="line">                                       , Toast.LENGTH_SHORT).show();</span><br><span class="line">                        dialogInterface.dismiss();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;)</span><br><span class="line">                .setNegativeButton(<span class="string">&quot;取消&quot;</span>, <span class="keyword">new</span> <span class="title class_">DialogInterface</span>.OnClickListener() &#123;</span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(DialogInterface dialogInterface, <span class="type">int</span> i)</span> &#123;</span><br><span class="line">                        dialogInterface.dismiss();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">        <span class="type">AlertDialog</span> <span class="variable">alertDialog</span> <span class="operator">=</span> builder.create();</span><br><span class="line">        alertDialog.show();</span><br></pre></td></tr></table></figure>

<p><em>4. 多选列表对话框</em></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//setMultiChoiceItems第一个参数传条目数组，第二个传一个boolean类型数组后续保存是否被选中</span></span><br><span class="line">String[] s = <span class="keyword">new</span> <span class="title class_">String</span>[]&#123;<span class="string">&quot;第一条&quot;</span>,<span class="string">&quot;第二条&quot;</span>,<span class="string">&quot;第三条&quot;</span>&#125;;</span><br><span class="line">        <span class="type">boolean</span>[] isCheck = <span class="keyword">new</span> <span class="title class_">boolean</span>[<span class="number">3</span>];</span><br><span class="line">        AlertDialog.Builder builder= <span class="keyword">new</span> <span class="title class_">AlertDialog</span>.Builder(<span class="built_in">this</span>)</span><br><span class="line">                .setMultiChoiceItems(s, isCheck, <span class="keyword">new</span> <span class="title class_">DialogInterface</span>.OnMultiChoiceClickListener() &#123;</span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(DialogInterface dialogInterface, <span class="type">int</span> i, <span class="type">boolean</span> b)</span> &#123;</span><br><span class="line">                        isCheck[i] = b;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;)</span><br><span class="line">                .setPositiveButton(<span class="string">&quot;确定&quot;</span>, <span class="keyword">new</span> <span class="title class_">DialogInterface</span>.OnClickListener() &#123;</span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(DialogInterface dialogInterface, <span class="type">int</span> i)</span> &#123;</span><br><span class="line">                        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; isCheck.length; j++) &#123;</span><br><span class="line">                            <span class="keyword">if</span> (isCheck[j])&#123;</span><br><span class="line">                                back+=j+<span class="number">1</span>;</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                        Toast.makeText(ChangeMessageActivity.<span class="built_in">this</span>, <span class="string">&quot;选择了&quot;</span>+back, Toast.LENGTH_SHORT).show();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;)</span><br><span class="line">                .setNegativeButton(<span class="string">&quot;取消&quot;</span>, <span class="keyword">new</span> <span class="title class_">DialogInterface</span>.OnClickListener() &#123;</span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(DialogInterface dialogInterface, <span class="type">int</span> i)</span> &#123;</span><br><span class="line">                        dialogInterface.dismiss();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">        <span class="type">AlertDialog</span> <span class="variable">alertDialog</span> <span class="operator">=</span> builder.create();</span><br><span class="line">        alertDialog.show();</span><br></pre></td></tr></table></figure>

<p><em>5. 半自定义消息框</em></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//setView()设置自定义类型</span></span><br><span class="line"><span class="type">View</span> <span class="variable">view</span> <span class="operator">=</span> getLayoutInflater().inflate(R.layout.half_dialog_view, <span class="literal">null</span>);</span><br><span class="line">        <span class="keyword">final</span> <span class="type">EditText</span> <span class="variable">editText</span> <span class="operator">=</span> (EditText) view.findViewById(R.id.dialog_edit);</span><br><span class="line">        <span class="type">AlertDialog</span> <span class="variable">dialog</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AlertDialog</span>.Builder(<span class="built_in">this</span>)</span><br><span class="line">                .setIcon(R.mipmap.icon)<span class="comment">//设置标题的图片</span></span><br><span class="line">                .setTitle(<span class="string">&quot;半自定义对话框&quot;</span>)<span class="comment">//设置对话框的标题</span></span><br><span class="line">                .setView(view)</span><br><span class="line">                .setNegativeButton(<span class="string">&quot;取消&quot;</span>, <span class="keyword">new</span> <span class="title class_">DialogInterface</span>.OnClickListener() &#123;</span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(DialogInterface dialog, <span class="type">int</span> which)</span> &#123;</span><br><span class="line">                        dialog.dismiss();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;)</span><br><span class="line">                .setPositiveButton(<span class="string">&quot;确定&quot;</span>, <span class="keyword">new</span> <span class="title class_">DialogInterface</span>.OnClickListener() &#123;</span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(DialogInterface dialog, <span class="type">int</span> which)</span> &#123;</span><br><span class="line">                        <span class="type">String</span> <span class="variable">content</span> <span class="operator">=</span> editText.getText().toString();</span><br><span class="line">                        Toast.makeText(MainActivity.<span class="built_in">this</span>, content, Toast.LENGTH_SHORT).show();</span><br><span class="line">                        dialog.dismiss();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;).create();</span><br><span class="line">        dialog.show();</span><br></pre></td></tr></table></figure>

<p><em>6. 全自定义消息框</em></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--对话框的样式--&gt;</span><br><span class="line">  &lt;style name=<span class="string">&quot;NormalDialogStyle&quot;</span>&gt;</span><br><span class="line">   &lt;!--对话框背景 --&gt;</span><br><span class="line">      &lt;item name=<span class="string">&quot;android:windowBackground&quot;</span>&gt;<span class="meta">@android</span>:color/transparent&lt;/item&gt;</span><br><span class="line">      &lt;!--边框 --&gt;</span><br><span class="line">      &lt;item name=<span class="string">&quot;android:windowFrame&quot;</span>&gt;<span class="meta">@null</span>&lt;/item&gt;</span><br><span class="line">      &lt;!--没有标题 --&gt;</span><br><span class="line">      &lt;item name=<span class="string">&quot;android:windowNoTitle&quot;</span>&gt;<span class="literal">true</span>&lt;/item&gt;</span><br><span class="line">      &lt;!-- 是否浮现在Activity之上 --&gt;</span><br><span class="line">      &lt;item name=<span class="string">&quot;android:windowIsFloating&quot;</span>&gt;<span class="literal">true</span>&lt;/item&gt;</span><br><span class="line">      &lt;!--背景透明 --&gt;</span><br><span class="line">      &lt;item name=<span class="string">&quot;android:windowIsTranslucent&quot;</span>&gt;<span class="literal">false</span>&lt;/item&gt;</span><br><span class="line">      &lt;!-- 是否有覆盖 --&gt;</span><br><span class="line">      &lt;item name=<span class="string">&quot;android:windowContentOverlay&quot;</span>&gt;<span class="meta">@null</span>&lt;/item&gt;</span><br><span class="line">      &lt;!--进出的显示动画 --&gt;</span><br><span class="line">      &lt;item name=<span class="string">&quot;android:windowAnimationStyle&quot;</span>&gt;<span class="meta">@style</span>/normalDialogAnim&lt;/item&gt;</span><br><span class="line">      &lt;!--背景变暗--&gt;</span><br><span class="line">      &lt;item name=<span class="string">&quot;android:backgroundDimEnabled&quot;</span>&gt;<span class="literal">true</span>&lt;/item&gt;</span><br><span class="line">  &lt;/style&gt;</span><br><span class="line">  &lt;!--对话框动画--&gt;</span><br><span class="line">  &lt;style name=<span class="string">&quot;normalDialogAnim&quot;</span> parent=<span class="string">&quot;android:Animation&quot;</span>&gt;</span><br><span class="line">      &lt;item name=<span class="string">&quot;@android:windowEnterAnimation&quot;</span>&gt;<span class="meta">@anim</span>/normal_dialog_enter&lt;/item&gt;</span><br><span class="line">      &lt;item name=<span class="string">&quot;@android:windowExitAnimation&quot;</span>&gt;<span class="meta">@anim</span>/normal_dialog_exit&lt;/item&gt;</span><br><span class="line">  &lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 自定义对话框</span></span><br><span class="line"><span class="comment">    * dialog.setContentView(view);就可以设置我们自己的布局了</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">customDialog</span><span class="params">()</span> &#123;</span><br><span class="line">       <span class="keyword">final</span> <span class="type">Dialog</span> <span class="variable">dialog</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Dialog</span>(<span class="built_in">this</span>, R.style.NormalDialogStyle);</span><br><span class="line">       <span class="type">View</span> <span class="variable">view</span> <span class="operator">=</span> View.inflate(<span class="built_in">this</span>, R.layout.dialog_normal, <span class="literal">null</span>);</span><br><span class="line">       <span class="type">TextView</span> <span class="variable">cancel</span> <span class="operator">=</span> (TextView) view.findViewById(R.id.cancel);</span><br><span class="line">       <span class="type">TextView</span> <span class="variable">confirm</span> <span class="operator">=</span> (TextView) view.findViewById(R.id.confirm);</span><br><span class="line">       dialog.setContentView(view);</span><br><span class="line">       <span class="comment">//使得点击对话框外部不消失对话框</span></span><br><span class="line">       dialog.setCanceledOnTouchOutside(<span class="literal">true</span>);</span><br><span class="line">       <span class="comment">//设置对话框的大小</span></span><br><span class="line">       view.setMinimumHeight((<span class="type">int</span>) (ScreenSizeUtils.getInstance(<span class="built_in">this</span>).getScreenHeight() * <span class="number">0.23f</span>));</span><br><span class="line">       <span class="type">Window</span> <span class="variable">dialogWindow</span> <span class="operator">=</span> dialog.getWindow();</span><br><span class="line">       WindowManager.<span class="type">LayoutParams</span> <span class="variable">lp</span> <span class="operator">=</span> dialogWindow.getAttributes();</span><br><span class="line">       lp.width = (<span class="type">int</span>) (ScreenSizeUtils.getInstance(<span class="built_in">this</span>).getScreenWidth() * <span class="number">0.75f</span>);</span><br><span class="line">       lp.height = WindowManager.LayoutParams.WRAP_CONTENT;</span><br><span class="line">       lp.gravity = Gravity.CENTER;</span><br><span class="line">       dialogWindow.setAttributes(lp);</span><br><span class="line">       cancel.setOnClickListener(<span class="keyword">new</span> <span class="title class_">View</span>.OnClickListener() &#123;</span><br><span class="line">           <span class="meta">@Override</span></span><br><span class="line">           <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View v)</span> &#123;</span><br><span class="line">               dialog.dismiss();</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;);</span><br><span class="line">       confirm.setOnClickListener(<span class="keyword">new</span> <span class="title class_">View</span>.OnClickListener() &#123;</span><br><span class="line">           <span class="meta">@Override</span></span><br><span class="line">           <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View v)</span> &#123;</span><br><span class="line">               dialog.dismiss();</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;);</span><br><span class="line">       dialog.show();</span><br><span class="line">   &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/%E5%AE%89%E5%8D%93%E5%BC%80%E5%8F%91%E7%AC%94%E8%AE%B0.assets/3.png"></p>
<p><em>一个常用设计</em></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span><br><span class="line">&lt;LinearLayout xmlns:android=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span><br><span class="line">    android:layout_width=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">    android:layout_height=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">    android:background=<span class="string">&quot;@android:color/transparent&quot;</span></span><br><span class="line">    android:orientation=<span class="string">&quot;vertical&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">    &lt;Button</span><br><span class="line">        android:layout_width=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">        android:layout_height=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">        android:background=<span class="string">&quot;@drawable/round_corner&quot;</span></span><br><span class="line">        android:text=<span class="string">&quot;拍照&quot;</span> /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;TextView</span><br><span class="line">        android:layout_width=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">        android:layout_height=<span class="string">&quot;1dp&quot;</span></span><br><span class="line">        android:layout_marginLeft=<span class="string">&quot;10dp&quot;</span></span><br><span class="line">        android:layout_marginRight=<span class="string">&quot;10dp&quot;</span></span><br><span class="line">        android:background=<span class="string">&quot;#ddd&quot;</span> /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;Button</span><br><span class="line">        android:layout_width=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">        android:layout_height=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">        android:background=<span class="string">&quot;@drawable/round_corner&quot;</span></span><br><span class="line">        android:text=<span class="string">&quot;相册&quot;</span> /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;Button</span><br><span class="line">        android:layout_width=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">        android:layout_height=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">        android:layout_marginTop=<span class="string">&quot;10dp&quot;</span></span><br><span class="line">        android:background=<span class="string">&quot;@drawable/round_corner&quot;</span></span><br><span class="line">        android:text=<span class="string">&quot;取消&quot;</span> /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;View</span><br><span class="line">        android:layout_width=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">        android:layout_height=<span class="string">&quot;15dp&quot;</span> /&gt;</span><br><span class="line">&lt;/LinearLayout&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Dialog</span> <span class="variable">dialog</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Dialog</span>(<span class="built_in">this</span>, R.style.NormalDialogStyle);</span><br><span class="line"><span class="type">View</span> <span class="variable">view</span> <span class="operator">=</span> View.inflate(<span class="built_in">this</span>, R.layout.dialog_bottom, <span class="literal">null</span>);</span><br><span class="line">dialog.setContentView(view);</span><br><span class="line">dialog.setCanceledOnTouchOutside(<span class="literal">true</span>);</span><br><span class="line">view.setMinimumHeight((<span class="type">int</span>) (ScreenSizeUtils.getInstance(<span class="built_in">this</span>).getScreenHeight() * <span class="number">0.23f</span>));</span><br><span class="line"><span class="type">Window</span> <span class="variable">dialogWindow</span> <span class="operator">=</span> dialog.getWindow();</span><br><span class="line">WindowManager.<span class="type">LayoutParams</span> <span class="variable">lp</span> <span class="operator">=</span> dialogWindow.getAttributes();</span><br><span class="line">lp.width = (<span class="type">int</span>) (ScreenSizeUtils.getInstance(<span class="built_in">this</span>).getScreenWidth() * <span class="number">0.9f</span>);</span><br><span class="line">lp.height = WindowManager.LayoutParams.WRAP_CONTENT;</span><br><span class="line">lp.gravity = Gravity.BOTTOM;</span><br><span class="line">dialogWindow.setAttributes(lp);</span><br><span class="line">dialog.show();</span><br></pre></td></tr></table></figure>

<p><img src="/%E5%AE%89%E5%8D%93%E5%BC%80%E5%8F%91%E7%AC%94%E8%AE%B0.assets/4.png"></p>
<p><em>7. 进度条对话框</em></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//圆形</span></span><br><span class="line"><span class="type">ProgressDialog</span> <span class="variable">dialog</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ProgressDialog</span>(<span class="built_in">this</span>);</span><br><span class="line"> dialog.setMessage(<span class="string">&quot;正在加载中&quot;</span>);</span><br><span class="line"> dialog.show();</span><br></pre></td></tr></table></figure>



<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//线性进度条，dialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL)设置即可		</span></span><br><span class="line"><span class="keyword">final</span> <span class="type">ProgressDialog</span> <span class="variable">dialog</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ProgressDialog</span>(<span class="built_in">this</span>);</span><br><span class="line">        dialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);</span><br><span class="line">        dialog.setMessage(<span class="string">&quot;正在加载中&quot;</span>);</span><br><span class="line">        dialog.setMax(<span class="number">100</span>);</span><br><span class="line">        <span class="keyword">final</span> <span class="type">Timer</span> <span class="variable">timer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Timer</span>();</span><br><span class="line">        timer.schedule(<span class="keyword">new</span> <span class="title class_">TimerTask</span>() &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">progress</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">                dialog.setProgress(progress += <span class="number">5</span>);</span><br><span class="line">                <span class="keyword">if</span> (progress == <span class="number">100</span>) &#123;</span><br><span class="line">                    timer.cancel();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;, <span class="number">0</span>, <span class="number">1000</span>);</span><br><span class="line">        dialog.show();</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><em>8. 日期和时间选择消息框</em></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Calendar</span> <span class="variable">calendar</span> <span class="operator">=</span> Calendar.getInstance();</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">DatePickerDialog</span>(<span class="built_in">this</span></span><br><span class="line">        , <span class="keyword">new</span> <span class="title class_">DatePickerDialog</span>.OnDateSetListener() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onDateSet</span><span class="params">(DatePicker view, <span class="type">int</span> year, <span class="type">int</span> month, <span class="type">int</span> dayOfMonth)</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;, calendar.get(Calendar.YEAR), calendar.get(Calendar.MONTH), calendar.get(Calendar.DAY_OF_MONTH))</span><br><span class="line">        .show(); </span><br></pre></td></tr></table></figure>





<h4 id="TextView"><a href="#TextView" class="headerlink" title="TextView"></a>TextView</h4><p><em><strong>空格及其他占位符</strong></em></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">```&amp;#160;``` == &amp;nbsp; == &amp;#xA0; == no-break space （普通的英文半角空格但不换行）</span><br><span class="line"></span><br><span class="line">```&amp;#12288; ```== 中文全角空格 （一个中文宽度）</span><br><span class="line"></span><br><span class="line">```&amp;#8194;``` == &amp;ensp; == en空格 （半个中文宽度）</span><br><span class="line"></span><br><span class="line">```&amp;#8195; ```== &amp;emsp; == em空格 （一个中文宽度）</span><br><span class="line"></span><br><span class="line">```&amp;#8197;``` == 四分之一em空格 （四分之一中文宽度）</span><br><span class="line"></span><br><span class="line">相比平时的空格（&amp;#32;），nbsp拥有不间断（non-breaking）特性。即连续的nbsp会在同一行内显示。即使有100个连续的nbsp，浏览器也不会把它们拆成两行。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">```java</span><br><span class="line">//设置颜色</span><br><span class="line">mTextView2.setTextColor(getResources().getColor(R.color.black));</span><br></pre></td></tr></table></figure>





<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//字符串拼接，比直接+号进行拼接效率更高，高很多</span></span><br><span class="line">            <span class="type">StringBuffer</span> <span class="variable">stringBuffer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuffer</span>();</span><br><span class="line">            stringBuffer.append(year);</span><br><span class="line">            stringBuffer.append(<span class="string">&quot;111&quot;</span>);</span><br></pre></td></tr></table></figure>



<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">tv = (TextView) findViewById(R.id. text_view ); </span><br><span class="line"><span class="comment">// 中间加横线 ， 添加Paint.ANTI_ALIAS_FLAG是线会变得清晰去掉锯齿</span></span><br><span class="line">tv.getPaint().setFlags(Paint.STRIKE_THRU_TEXT_FLAG | Paint.ANTI_ALIAS_FLAG ); </span><br><span class="line"><span class="comment">// 底部加横线 ， 添加Paint.ANTI_ALIAS_FLAG是线会变得清晰去掉锯齿</span></span><br><span class="line">tv .getPaint().setFlags(Paint. UNDERLINE_TEXT_FLAG | Paint.ANTI_ALIAS_FLAG );</span><br></pre></td></tr></table></figure>



<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">android:maxLines=&quot;2&quot;</span><br><span class="line">android:ellipsize=&quot;end&quot;</span><br></pre></td></tr></table></figure>



<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*点击×的监听*/</span></span><br><span class="line">    edtTitle.setOnTouchListener(<span class="keyword">new</span> <span class="title class_">View</span>.OnTouchListener() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">onTouch</span><span class="params">(View view, MotionEvent motionEvent)</span> &#123;</span><br><span class="line">            <span class="comment">// 如果点击的是清除图标区域</span></span><br><span class="line">            <span class="keyword">if</span> (motionEvent.getX() &gt;= (view.getWidth() - view.getPaddingEnd() - edtTitle.getCompoundDrawables()[<span class="number">2</span>].getBounds().width())) &#123;</span><br><span class="line">                <span class="comment">// 处理清除图标的点击事件</span></span><br><span class="line">                edtTitle.setText(<span class="string">&quot;&quot;</span>);  <span class="comment">// 清空文本</span></span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;  <span class="comment">// 消耗触摸事件，不传递给下层的触摸监听器</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;  <span class="comment">// 其他情况交给下层的触摸监听器处理</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure>





<h4 id="Edittext"><a href="#Edittext" class="headerlink" title="Edittext"></a>Edittext</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//文本类型，多为大写、小写和数字符号。  </span></span><br><span class="line">android:inputType=<span class="string">&quot;none&quot;</span><span class="comment">//输入普通字符 </span></span><br><span class="line">android:inputType=<span class="string">&quot;text&quot;</span><span class="comment">//输入普通字符 </span></span><br><span class="line">android:inputType=<span class="string">&quot;textCapCharacters&quot;</span><span class="comment">//输入普通字符 </span></span><br><span class="line">android:inputType=<span class="string">&quot;textCapWords&quot;</span><span class="comment">//单词首字母大小 </span></span><br><span class="line">android:inputType=<span class="string">&quot;textCapSentences&quot;</span><span class="comment">//仅第一个字母大小 </span></span><br><span class="line">android:inputType=<span class="string">&quot;textAutoCorrect&quot;</span><span class="comment">//前两个自动完成 </span></span><br><span class="line">android:inputType=<span class="string">&quot;textAutoComplete&quot;</span><span class="comment">//前两个自动完成 </span></span><br><span class="line">android:inputType=<span class="string">&quot;textMultiLine&quot;</span><span class="comment">//多行输入 </span></span><br><span class="line">android:inputType=<span class="string">&quot;textImeMultiLine&quot;</span><span class="comment">//输入法多行（不一定支持） </span></span><br><span class="line">android:inputType=<span class="string">&quot;textNoSuggestions&quot;</span><span class="comment">//不提示 </span></span><br><span class="line">android:inputType=<span class="string">&quot;textUri&quot;</span><span class="comment">//URI格式 </span></span><br><span class="line">android:inputType=<span class="string">&quot;textEmailAddress&quot;</span><span class="comment">//电子邮件地址格式 </span></span><br><span class="line">android:inputType=<span class="string">&quot;textEmailSubject&quot;</span><span class="comment">//邮件主题格式 </span></span><br><span class="line">android:inputType=<span class="string">&quot;textShortMessage&quot;</span><span class="comment">//短消息格式 </span></span><br><span class="line">android:inputType=<span class="string">&quot;textLongMessage&quot;</span><span class="comment">//长消息格式 </span></span><br><span class="line">android:inputType=<span class="string">&quot;textPersonName&quot;</span><span class="comment">//人名格式 </span></span><br><span class="line">android:inputType=<span class="string">&quot;textPostalAddress&quot;</span><span class="comment">//邮政格式 </span></span><br><span class="line">android:inputType=<span class="string">&quot;textPassword&quot;</span><span class="comment">//密码格式 </span></span><br><span class="line">android:inputType=<span class="string">&quot;textVisiblePassword&quot;</span><span class="comment">//密码可见格式 </span></span><br><span class="line">android:inputType=<span class="string">&quot;textWebEditText&quot;</span><span class="comment">//作为网页表单的文本格式 </span></span><br><span class="line">android:inputType=<span class="string">&quot;textFilter&quot;</span><span class="comment">//文本筛选格式 </span></span><br><span class="line">android:inputType=<span class="string">&quot;textPhonetic&quot;</span><span class="comment">//拼音输入格式 </span></span><br><span class="line"></span><br><span class="line"><span class="comment">//数值类型 </span></span><br><span class="line">android:inputType=<span class="string">&quot;number&quot;</span><span class="comment">//数字格式 </span></span><br><span class="line">android:inputType=<span class="string">&quot;numberSigned&quot;</span><span class="comment">//有符号数字格式 </span></span><br><span class="line">android:inputType=<span class="string">&quot;numberDecimal&quot;</span><span class="comment">//可以带小数点的浮点格式 </span></span><br><span class="line">android:inputType=<span class="string">&quot;phone&quot;</span><span class="comment">//拨号键盘 </span></span><br><span class="line">android:inputType=<span class="string">&quot;datetime&quot;</span><span class="comment">//日期+时间格式 </span></span><br><span class="line">android:inputType=<span class="string">&quot;date&quot;</span><span class="comment">//日期键盘 </span></span><br><span class="line">android:inputType=<span class="string">&quot;time&quot;</span><span class="comment">//时间键盘</span></span><br></pre></td></tr></table></figure>

<p><code>maxlength</code>控制读入最大长度 </p>
<p><code>maxline</code>控制显示最大行数</p>
<p>去掉下滑线<code>background=&quot;@null&quot;</code></p>
<p><code>textAlignment</code>设置输入居中</p>
<p>EditText触点问题</p>
<p>setFocusable这个是用键盘是否能获得焦点<br>setFocusableInTouchMode这个是触摸是否能获得焦点</p>
<p><strong>记事本类似实例，大范围点击即可获取某个输入框的焦点输入，并在键盘收起后失去焦点</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//先导库</span></span><br><span class="line">implementation <span class="string">&#x27;net.yslibrary.keyboardvisibilityevent:keyboardvisibilityevent:3.0.0-RC3&#x27;</span></span><br><span class="line"><span class="comment">//代码        </span></span><br><span class="line">        <span class="type">RelativeLayout</span> <span class="variable">relativeLayout</span> <span class="operator">=</span> findViewById(R.id.relativelayout);</span><br><span class="line">        mEditText = findViewById(R.id.edittext_message);</span><br><span class="line">        relativeLayout.setOnClickListener(<span class="keyword">new</span> <span class="title class_">View</span>.OnClickListener() &#123;</span><br><span class="line">            <span class="meta">@SuppressLint(&quot;NewApi&quot;)</span></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View view)</span> &#123;</span><br><span class="line">                <span class="comment">//这三行代码是展开键盘的</span></span><br><span class="line">                mEditText.requestFocus();           </span><br><span class="line">                <span class="type">InputMethodManager</span> <span class="variable">inputMethodManager</span> <span class="operator">=</span> (InputMethodManager) mEditText.getContext().getSystemService(Context.INPUT_METHOD_SERVICE);</span><br><span class="line">                inputMethodManager.showSoftInput(mEditText,<span class="number">0</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        KeyboardVisibilityEvent.setEventListener(GetActivity.<span class="built_in">this</span>, <span class="keyword">new</span> <span class="title class_">KeyboardVisibilityEventListener</span>() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onVisibilityChanged</span><span class="params">(<span class="type">boolean</span> b)</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (!b)&#123;</span><br><span class="line">                    mEditText.clearFocus();</span><br><span class="line">                    <span class="comment">//清除焦点</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;); </span><br><span class="line"><span class="comment">//Edittext触点问题，现在不在xml和Java文件设置下面两个属性在进入界面时输入框也不会获取焦点，貌似默认都为true</span></span><br><span class="line">setFocusable()这个是用键盘是否能获得焦点</span><br><span class="line">setFocusableInTouchMode()这个是触摸是否能获得焦点</span><br></pre></td></tr></table></figure>



<p><strong>Edittext监听</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">editText.addTextChangedListener(<span class="keyword">new</span> <span class="title class_">TextWatcher</span>() &#123;  </span><br><span class="line">         </span><br><span class="line">       <span class="meta">@Override</span>  </span><br><span class="line">       <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onTextChanged</span><span class="params">(CharSequence text, <span class="type">int</span> start, <span class="type">int</span> before, <span class="type">int</span> count)</span> &#123;  </span><br><span class="line">       <span class="comment">//text  输入框中改变后的字符串信息  </span></span><br><span class="line">       <span class="comment">//start 输入框中改变后的字符串的起始位置  </span></span><br><span class="line">       <span class="comment">//before 输入框中改变前的字符串的位置 默认为0  </span></span><br><span class="line">       <span class="comment">//count 输入框中改变后的一共输入字符串的数量  </span></span><br><span class="line">         </span><br><span class="line">       &#125;  </span><br><span class="line">    <span class="comment">//在这里可以设置一点击就让提示隐藏什么的，有时候是用一个大文本框居中提示就可以在</span></span><br><span class="line">         </span><br><span class="line">       <span class="meta">@Override</span>  </span><br><span class="line">       <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">beforeTextChanged</span><span class="params">(CharSequence text, <span class="type">int</span> start, <span class="type">int</span> count,<span class="type">int</span> after)</span> &#123;  </span><br><span class="line">       <span class="comment">//text  输入框中改变前的字符串信息  </span></span><br><span class="line">       <span class="comment">//start 输入框中改变前的字符串的起始位置  </span></span><br><span class="line">       <span class="comment">//count 输入框中改变前后的字符串改变数量一般为0  </span></span><br><span class="line">       <span class="comment">//after 输入框中改变后的字符串与起始位置的偏移量  </span></span><br><span class="line">       </span><br><span class="line">       &#125;  </span><br><span class="line">         </span><br><span class="line">       <span class="meta">@Override</span>  </span><br><span class="line">       <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterTextChanged</span><span class="params">(Editable edit)</span> &#123;  </span><br><span class="line">       <span class="comment">//edit  输入结束呈现在输入框中的信息  </span></span><br><span class="line">      </span><br><span class="line">       &#125;  </span><br><span class="line">   &#125;);</span><br></pre></td></tr></table></figure>







<h4 id="ImageView"><a href="#ImageView" class="headerlink" title="ImageView"></a>ImageView</h4><p>android:scaleType&#x3D;“center”<br>(1)当图片大于ImageView的宽高：以图片的中心点和ImageView的中心点为基准，按照图片的原大小居中显示，不缩放，用ImageView的大小截取图片的居中部分。</p>
<p>(2)当图片小于ImageView的宽高：直接居中显示该图片。</p>
<p>2 android:scaleType&#x3D;“centerCrop”</p>
<p>(1)当图片大于ImageView的宽高：以图片的中心点和ImageView的中心点为基准，按比例缩小图片，直到图片的宽高有一边等于ImageView的宽高，则对于另一边，图片的长度大于或等于ImageView的长度，最后用ImageView的大小居中截取该图片。</p>
<p>(2)当图片小于ImageView的宽高：以图片的中心店和ImageView的中心点为基准，按比例扩大图片，直到图片的宽高大于或等于ImageView的宽高，并按ImageView的大小居中截取该图片。</p>
<p>3 android:scaleType&#x3D;“centerInside”</p>
<p>(1)当图片大于ImageView的宽高：以图片的中心和ImageView的中心点为基准，按比例缩小图片，使图片宽高等于或者小于ImagevView的宽高，直到将图片的内容完整居中显示。<br>(2)当图片小于ImageView的宽高：直接居中显示该图片。</p>
<p>4 android:scaleType&#x3D;“fitCenter”</p>
<p>表示把图片按比例扩大（缩小）到ImageView的宽度，居中显示。<br>5 android:scaleType&#x3D;“fitStart”</p>
<p>表示把图片按比例扩大（缩小）到ImageView的宽度，在ImageView的上方显示。</p>
<p>6 android:scaleType&#x3D;“fitEnd”</p>
<p>表示把图片按比例扩大（缩小）到ImageView的宽度，在ImageView的下方显示。</p>
<p>7 android:scaleType&#x3D;“fitXY”</p>
<p>表示把图片按指定的大小在ImageView中显示，拉伸或收缩图片，不保持原比例，填满ImageView。<br>8 android:scaleType&#x3D;“matrix”<br>表示不改变原图的大小，从ImageView的左上角开始绘制原图，原图超过ImageView的部分作裁剪处理。 用矩阵来绘制，动态缩小放大图片来显示。</p>
<h4 id="几种Button"><a href="#几种Button" class="headerlink" title="几种Button"></a>几种Button</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//让Button中书写的英文不全为大写</span></span><br><span class="line">android:textAllCaps=<span class="string">&quot;false</span></span><br><span class="line"><span class="string">//取消Button边框</span></span><br><span class="line"><span class="string">style=&quot;</span>?android:attr/borderlessButtonStyle<span class="string">&quot;</span></span><br></pre></td></tr></table></figure>









<p><strong>RadioButton和RadioGroup(本质是线性布局)</strong></p>
<p>单选选择框，搭配<strong>RadioGroup</strong>使用，RadioButton通过<code>android:checked</code>属性判断是否选中，一开始都为不选中状态，一旦选中将无法取消，只能选择其他的，<strong>但个人感觉可以一开始设计选择第一个，如果用户不选择则默认选择第一个，这样子还可以避免判断是否选择的情况，但不知道交互上哪个更好</strong></p>
<p><strong>RadioGroup中一个按钮被选中后checked属性将为true，其他的button属性为false，<code>android:button = &quot;&quot;</code>属性设为@null则没有圆点了</strong></p>
<p><strong>要根据是否选中改变RadioButton的drawableTop的图片可以新建一个drawable文件设置给这个属性，如下</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span><br><span class="line">&lt;selector xmlns:android=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">    &lt;item android:drawable=<span class="string">&quot;@drawable/home_icon_normal&quot;</span> android:state_checked=<span class="string">&quot;false&quot;</span>/&gt;</span><br><span class="line">    &lt;item android:drawable=<span class="string">&quot;@drawable/home_icon_checked&quot;</span> android:state_checked=<span class="string">&quot;true&quot;</span>/&gt;</span><br><span class="line"></span><br><span class="line">&lt;/selector&gt;</span><br><span class="line"><span class="comment">//然后</span></span><br><span class="line">android:drawableTop=<span class="string">&quot;@drawable/btn1_background&quot;</span></span><br><span class="line"><span class="comment">//字体同样，运用即可</span></span><br><span class="line">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span><br><span class="line">&lt;selector xmlns:android=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">    &lt;item android:color=<span class="string">&quot;@color/black&quot;</span> android:state_checked=<span class="string">&quot;false&quot;</span>/&gt;</span><br><span class="line">    &lt;item android:color=<span class="string">&quot;@color/blue_02C4FF&quot;</span> android:state_checked=<span class="string">&quot;true&quot;</span>/&gt;</span><br><span class="line">    </span><br><span class="line">&lt;/selector&gt;    </span><br></pre></td></tr></table></figure>





<p>使用方法:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//布局   </span></span><br><span class="line"> &lt;RadioGroup</span><br><span class="line">        android:id=<span class="string">&quot;@+id/radio_group_gender&quot;</span></span><br><span class="line">        android:layout_width=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">        android:layout_height=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">        android:orientation=<span class="string">&quot;horizontal&quot;</span></span><br><span class="line">        android:layout_alignStart=<span class="string">&quot;@id/edittext_id&quot;</span></span><br><span class="line">        android:layout_below=<span class="string">&quot;@id/textview_gander&quot;</span>&gt;</span><br><span class="line">        </span><br><span class="line">        &lt;RadioButton</span><br><span class="line">            android:id=<span class="string">&quot;@+id/radiobutton_gender_man&quot;</span></span><br><span class="line">            android:layout_width=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">            android:layout_height=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">            android:text=<span class="string">&quot;男&quot;</span></span><br><span class="line">            android:textSize=<span class="string">&quot;20sp&quot;</span>/&gt;</span><br><span class="line">        </span><br><span class="line">        &lt;RadioButton</span><br><span class="line">            android:id=<span class="string">&quot;@+id/radiobutton_gender_woman&quot;</span></span><br><span class="line">            android:layout_width=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">            android:layout_height=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">            android:text=<span class="string">&quot;女&quot;</span></span><br><span class="line">            android:textSize=<span class="string">&quot;20sp&quot;</span></span><br><span class="line">            android:layout_marginStart=<span class="string">&quot;25dp&quot;</span>/&gt;</span><br><span class="line">        </span><br><span class="line">    &lt;/RadioGroup&gt;</span><br><span class="line">                </span><br><span class="line"><span class="comment">//Activity中</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> gender;</span><br><span class="line">        <span class="type">RadioGroup</span> <span class="variable">radioGroup_gander</span> <span class="operator">=</span> findViewById(R.id.radio_group_gender);</span><br><span class="line">        radioGroup_gender.setOnCheckedChangeListener(<span class="built_in">this</span>);</span><br><span class="line"></span><br><span class="line">    <span class="meta">@SuppressLint(&quot;NonConstantResourceId&quot;)</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onCheckedChanged</span><span class="params">(RadioGroup radioGroup, <span class="type">int</span> i)</span> &#123;</span><br><span class="line">        <span class="keyword">switch</span> (i)&#123;</span><br><span class="line">            <span class="keyword">case</span> R.id.radiobutton_gender_man:</span><br><span class="line">                gender = <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> R.id.radiobutton_gender_woman:</span><br><span class="line">                gender = <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">			<span class="keyword">default</span>:</span><br><span class="line">                gender = -<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;    </span><br><span class="line"></span><br><span class="line"><span class="comment">//当然也可以不监听，因为监听是为了做更复杂的操作而去建议监听的，借助它只能2选1的特性</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> gender;</span><br><span class="line">        <span class="type">RadioButton</span> <span class="variable">radioButton_gender_man</span> <span class="operator">=</span> findViewById(R.id.radiobutton_gender_man);</span><br><span class="line">        <span class="type">RadioButton</span> <span class="variable">radioButton_gender_woman</span> <span class="operator">=</span> findViewById(R.id.radiobutton_gender_woman);</span><br><span class="line">        <span class="keyword">if</span> (radioButton_gender_man.isChecked())&#123;</span><br><span class="line">            gender = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (radioButton_gender_woman.isChecked())&#123;</span><br><span class="line">            gender = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> gender = -<span class="number">1</span>;</span><br></pre></td></tr></table></figure>



<p>自定义</p>
<p>一个为灰色边框内部为白色，点击为蓝色打勾</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">selector</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:state_checked</span>=<span class="string">&quot;true&quot;</span> <span class="attr">android:drawable</span>=<span class="string">&quot;@drawable/bg_rbtn_activate_membership_selected&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:state_enabled</span>=<span class="string">&quot;false&quot;</span> <span class="attr">android:drawable</span>=<span class="string">&quot;@drawable/bg_rbtn_activate_membership_normal&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">selector</span>&gt;</span></span><br></pre></td></tr></table></figure>



<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">layer-list</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:drawable</span>=<span class="string">&quot;@drawable/bg_rbtn_activate_membership_normal_bottom&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">shape</span> <span class="attr">android:shape</span>=<span class="string">&quot;oval&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">stroke</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:color</span>=<span class="string">&quot;@color/gray_979797&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:width</span>=<span class="string">&quot;1dp&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">shape</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">layer-list</span>&gt;</span></span><br></pre></td></tr></table></figure>



<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">vector</span> <span class="attr">android:height</span>=<span class="string">&quot;24dp&quot;</span> <span class="attr">android:tint</span>=<span class="string">&quot;#FFFFFF&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:viewportHeight</span>=<span class="string">&quot;24&quot;</span> <span class="attr">android:viewportWidth</span>=<span class="string">&quot;24&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:width</span>=<span class="string">&quot;24dp&quot;</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">path</span> <span class="attr">android:fillColor</span>=<span class="string">&quot;@android:color/white&quot;</span> <span class="attr">android:pathData</span>=<span class="string">&quot;M12,2C6.47,2 2,6.47 2,12s4.47,10 10,10 10,-4.47 10,-10S17.53,2 12,2z&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">vector</span>&gt;</span></span><br></pre></td></tr></table></figure>



<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">vector</span> <span class="attr">android:height</span>=<span class="string">&quot;24dp&quot;</span> <span class="attr">android:tint</span>=<span class="string">&quot;#3C85FF&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:viewportHeight</span>=<span class="string">&quot;24&quot;</span> <span class="attr">android:viewportWidth</span>=<span class="string">&quot;24&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:width</span>=<span class="string">&quot;24dp&quot;</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">path</span> <span class="attr">android:fillColor</span>=<span class="string">&quot;@android:color/white&quot;</span> <span class="attr">android:pathData</span>=<span class="string">&quot;M12,2C6.48,2 2,6.48 2,12s4.48,10 10,10 10,-4.48 10,-10S17.52,2 12,2zM10,17l-5,-5 1.41,-1.41L10,14.17l7.59,-7.59L19,8l-9,9z&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">vector</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p><em><strong>Checkbox</strong></em></p>
<p>支持多选的选择框</p>
<h4 id="万能RecyclerView"><a href="#万能RecyclerView" class="headerlink" title="万能RecyclerView"></a>万能RecyclerView</h4><p>GitHub</p>
<p><code>https://github.com/youlookwhat/ByRecyclerView/wiki</code></p>
<ul>
<li><p><strong><code>ListView</code> 和 <code>GridView</code> 的加强版</strong></p>
</li>
<li><p><strong>显示大量数据，减少内存占用量</strong></p>
</li>
</ul>
<p><strong>类ListVeiw功能</strong></p>
<ol>
<li>先在布局文件添加<code>RecyclerView</code>控件，然后在Activity中拿到控件</li>
<li>然后准备数据，可以通过活动传给Adapter，也可以直接在Adapter里面直接准备，一般以第一种方式实现</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//首先要知道准备的是什么类型的数据，创建Bean类和List</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//Bean类</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Item</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> image;</span><br><span class="line">    <span class="keyword">private</span> String message;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getImage</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> image;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setImage</span><span class="params">(<span class="type">int</span> image)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.image = image;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getMessage</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> message;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setMessage</span><span class="params">(String message)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.message = message;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Activity中准备数据</span></span><br><span class="line">        List&lt;Item&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">30</span>; i++) &#123;</span><br><span class="line">            <span class="type">Item</span> <span class="variable">item</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Item</span>();</span><br><span class="line">            item.setImage(R.mipmap.student);</span><br><span class="line">            item.setMessage(<span class="string">&quot;这是第&quot;</span>+i+<span class="string">&quot;个条目&quot;</span>);</span><br><span class="line">            list.add(item);</span><br><span class="line">        &#125;</span><br><span class="line"><span class="comment">//调用自己写好的Adapter里面的方法</span></span><br><span class="line">mAdapter.getData(list);</span><br></pre></td></tr></table></figure>





<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//然后要把每个条目的视图创建出来，就是一个layout布局文件</span></span><br><span class="line">&lt;RelativeLayout xmlns:android=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span><br><span class="line">    android:layout_width=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">    android:layout_height=<span class="string">&quot;match_parent&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &lt;LinearLayout</span><br><span class="line">        android:layout_width=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">        android:layout_height=<span class="string">&quot;wrap_content&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">        &lt;ImageView</span><br><span class="line">            android:id=<span class="string">&quot;@+id/imageview_item&quot;</span></span><br><span class="line">            android:layout_width=<span class="string">&quot;100dp&quot;</span></span><br><span class="line">            android:layout_height=<span class="string">&quot;100dp&quot;</span></span><br><span class="line">            android:scaleType=<span class="string">&quot;fitXY&quot;</span></span><br><span class="line">            android:padding=<span class="string">&quot;10dp&quot;</span></span><br><span class="line">            android:src=<span class="string">&quot;@mipmap/student&quot;</span>/&gt;</span><br><span class="line"></span><br><span class="line">        &lt;TextView</span><br><span class="line">            android:id=<span class="string">&quot;@+id/textview_item&quot;</span></span><br><span class="line">            android:layout_marginStart=<span class="string">&quot;20dp&quot;</span></span><br><span class="line">            android:layout_width=<span class="string">&quot;250dp&quot;</span></span><br><span class="line">            android:layout_height=<span class="string">&quot;100dp&quot;</span></span><br><span class="line">            android:textSize=<span class="string">&quot;20sp&quot;</span></span><br><span class="line">            android:textStyle=<span class="string">&quot;bold&quot;</span></span><br><span class="line">            android:gravity=<span class="string">&quot;center&quot;</span></span><br><span class="line">            android:padding=<span class="string">&quot;10dp&quot;</span></span><br><span class="line">            android:text=<span class="string">&quot;条目&quot;</span>/&gt;</span><br><span class="line"></span><br><span class="line">    &lt;/LinearLayout&gt;</span><br><span class="line"></span><br><span class="line">&lt;/RelativeLayout&gt;</span><br></pre></td></tr></table></figure>





<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">                </span><br><span class="line"><span class="comment">//接下来创建适配器</span></span><br><span class="line"><span class="comment">/*ecyclerView.Adapter要求有ViewHolder，这里一般用内部类RecyclerViewAdapter.ViewHolder</span></span><br><span class="line"><span class="comment">就是创建适配器名.ViewHolder的内部类，这里先一键创建ViewHolder再构造Adapter，然后都是一键自动构造就行*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RecyclerViewAdapter</span> <span class="keyword">extends</span> <span class="title class_">RecyclerView</span>.Adapter&lt;RecyclerViewAdapter.ViewHolder&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> List&lt;Item&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    * 从外部得到数据</span></span><br><span class="line"><span class="comment">    * */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">getData</span><span class="params">(List&lt;Item&gt; list)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.list = list;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * 这个方法是用来创建内部的Holder的，就是每个条目的View，每个条目长什么样</span></span><br><span class="line"><span class="comment">     * */</span></span><br><span class="line">    <span class="meta">@NonNull</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> ViewHolder <span class="title function_">onCreateViewHolder</span><span class="params">(<span class="meta">@NonNull</span> ViewGroup parent, <span class="type">int</span> viewType)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">ViewHolder</span> <span class="variable">viewHolder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ViewHolder</span>(View.inflate(parent.getContext(), R.layout.item, <span class="literal">null</span>));</span><br><span class="line">        <span class="keyword">return</span> viewHolder;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    * 这个方法是绑定内部Holder的，一般用来设置数据</span></span><br><span class="line"><span class="comment">    * */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onBindViewHolder</span><span class="params">(<span class="meta">@NonNull</span> ViewHolder holder, <span class="type">int</span> position)</span> &#123;</span><br><span class="line">        holder.mImageView.setImageResource(list.get(position).getImage());</span><br><span class="line">        holder.mTextView.setText(list.get(position).getMessage());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    * 这个方法是用类设置数据数量的</span></span><br><span class="line"><span class="comment">    * */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getItemCount</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (list!=<span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> list.size();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ViewHolder</span> <span class="keyword">extends</span> <span class="title class_">RecyclerView</span>.ViewHolder &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">private</span> ImageView mImageView;</span><br><span class="line">        <span class="keyword">private</span> TextView mTextView;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">ViewHolder</span><span class="params">(<span class="meta">@NonNull</span> View itemView)</span> &#123;</span><br><span class="line">            <span class="built_in">super</span>(itemView);</span><br><span class="line"></span><br><span class="line">            mImageView = itemView.findViewById(R.id.imageview_item);</span><br><span class="line">            mTextView = itemView.findViewById(R.id.textview_item);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;   </span><br></pre></td></tr></table></figure>





<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//之后要创建LayoutManager，Adapter并把数据关联起来</span></span><br><span class="line">        <span class="type">RecyclerView</span> <span class="variable">recyclerView</span> <span class="operator">=</span> findViewById(R.id.recyclerview);</span><br><span class="line">        <span class="type">LinearLayoutManager</span> <span class="variable">layoutManager</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">LinearLayoutManager</span>(<span class="built_in">this</span>);</span><br><span class="line">        recyclerView.setLayoutManager(layoutManager);</span><br><span class="line">        mAdapter = <span class="keyword">new</span> <span class="title class_">RecyclerViewAdapter</span>();</span><br><span class="line">        intiData();<span class="comment">//自己封装的准备和设置数据的方法</span></span><br><span class="line">        recyclerView.setAdapter(mAdapter);</span><br></pre></td></tr></table></figure>







<h4 id="DatePicker-时间选择器"><a href="#DatePicker-时间选择器" class="headerlink" title="DatePicker(时间选择器)"></a>DatePicker(时间选择器)</h4><table>
<thead>
<tr>
<th align="center">属性</th>
<th align="center">描述和使用</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><code>android:datePickerMode=&quot;&quot;</code></td>
<td align="center">时间选择器有<code>spinner</code>和<code>calendar</code>两种模式，这个属性是用来设置模式的，<code>spinner</code>是直接选择日期，没有日历，<code>calendar</code>是带日历模式</td>
</tr>
<tr>
<td align="center"><code>android:calendarViewShown=&quot;&quot;</code></td>
<td align="center">这个属性是设置日历是否可见的，有<code>true</code>和<code>false</code>可选，和模式一起设置成自己想要的，貌似有冲突</td>
</tr>
<tr>
<td align="center"><code>android:spinnersShown=&quot;&quot;</code></td>
<td align="center">这个属性是设置直接选择的框是否可见，有<code>true</code>和<code>false</code>可选，和模式一起设置成自己想要的，貌似有冲突</td>
</tr>
<tr>
<td align="center"><code>android:calendarTextColor=&quot;&quot;</code></td>
<td align="center">设置日历列表文字的颜色</td>
</tr>
<tr>
<td align="center"><code>android:dayOfWeekTextAppearance</code></td>
<td align="center">顶部星期几的文字颜色</td>
</tr>
<tr>
<td align="center"><code>android:endYear</code></td>
<td align="center">去年(内容)</td>
</tr>
<tr>
<td align="center"><code>android:firstDayOfWeek</code></td>
<td align="center">设置日历列表以星期几开头</td>
</tr>
<tr>
<td align="center"><code>android:headerBackground</code></td>
<td align="center">整个头部的背景颜色</td>
</tr>
<tr>
<td align="center"><code>android:headerDayOfMonthTextAppearance</code></td>
<td align="center">头部日期字体的颜色</td>
</tr>
<tr>
<td align="center"><code>android:headerMonthTextAppearance</code></td>
<td align="center">头部月份的字体颜色</td>
</tr>
<tr>
<td align="center"><code>android:headerYearTextAppearance</code></td>
<td align="center">头部年的字体颜色</td>
</tr>
<tr>
<td align="center"><code>android:maxDate</code></td>
<td align="center">最大日期显示在这个日历视图mm &#x2F; dd &#x2F; yyyy格式</td>
</tr>
<tr>
<td align="center"><code>android:minDate</code></td>
<td align="center">最小日期显示在这个日历视图mm &#x2F; dd &#x2F; yyyy格式</td>
</tr>
<tr>
<td align="center"><code>android:yearListItemTextAppearance</code></td>
<td align="center">列表的文本出现在列表中。</td>
</tr>
<tr>
<td align="center"><code>android:yearListSelectorColor</code></td>
<td align="center">年列表选择的颜色</td>
</tr>
</tbody></table>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span><br><span class="line">&lt;android.support.constraint.ConstraintLayout xmlns:android=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span><br><span class="line">    xmlns:app=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span><br><span class="line">    xmlns:tools=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span><br><span class="line">    android:layout_width=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">    android:layout_height=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">    tools:context=<span class="string">&quot;.MainActivity&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &lt;DatePicker</span><br><span class="line">        android:id=<span class="string">&quot;@+id/datePickerView&quot;</span></span><br><span class="line">        android:layout_width=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">        android:layout_height=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">        android:calendarViewShown=<span class="string">&quot;true&quot;</span></span><br><span class="line">        android:datePickerMode=<span class="string">&quot;calendar&quot;</span></span><br><span class="line">        android:layout_gravity=<span class="string">&quot;center_horizontal&quot;</span> /&gt;</span><br><span class="line"></span><br><span class="line">&lt;/android.support.constraint.ConstraintLayout&gt;</span><br></pre></td></tr></table></figure>



<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.user.datapicker;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.support.v7.app.AppCompatActivity;</span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> android.widget.DatePicker;</span><br><span class="line"><span class="keyword">import</span> android.widget.Toast;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Calendar;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainActivity</span> <span class="keyword">extends</span> <span class="title class_">AppCompatActivity</span> &#123;</span><br><span class="line">    DatePicker datePicker;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> year,mouth,day,hour,min;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line"></span><br><span class="line">        datePicker = (DatePicker)findViewById(R.id.datePickerView);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// get time,可以在oncreate方法中初始化完成成为全局变量再在监听方法里面使用，这个是Calender模式下使用方法</span></span><br><span class="line">        <span class="type">Calendar</span> <span class="variable">cal</span> <span class="operator">=</span> Calendar.getInstance();</span><br><span class="line">        year = cal.get(Calendar.YEAR);</span><br><span class="line">        mouth =  cal.get(Calendar.MONTH);</span><br><span class="line">        day = cal.get(Calendar.DAY_OF_MONTH);</span><br><span class="line">        hour = cal.get(Calendar.HOUR);</span><br><span class="line">        min = cal.get(Calendar.MINUTE);</span><br><span class="line"></span><br><span class="line">        datePicker.init(year, mouth, day, <span class="keyword">new</span> <span class="title class_">DatePicker</span>.OnDateChangedListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onDateChanged</span><span class="params">(DatePicker view, <span class="type">int</span> year, <span class="type">int</span> monthOfYear, <span class="type">int</span> dayOfMonth)</span> &#123;</span><br><span class="line">                MainActivity.<span class="built_in">this</span>.year = year;</span><br><span class="line">                MainActivity.<span class="built_in">this</span>.mouth = monthOfYear;</span><br><span class="line">                MainActivity.<span class="built_in">this</span>.day = dayOfMonth;</span><br><span class="line"></span><br><span class="line">                <span class="comment">//显示用户选择的日期</span></span><br><span class="line">                Toast.makeText(MainActivity.<span class="built_in">this</span>,year + <span class="string">&quot;年&quot;</span> + monthOfYear + <span class="string">&quot;月&quot;</span> + dayOfMonth + <span class="string">&quot;日&quot;</span>,Toast.LENGTH_LONG).show();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Spnner模式，用这个啊，监听蛇皮</span></span><br><span class="line">        <span class="type">DatePicker</span> <span class="variable">datePicker</span> <span class="operator">=</span> findViewById(R.id.date_picker);</span><br><span class="line">        year = datePicker.getYear();</span><br><span class="line">        month = datePicker.getMonth();</span><br><span class="line">        day = datePicker.getDayOfMonth();</span><br><span class="line">		</span><br><span class="line"></span><br><span class="line"><span class="type">StringBuffer</span> <span class="variable">date</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuffer</span>();</span><br><span class="line">            date.append(year);</span><br><span class="line">            date.append(<span class="string">&quot;年&quot;</span>);</span><br><span class="line">            date.append(month + <span class="number">1</span>);<span class="comment">//月份一开始从0开始，要加1</span></span><br><span class="line">            date.append(<span class="string">&quot;月&quot;</span>);</span><br><span class="line">            date.append(day);</span><br><span class="line">            date.append(<span class="string">&quot;日&quot;</span>);</span><br></pre></td></tr></table></figure>





<p>####ViewPager2(轮播图)</p>
<p>GitHub</p>
<p><code>https://github.com/zhpanvip/BannerViewPager/wiki/06.快速开始</code>&#x2F;&#x2F;轮播图</p>
<p><code>implementation &#39;com.github.zhpanvip:bannerviewpager:3.5.11</code>&#x2F;&#x2F;依赖不能按照作者那里写latestVersion，Item的布局必须是”match_parent，嵌套在ScrollView里面会变形</p>
<p><code>https://github.com/zhpanvip/viewpagerindicator</code>&#x2F;&#x2F;轮播图指示器</p>
<ul>
<li><strong>滑动视图或者滑动Fragment</strong></li>
<li><strong>放Fragment继承<code>FragmentStateAdapter</code>，放图片继承<code>RecyclerView.Adapter&lt;ViewHolder&gt;</code>，监听方法<code>registerOnPageChangeCallback</code></strong></li>
</ul>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/m0_61544080/article/details/120642180">(26条消息) 学不动也要学！ ViewPager2新特性_程序员巴士的博客-CSDN博客_viewpager2滑动监听</a></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//去掉边缘阴影，上下暂时没找到去掉的方法，可以把theme里面颜色换掉</span></span><br></pre></td></tr></table></figure>





<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//首先先导入ViewPager2的库</span></span><br><span class="line">implementation <span class="string">&quot;androidx.viewpager2:viewpager2:1.0.0&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    </span><br><span class="line"><span class="comment">/*ViewPager2只相当于一个容器，可以放View也可以放Fragment,要放置什么数据需要我们去设置，</span></span><br><span class="line"><span class="comment">这时候就需要我们去写一个Adapter适配器去设置要显示的内容*/</span></span><br><span class="line"><span class="comment">/*ViewPager2是根据RecyclerView改变过来的，这里继承的方法也跟RecyclerView的适配器创建方法类似，</span></span><br><span class="line"><span class="comment">* 这里需要传入一个&lt;&gt;范型，这里设置内部类去构建就可以，构建方法就是最后那个方法*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ViewPagerAdapter</span> <span class="keyword">extends</span> <span class="title class_">RecyclerView</span>.Adapter&lt;ViewPagerAdapter.ViewHolder&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> List&lt;Integer&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//在内部设置一个方法用来从Activity获取数据给Adapter，当然也可以直接在Adapter里面设置数据</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">getData</span><span class="params">(List&lt;Integer&gt; list)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.list = list;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//这个方法是用来获取一个View的，新建一个xml文件获取过来，这样子在下面的内部类ViewHolder就可以获取到View里面的控件</span></span><br><span class="line">    <span class="meta">@NonNull</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> ViewHolder <span class="title function_">onCreateViewHolder</span><span class="params">(<span class="meta">@NonNull</span> ViewGroup parent, <span class="type">int</span> viewType)</span> &#123;</span><br><span class="line">        <span class="type">ViewHolder</span> <span class="variable">viewHolder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ViewHolder</span>(LayoutInflater.from(parent.getContext()).inflate(R.layout.item_viewpager,parent,<span class="literal">false</span>));</span><br><span class="line">        <span class="keyword">return</span> viewHolder;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//这个方法是根据position设置view的，这里用position%list。size()实现循环</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onBindViewHolder</span><span class="params">(<span class="meta">@NonNull</span> ViewHolder holder, <span class="type">int</span> position)</span> &#123;</span><br><span class="line">        holder.mImageView.setImageResource(list.get(position%list.size()));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getItemCount</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (list!=<span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> Integer.MAX_VALUE;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ViewHolder</span> <span class="keyword">extends</span> <span class="title class_">RecyclerView</span>.ViewHolder &#123;</span><br><span class="line"></span><br><span class="line">        ImageView mImageView;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">ViewHolder</span><span class="params">(<span class="meta">@NonNull</span> View itemView)</span> &#123;</span><br><span class="line">            <span class="built_in">super</span>(itemView);</span><br><span class="line">            mImageView = itemView.findViewById(R.id.imageview);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;                 </span><br></pre></td></tr></table></figure>



<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//布局，其中的LinearLayout放置点的</span></span><br><span class="line">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span><br><span class="line">&lt;RelativeLayout xmlns:android=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span><br><span class="line">    xmlns:tools=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span><br><span class="line">    android:layout_width=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">    android:layout_height=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">    tools:context=<span class="string">&quot;.SecondActivity&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">    &lt;androidx.viewpager2.widget.ViewPager2</span><br><span class="line">        android:id=<span class="string">&quot;@+id/viewpager2&quot;</span></span><br><span class="line">        android:layout_width=<span class="string">&quot;300dp&quot;</span></span><br><span class="line">        android:layout_height=<span class="string">&quot;200dp&quot;</span></span><br><span class="line">        android:layout_centerInParent=<span class="string">&quot;true&quot;</span> /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;LinearLayout</span><br><span class="line">        android:id=<span class="string">&quot;@+id/linear&quot;</span></span><br><span class="line">        android:layout_width=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">        android:layout_height=<span class="string">&quot;40dp&quot;</span></span><br><span class="line">        android:layout_below=<span class="string">&quot;@id/viewpager2&quot;</span></span><br><span class="line">        android:layout_centerHorizontal=<span class="string">&quot;true&quot;</span></span><br><span class="line">        android:orientation=<span class="string">&quot;horizontal&quot;</span> /&gt;</span><br><span class="line"></span><br><span class="line">&lt;/RelativeLayout&gt;</span><br></pre></td></tr></table></figure>



<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Java文件</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SecondActivity</span> <span class="keyword">extends</span> <span class="title class_">AppCompatActivity</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Handler handler;</span><br><span class="line">    <span class="keyword">private</span> ViewPager2 mViewPager2;</span><br><span class="line">    <span class="keyword">private</span> Runnable mRunnable;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_second);</span><br><span class="line"></span><br><span class="line">        initView();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@SuppressLint(&quot;UseCompatLoadingForDrawables&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">initView</span><span class="params">()</span> &#123;</span><br><span class="line">        </span><br><span class="line">        <span class="type">LinearLayout</span> <span class="variable">linear</span> <span class="operator">=</span> findViewById(R.id.linear);</span><br><span class="line">        mViewPager2 = findViewById(R.id.viewpager2);</span><br><span class="line">        <span class="type">ViewPagerAdapter</span> <span class="variable">viewPagerAdapter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ViewPagerAdapter</span>();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//设置数据</span></span><br><span class="line">        List&lt;Integer&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        list.add(R.mipmap.pic1);</span><br><span class="line">        list.add(R.mipmap.pic2);</span><br><span class="line">        list.add(R.mipmap.pic3);</span><br><span class="line">        list.add(R.mipmap.pic4);</span><br><span class="line">        list.add(R.mipmap.pic5);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//根据图片个数设置点</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; list.size(); i++) &#123;</span><br><span class="line">            LinearLayout.<span class="type">LayoutParams</span> <span class="variable">layoutParams</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">LinearLayout</span>.LayoutParams(<span class="number">40</span>,<span class="number">40</span>);</span><br><span class="line">            <span class="type">View</span> <span class="variable">view</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">View</span>(<span class="built_in">this</span>);</span><br><span class="line">            view.setBackground(getDrawable(R.drawable.point_viewpager_normal));</span><br><span class="line">            view.setLayoutParams(layoutParams);</span><br><span class="line">            layoutParams.setMarginStart(<span class="number">20</span>);</span><br><span class="line">            linear.addView(view);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//给ViewPager2设置监听，可优化，自己优化吧</span></span><br><span class="line">        mViewPager2.registerOnPageChangeCallback(<span class="keyword">new</span> <span class="title class_">ViewPager2</span>.OnPageChangeCallback() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onPageScrolled</span><span class="params">(<span class="type">int</span> position, <span class="type">float</span> positionOffset, <span class="type">int</span> positionOffsetPixels)</span> &#123;</span><br><span class="line">                <span class="built_in">super</span>.onPageScrolled(position, positionOffset, positionOffsetPixels);</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; list.size(); i++) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (i==position%list.size())&#123;</span><br><span class="line">                        linear.getChildAt(i).setBackground(getDrawable(R.drawable.point_viewpager_checked));</span><br><span class="line">                    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                        linear.getChildAt(i).setBackground(getDrawable(R.drawable.point_viewpager_normal));</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//给适配器传数据</span></span><br><span class="line">        viewPagerAdapter.getData(list);</span><br><span class="line">        mViewPager2.setAdapter(viewPagerAdapter);</span><br><span class="line">        mViewPager2.setCurrentItem(<span class="number">200</span>,<span class="literal">false</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//设置不可人为滑动，这样子不用再去写人为滑动时停止轮播了</span></span><br><span class="line">        mViewPager2.setUserInputEnabled(<span class="literal">false</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//handler里面的Runable再执行一次Handler实现循环</span></span><br><span class="line">        handler = <span class="keyword">new</span> <span class="title class_">Handler</span>();</span><br><span class="line">        mRunnable = ()-&gt;&#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">current</span> <span class="operator">=</span> mViewPager2.getCurrentItem();</span><br><span class="line">            mViewPager2.setCurrentItem(++current);</span><br><span class="line"></span><br><span class="line">            handler.postDelayed(mRunnable,<span class="number">2000</span>);</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//界面显示开始轮播</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onAttachedToWindow</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onAttachedToWindow();</span><br><span class="line">        handler.postDelayed(mRunnable,<span class="number">1000</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//界面进入后台停止轮播</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onDetachedFromWindow</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onDetachedFromWindow();</span><br><span class="line">        handler.removeCallbacks(mRunnable);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;   </span><br></pre></td></tr></table></figure>





<h4 id="TabLayout"><a href="#TabLayout" class="headerlink" title="TabLayout"></a>TabLayout</h4><table>
<thead>
<tr>
<th align="center">属性</th>
<th align="center">用法</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><code>app:tabMode=&quot;scrollable&quot;</code></td>
<td align="center">**<code>fixed</code><strong>固定的，也就是标题不可滑动，无论放了多少个都平分界面长度,</strong><code> scrollable</code><strong>可滑动的，小于等于5个默认靠左固定，大于5个就可以滑动了，</strong><code>auto</code>**自动选择是否可以滑动，小于等于5个默认居中，大于5个自动滑动</td>
</tr>
<tr>
<td align="center"><code>app:tabGravity</code></td>
<td align="center">**<code>start</code><strong>居左，</strong><code>fill</code><strong>平均分配，铺满屏幕宽度</strong><code>center</code>**居中，默认fill，tab填满TabLayout,但<code>tabMode=“fixed”</code>才生效</td>
</tr>
<tr>
<td align="center"><code>&lt;attr name=&quot;tabTextColor&quot; format=&quot;color&quot;/&gt;</code></td>
<td align="center">Tab未选中字体颜色</td>
</tr>
<tr>
<td align="center"><code>&lt;attr name=&quot;tabSelectedTextColor&quot; format=&quot;color&quot;/&gt;</code></td>
<td align="center">Tab选中字体颜色</td>
</tr>
<tr>
<td align="center"><code>&lt;attr name=&quot;tabMinWidth&quot; format=&quot;dimension&quot;/&gt;</code></td>
<td align="center">Tab最小宽度</td>
</tr>
<tr>
<td align="center"><code>attr name=&quot;tabIndicatorColor&quot; format=&quot;color&quot;</code></td>
<td align="center">指示器颜色</td>
</tr>
<tr>
<td align="center"><code>attr name=&quot;tabIndicatorHeight&quot; format=&quot;dimension&quot;</code></td>
<td align="center">指示器高度</td>
</tr>
<tr>
<td align="center"><code>attr name=&quot;tabIndicatorFullWidth&quot; format=&quot;boolean&quot;</code></td>
<td align="center">指示器宽度 true:和tab同宽  false：和tab中的字同宽</td>
</tr>
<tr>
<td align="center"><code>attr name=&quot;tabBackground&quot; format=&quot;reference&quot;</code></td>
<td align="center">仅是Tab背景，设置TabLayout背景用<code>android:background</code></td>
</tr>
<tr>
<td align="center"><code>attr name=&quot;tabContentStart&quot; format=&quot;dimension&quot;</code></td>
<td align="center">tabs距TabLayout开始位置的偏移量，但<code>app:tabMode=&quot;scrollable&quot;</code>才生效</td>
</tr>
</tbody></table>
<p>Java中添加Tab  <code>TabLayout.addTab(TabLayout.newTab().setText(&quot;222&quot;));</code>，注意<code>addTab</code>里面传的参数是<code>控件名.newTab()</code></p>
<p>Java中设置某个被选中，其他会自动不被选中，代码为<code>TabLayout.getTabAt(1).select();</code></p>
<h4 id="ProgressBar"><a href="#ProgressBar" class="headerlink" title="ProgressBar"></a>ProgressBar</h4><p>进度条</p>
<h4 id="Spinner（下拉选择框，Android微调器）"><a href="#Spinner（下拉选择框，Android微调器）" class="headerlink" title="Spinner（下拉选择框，Android微调器）"></a>Spinner（下拉选择框，Android微调器）</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//标签</span></span><br><span class="line">&lt;Spinner</span><br><span class="line"><span class="comment">//下面这个androidx兼容</span></span><br><span class="line">&lt;androidx.appcompat.widget.AppCompatSpinner</span><br><span class="line">    </span><br><span class="line"><span class="comment">//使用开源库实现更多功能</span></span><br><span class="line">dependencyResolutionManagement &#123;</span><br><span class="line">    repositoriesMode.set(RepositoriesMode.FAIL_ON_PROJECT_REPOS)</span><br><span class="line">    repositories &#123;</span><br><span class="line">        google()</span><br><span class="line">        mavenCentral()</span><br><span class="line">        maven &#123; url <span class="string">&quot;https://jitpack.io&quot;</span> &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;<span class="comment">//在gradle设置中下面那部分去加，不行把mavenCentral()这个删掉然后同步完再加回来</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*arrowTint设置下拉箭头上的颜色</span></span><br><span class="line"><span class="comment">hideArrow设置是显示还是隐藏下拉箭头</span></span><br><span class="line"><span class="comment">arrowDrawable设置下拉箭头的可绘制对象</span></span><br><span class="line"><span class="comment">textTint设置文本颜色</span></span><br><span class="line"><span class="comment">dropDownListPaddingBottom设置下拉列表的底部填充</span></span><br><span class="line"><span class="comment">backgroundSelector设置下拉列表行的背景选择器</span></span><br><span class="line"><span class="comment">popupTextAlignment设置默认弹出文本的水平对齐方式</span></span><br><span class="line"><span class="comment">entries从字符串数组设置数据源*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//绑定数据方法</span></span><br><span class="line"><span class="type">NiceSpinner</span> <span class="variable">niceSpinner</span> <span class="operator">=</span> (NiceSpinner) findViewById(R.id.nice_spinner);</span><br><span class="line"> List&lt;String&gt; dataset = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;(Arrays.asList(<span class="string">&quot;One&quot;</span>, <span class="string">&quot;Two&quot;</span>, <span class="string">&quot;Three&quot;</span>, <span class="string">&quot;Four&quot;</span>, <span class="string">&quot;Five&quot;</span>));</span><br><span class="line"> niceSpinner.attachDataSource(dataset);</span><br><span class="line"></span><br><span class="line"><span class="comment">//监听</span></span><br><span class="line">spinner.setOnSpinnerItemSelectedListener(<span class="keyword">new</span> <span class="title class_">OnSpinnerItemSelectedListener</span>() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onItemSelected</span><span class="params">(NiceSpinner parent, View view, <span class="type">int</span> position, <span class="type">long</span> id)</span> &#123;</span><br><span class="line">        <span class="comment">// This example uses String, but your type can be any</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">item</span> <span class="operator">=</span> parent.getItemAtPosition(position);</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><strong>三种使用方式</strong></p>
<p><em>第一种：</em></p>
<p>数据固定的，通过 <code>android:entries</code> 属性引数组来进行填充，在 <code>values</code> 下建一个 <code>arrays.xml</code> ,在这里面填充，或者直接在values包下<code>strings.xml</code>的resources标签下添加,实例在下面代码框</p>
<p><code>android:spinnerMode=”dialog”</code>表示<code>Spinner</code>的样式是<code>dialog</code>，<code>android:prompt</code>可以设置dialog的标题(注意必须在string资源下引用，不然程序会崩掉</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;string-array name=<span class="string">&quot;city_name&quot;</span>&gt;</span><br><span class="line">        &lt;item&gt;湛江&lt;/item&gt;</span><br><span class="line">        &lt;item&gt;北京&lt;/item&gt;</span><br><span class="line">&lt;/string-array&gt;</span><br></pre></td></tr></table></figure>

<p><em>第二种：</em></p>
<p>通过适配器来填充参数，继承<code>BaseAdapter</code></p>
<p><a target="_blank" rel="noopener" href="https://www.jb51.net/article/219855.htm">Android之Spinner用法详解_Android_脚本之家 (jb51.net)</a></p>
<p><em>第三种：</em></p>
<p>实现<code>SpinnerAdaper</code>接口，其实跟继承<code>BaseAdapter</code>差不多</p>
<p><strong>设置样式</strong></p>
<p>在<code>values</code>包下新建<code>style.xml</code>用来专门保存样式，按钮什么的样式也可以集中放到这里来</p>
<p>不知道什么原因，自带spinner生效不了，nice—spinner可以生效</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">    &lt;style name=<span class="string">&quot;CitySpinnerStyle&quot;</span>&gt;</span><br><span class="line">        &lt;item name=<span class="string">&quot;android:divider&quot;</span>&gt;#A9A9A9&lt;/item&gt;<span class="comment">//下划线</span></span><br><span class="line">        &lt;item name=<span class="string">&quot;android:dividerHeight&quot;</span>&gt;2dp&lt;/item&gt;<span class="comment">//下划线宽度</span></span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">        </span><br><span class="line"><span class="comment">//android:theme=&quot;@style/CitySpinnerStyle&quot;在xml进行设置</span></span><br></pre></td></tr></table></figure>





<h4 id="NestedScrollView和ScrollView"><a href="#NestedScrollView和ScrollView" class="headerlink" title="NestedScrollView和ScrollView"></a>NestedScrollView和ScrollView</h4><p>NestedScrollView能够判断滚动视图完成哪个，滑动顺畅，使用这个即可</p>
<h3 id="Activity相关"><a href="#Activity相关" class="headerlink" title="Activity相关"></a>Activity相关</h3><p><strong><code>android:exported = true</code></strong>  </p>
<p>true表示可以被其他Activity启动</p>
<h4 id="生命周期相关"><a href="#生命周期相关" class="headerlink" title="生命周期相关"></a>生命周期相关</h4><p><img src="https://img-blog.csdnimg.cn/20190519191255469.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI5OTY2MjAz,size_16,color_FFFFFF,t_70"></p>
<p>1）横竖屏切换对Activiy生命周期影响<br>横竖屏切换涉及到的是Activity的android:configChanges属性：<br>android:configChanges可以设置的属性值有：<br>orientation：消除横竖屏的影响<br>keyboardHidden：消除键盘的影响<br>screenSize：消除屏幕大小的影响<br>【情况1】<br>1、android:configChanges&#x3D;orientation<br>2、android:configChanges&#x3D;orientation|keyboardHidden<br>3、不设置android:configChanges<br>横竖屏切换Activity生命周期变化：<br>onPause–&gt;onSaveInstanceState–&gt;onStop–&gt;onDestroy–&gt;onCreate–&gt;onStart–&gt;onRestoreInstanceState–&gt;onResume<br>在进行横竖屏切换的时候在调用onStop之前会调用onSaveInstanceState来进行Activity的状态保存，随后在重新显示该Activity的onResume方法之前会调用onRestoreInstanceState来恢复之前由onSaveInstanceState保存的Activity信息<br>【情况2】<br>1、android:configChanges&#x3D;orientation|screenSize<br>2、android:configChanges&#x3D;orientation|screenSize|keyboardHidden<br>横竖屏切换不会重新加载Activity的各个生命周期，<strong>一定要同时出现orientation和screenSize</strong><br>【情况3】<br>屏蔽横竖屏切换操作，不会出现切换的过程中Activity生命周期重新加载的情况<br>方法1：清单文件<br>android:screenOrientation&#x3D;“portrait” 始终以竖屏显示<br>android:screenOrientation&#x3D;“landscape” 始终以横屏显示<br>方法2：动态Activity<br>Activity.this.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);以竖屏显示<br>Activity.this.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);以横屏显示</p>
<h4 id="跳转传值"><a href="#跳转传值" class="headerlink" title="跳转传值"></a>跳转传值</h4><ol>
<li>普通跳转和跳转网页</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//在内部方法中才需要Activity.this,不然.this就好</span></span><br><span class="line"><span class="comment">//直接在onCreate方法中写</span></span><br><span class="line"><span class="comment">//显性跳转自己这个App界面</span></span><br><span class="line"><span class="type">Intent</span> <span class="variable">intent</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(<span class="built_in">this</span>,MainActivity2.class);</span><br><span class="line">startActivity(intent);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//跳转网页或者其他APP界面（隐式跳转）</span></span><br><span class="line"><span class="comment">//再Manifest文件中设置</span></span><br><span class="line"><span class="type">Intent</span> <span class="variable">intent</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>();</span><br><span class="line">intent.setAction();<span class="comment">//隐性跳转必须有这个</span></span><br><span class="line">intent.addCategory();<span class="comment">/*隐性跳转可以不设置这个，系统会使用默认值，所以要使匹配一样就必须在Manifest文件中设置这个属性为默认或者你想要的值*/</span></span><br><span class="line">intent.setData();<span class="comment">/*跳转网页用这个，并设置setAction为Intent.ACTION_VIEW，intent.setData(Uri.parse(&quot;https://www.baidu.com&quot;));*/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//Manifest设置属性，下面这个复制在哪个Activity，哪个就作为先启动的，属性也在这个属性里面设置</span></span><br><span class="line">            &lt;intent-filter&gt;</span><br><span class="line">                &lt;action android:name=<span class="string">&quot;android.intent.action.MAIN&quot;</span> /&gt;</span><br><span class="line"></span><br><span class="line">                &lt;category android:name=<span class="string">&quot;android.intent.category.LAUNCHER&quot;</span> /&gt;</span><br><span class="line">            &lt;/intent-filter&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>





<ol start="2">
<li>带值传递不需要处理返回值</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//传值</span></span><br><span class="line"><span class="type">Intent</span> <span class="variable">intent</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(<span class="built_in">this</span>,MainActivity2.class);</span><br><span class="line"><span class="type">Bundle</span> <span class="variable">bundle</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Bundle</span>();</span><br><span class="line">bundle.putInt(<span class="string">&quot;result&quot;</span>,<span class="number">1</span>);</span><br><span class="line">intent.putExtras(bundle);</span><br><span class="line">startActivity(intent);</span><br><span class="line"></span><br><span class="line"><span class="comment">//接收值</span></span><br><span class="line"><span class="type">Intent</span> <span class="variable">intent</span> <span class="operator">=</span> getIntent();</span><br><span class="line"><span class="type">Bundle</span> <span class="variable">bundle</span> <span class="operator">=</span> intent.getExtras();</span><br><span class="line"><span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> bundle.getInt(<span class="string">&quot;result&quot;</span>);</span><br></pre></td></tr></table></figure>



<p><em><strong>Bundle相关</strong></em></p>
<p>Bundle在Android开发中非常常见，它的作用主要时用于传递数据。Bundle传递的数据包括：string、int、boolean、byte、float、long、double等基本类型或它们对应的数组，也可以是对象或对象数组。当Bundle传递的是对象或对象数组时，必须实现Serialiable或Parcelable接口。<br>Bundle所保存的数据是以key-value(键值对)的形式保存在ArrayMap中，处理少量简单数据比hashmap快，处理大量数据用hashmap</p>
<p>Bundle使用场景<br>Activity之onSaveInstanceState<br>Activity状态数据的保存与恢复，涉及到两个回调：<br>①void onSaveInstanceState(Bundle outState)；② void onCreate(Bundle savedInstanceState)；<br>参考：Android系统之onSaveInstanceState用法及源码分析</p>
<p>Fragment之setArguments<br>Fragment的setArguments方法：void setArgument(Bundle args)；<br>参考：Android系统之Fragment用法</p>
<p>Handle之setData<br>消息机制中的Message的setData方法：void setData(Bundle data)。<br>参考：Android系统线程间通信方式之Handler机制</p>
<ol start="3">
<li>带值传递且需要处理返回值（登陆界面跳转注册界面注册成功带账号密码返回登陆界面）</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*startActivityForResult方法弃用了，用registerForActivityResult方法，这个方法只能在oncreate方法中先构造，不能在onstart方法后再构造，也不能在注册监听事件的onclick方法中构造*/</span></span><br><span class="line"><span class="keyword">private</span> ActivityResultLauncher&lt;Intent&gt; intentActivityResultLauncher;</span><br><span class="line"></span><br><span class="line"><span class="comment">//以下可以写在一个内部方法中，然后在oncreate方法中调用内部方法,如果跳转活动有传值，那么在返回这个活动时会调用</span></span><br><span class="line">        intentActivityResultLauncher = registerForActivityResult(<span class="keyword">new</span> <span class="title class_">ActivityResultContracts</span>.StartActivityForResult(), result1 -&gt; &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">code</span> <span class="operator">=</span> result1.getResultCode();</span><br><span class="line">            <span class="type">Intent</span> <span class="variable">data</span> <span class="operator">=</span> result1.getData();</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//然后在监听事件中调用全局变量跳转。launch方法</span></span><br><span class="line"><span class="type">Bundle</span> <span class="variable">bundle</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Bundle</span>();</span><br><span class="line">bundle.putInt(<span class="string">&quot;result&quot;</span>, result);</span><br><span class="line"><span class="type">Intent</span> <span class="variable">intent</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(LoginActivity.<span class="built_in">this</span>, RegisterActivity.class);</span><br><span class="line">intent.putExtras(bundle);</span><br><span class="line">intentActivityResultLauncher.launch(intent);</span><br><span class="line"></span><br><span class="line"><span class="comment">//在跳转的活动中，用setResult方法回传数据和结果码</span></span><br><span class="line"><span class="type">Intent</span> <span class="variable">intent</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>();</span><br><span class="line"><span class="type">Bundle</span> <span class="variable">bundle</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Bundle</span>();</span><br><span class="line">bundle.putString(<span class="string">&quot;username&quot;</span>,username);</span><br><span class="line">bundle.putString(<span class="string">&quot;password&quot;</span>,password);</span><br><span class="line">intent.putExtras(bundle);</span><br><span class="line">setResult(<span class="number">88</span>,intent);</span><br><span class="line">finish();<span class="comment">//最后完成所有操作关闭这个界面（如网络请求登陆成功后）</span></span><br></pre></td></tr></table></figure>



<p><strong>传递对象</strong></p>
<p><strong>Serializable进行对象序列化，这种序列化是通过反射机制从而削弱了性能，这种机制创建了大量的临时对象从而会引起GC频繁回收调用资源</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//发送数据				</span></span><br><span class="line">				<span class="type">Person</span> <span class="variable">person</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person</span>();</span><br><span class="line">                person.setName(<span class="string">&quot;chenjy&quot;</span>);</span><br><span class="line">                person.setAge(<span class="number">18</span>);</span><br><span class="line"></span><br><span class="line">                <span class="type">Bundle</span> <span class="variable">bundle</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Bundle</span>();</span><br><span class="line">                bundle.putSerializable(<span class="string">&quot;person&quot;</span>,person);</span><br><span class="line"></span><br><span class="line">                <span class="type">Intent</span> <span class="variable">intent</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(MainActivity.<span class="built_in">this</span>, SecondActivity.class);</span><br><span class="line">                intent.putExtras(bundle);</span><br><span class="line">                startActivity(intent);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//获取数据</span></span><br><span class="line"><span class="type">Person</span> <span class="variable">person</span> <span class="operator">=</span> (Person)getIntent().getSerializableExtra(<span class="string">&quot;person&quot;</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p><strong>Parcelable是由Android提供的序列化接口,google做了大量的优化</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Person</span> <span class="keyword">implements</span> <span class="title class_">Parcelable</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Person</span><span class="params">()</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="title function_">Person</span><span class="params">(Parcel in)</span> &#123;</span><br><span class="line">        name = in.readString();</span><br><span class="line">        age = in.readInt();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(<span class="type">int</span> age)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Creator&lt;Person&gt; CREATOR = <span class="keyword">new</span> <span class="title class_">Creator</span>&lt;Person&gt;() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> Person <span class="title function_">createFromParcel</span><span class="params">(Parcel in)</span> &#123;</span><br><span class="line">            <span class="type">Person</span> <span class="variable">person</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person</span>();</span><br><span class="line">            person.name = in.readString();</span><br><span class="line">            person.age = in.readInt();</span><br><span class="line">            <span class="keyword">return</span> person;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> Person[] newArray(<span class="type">int</span> size) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Person</span>[size];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">describeContents</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">writeToParcel</span><span class="params">(Parcel dest, <span class="type">int</span> flags)</span> &#123;</span><br><span class="line">     dest.writeString(name);</span><br><span class="line">     dest.writeInt(age);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p><strong>传输数据量较大的时候Parcelable会出现异常TransactionTooLargeException。只时候就需要用到插件EventBus。</strong></p>
<p>EventBus 使用的是发布 订阅者模型,发布者通过EventBus发布事件，订阅者通过EventBus订阅事件。当发布者发布事件时，订阅该事件的订阅者的事件处理方法将被调用。（后续使用到再看）</p>
<h3 id="Fragment相关"><a href="#Fragment相关" class="headerlink" title="Fragment相关"></a>Fragment相关</h3><p>view.findViewById()</p>
<p>####Fragment和其他控件一起使用实现滑动点击切换</p>
<p><strong>构造Fragment实例</strong></p>
<p>构造Fragment实例的时候可以直接new出来，也可以用生成Fragment自带的<code>newInstance()</code>方法，这个方法还可以传值，传的值可以直接在Fragment操作</p>
<p><strong>FragmentContainerView控件绑定Fragment和普通按钮布局实现点击切换</strong></p>
<p>点击改变颜色和放置不同图片什么都没什么，主要是怎么切换fragment，切换fragment就只要在点击按钮时改变传入的Fragment实例化对象即可</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//获取FragmentManager</span></span><br><span class="line"><span class="type">FragmentManager</span> <span class="variable">fragmentManager</span> <span class="operator">=</span> getSupportFragmentManager();</span><br><span class="line"><span class="comment">//这个方法构造Fragment可以传值</span></span><br><span class="line"><span class="type">FirstFragment</span> <span class="variable">fragment</span> <span class="operator">=</span> FirstFragment.newInstance(<span class="string">&quot;这是首页&quot;</span>,<span class="string">&quot;&quot;</span>);</span><br><span class="line"><span class="comment">//添加Fragment到FragmentManager</span></span><br><span class="line"><span class="type">FragmentTransaction</span> <span class="variable">fragmentTransaction</span> <span class="operator">=</span> fragmentManager.beginTransaction();</span><br><span class="line">fragmentTransaction.replace(R.id.fragment_container,fragment).commit();</span><br><span class="line"><span class="comment">//第一个参数传要绑定到这个Activity界面的FragmentContainerView控件的id，第二个参数传Fragment实例</span></span><br></pre></td></tr></table></figure>



<p><strong>Fragment和ViewPager2实现滑动切换效果，把Fragment换为颜色去掉底部按键就是滑动</strong></p>
<p><strong>设置可滑动就是微信那种，不可滑动就是QQ那种，注意手势冲突</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Java</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ThirdActivity</span> <span class="keyword">extends</span> <span class="title class_">AppCompatActivity</span> <span class="keyword">implements</span> <span class="title class_">RadioGroup</span>.OnCheckedChangeListener &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> ViewPager2 mViewPager2;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_third);</span><br><span class="line"></span><br><span class="line">        initView();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">initView</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">RadioButton</span> <span class="variable">btn1</span> <span class="operator">=</span> findViewById(R.id.btn1);</span><br><span class="line">        <span class="type">RadioButton</span> <span class="variable">btn2</span> <span class="operator">=</span> findViewById(R.id.btn2);</span><br><span class="line">        <span class="type">RadioButton</span> <span class="variable">btn3</span> <span class="operator">=</span> findViewById(R.id.btn3);</span><br><span class="line">        <span class="type">RadioGroup</span> <span class="variable">radioGroup</span> <span class="operator">=</span> findViewById(R.id.radio_group);</span><br><span class="line">        radioGroup.setOnCheckedChangeListener(<span class="built_in">this</span>);</span><br><span class="line">        mViewPager2 = findViewById(R.id.viewpager2);</span><br><span class="line">        <span class="type">ViewPagerTopAdapter</span> <span class="variable">viewPagerTopAdapter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ViewPagerTopAdapter</span>(<span class="built_in">this</span>);</span><br><span class="line">        viewPagerTopAdapter.getFragment(<span class="keyword">new</span> <span class="title class_">FirstFragment</span>());</span><br><span class="line">        viewPagerTopAdapter.getFragment(<span class="keyword">new</span> <span class="title class_">SecondFragment</span>());</span><br><span class="line">        viewPagerTopAdapter.getFragment(<span class="keyword">new</span> <span class="title class_">ThirdFragment</span>());</span><br><span class="line">        mViewPager2.setAdapter(viewPagerTopAdapter);</span><br><span class="line">        mViewPager2.setCurrentItem(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">/*如果设置不可滑动就不需要监听ViewPager2了</span></span><br><span class="line"><span class="comment">                mViewPager2.setUserInputEnabled(false);*/</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">//监听滑动为第几项设置哪个按钮被选中</span></span><br><span class="line">        mViewPager2.registerOnPageChangeCallback(<span class="keyword">new</span> <span class="title class_">ViewPager2</span>.OnPageChangeCallback() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onPageSelected</span><span class="params">(<span class="type">int</span> position)</span> &#123;</span><br><span class="line">                <span class="built_in">super</span>.onPageSelected(position);</span><br><span class="line">                <span class="keyword">switch</span> (position)&#123;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">                        btn1.setChecked(<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">                        btn2.setChecked(<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">                        btn3.setChecked(<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//监听按钮选择而设置Fragment</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onCheckedChanged</span><span class="params">(RadioGroup radioGroup, <span class="type">int</span> i)</span> &#123;</span><br><span class="line">        <span class="keyword">switch</span> (i)&#123;</span><br><span class="line">            <span class="keyword">case</span> R.id.btn1:</span><br><span class="line">               mViewPager2.setCurrentItem(<span class="number">0</span>);</span><br><span class="line">               <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> R.id.btn2:</span><br><span class="line">                mViewPager2.setCurrentItem(<span class="number">1</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> R.id.btn3:</span><br><span class="line">                mViewPager2.setCurrentItem(<span class="number">2</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//xml布局</span></span><br><span class="line">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span><br><span class="line">&lt;LinearLayout xmlns:android=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span><br><span class="line">    xmlns:tools=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span><br><span class="line">    android:layout_width=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">    android:layout_height=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">    android:orientation=<span class="string">&quot;vertical&quot;</span></span><br><span class="line">    tools:context=<span class="string">&quot;.ThirdActivity&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">    &lt;androidx.viewpager2.widget.ViewPager2</span><br><span class="line">        android:id=<span class="string">&quot;@+id/viewpager2&quot;</span></span><br><span class="line">        android:layout_width=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">        android:layout_height=<span class="string">&quot;0dp&quot;</span></span><br><span class="line">        android:layout_weight=<span class="string">&quot;1&quot;</span> /&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &lt;View</span><br><span class="line">        android:layout_width=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">        android:layout_height=<span class="string">&quot;2dp&quot;</span></span><br><span class="line">        android:background=<span class="string">&quot;@color/gray_dark&quot;</span> /&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &lt;RadioGroup</span><br><span class="line">        android:id=<span class="string">&quot;@+id/radio_group&quot;</span></span><br><span class="line">        android:layout_width=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">        android:layout_height=<span class="string">&quot;80dp&quot;</span></span><br><span class="line">        android:layout_alignParentBottom=<span class="string">&quot;true&quot;</span></span><br><span class="line">        android:orientation=<span class="string">&quot;horizontal&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">        &lt;RadioButton</span><br><span class="line">            android:id=<span class="string">&quot;@+id/btn1&quot;</span></span><br><span class="line">            android:layout_width=<span class="string">&quot;0dp&quot;</span></span><br><span class="line">            android:layout_height=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">            android:layout_weight=<span class="string">&quot;1&quot;</span></span><br><span class="line">            android:button=<span class="string">&quot;@null&quot;</span></span><br><span class="line">            android:checked=<span class="string">&quot;true&quot;</span></span><br><span class="line">            android:drawableTop=<span class="string">&quot;@drawable/btn1_background&quot;</span></span><br><span class="line">            android:gravity=<span class="string">&quot;center&quot;</span></span><br><span class="line">            android:text=<span class="string">&quot;首页&quot;</span></span><br><span class="line">            android:textColor=<span class="string">&quot;@drawable/change_radio_button&quot;</span> /&gt;</span><br><span class="line"></span><br><span class="line">        &lt;RadioButton</span><br><span class="line">            android:id=<span class="string">&quot;@+id/btn2&quot;</span></span><br><span class="line">            android:layout_width=<span class="string">&quot;0dp&quot;</span></span><br><span class="line">            android:layout_height=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">            android:layout_weight=<span class="string">&quot;1&quot;</span></span><br><span class="line">            android:button=<span class="string">&quot;@null&quot;</span></span><br><span class="line">            android:drawableTop=<span class="string">&quot;@drawable/btn2_background&quot;</span></span><br><span class="line">            android:gravity=<span class="string">&quot;center&quot;</span></span><br><span class="line">            android:text=<span class="string">&quot;联系人&quot;</span></span><br><span class="line">            android:textColor=<span class="string">&quot;@drawable/change_radio_button&quot;</span> /&gt;</span><br><span class="line"></span><br><span class="line">        &lt;RadioButton</span><br><span class="line">            android:id=<span class="string">&quot;@+id/btn3&quot;</span></span><br><span class="line">            android:layout_width=<span class="string">&quot;0dp&quot;</span></span><br><span class="line">            android:layout_height=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">            android:layout_weight=<span class="string">&quot;1&quot;</span></span><br><span class="line">            android:button=<span class="string">&quot;@null&quot;</span></span><br><span class="line">            android:drawableTop=<span class="string">&quot;@drawable/btn3_background&quot;</span></span><br><span class="line">            android:gravity=<span class="string">&quot;center&quot;</span></span><br><span class="line">            android:text=<span class="string">&quot;设置&quot;</span></span><br><span class="line">            android:textColor=<span class="string">&quot;@drawable/change_radio_button&quot;</span> /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;/RadioGroup&gt;</span><br><span class="line"></span><br><span class="line">&lt;/LinearLayout&gt;</span><br></pre></td></tr></table></figure>



 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Adapter适配器</span></span><br><span class="line"><span class="comment">//放Fragment继承FragmentStateAdapter</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ViewPagerTopAdapter</span> <span class="keyword">extends</span> <span class="title class_">FragmentStateAdapter</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//先记住这种用法吧,先把Fragmen的类获取过来，后面直接newInstance返回出去</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;Class&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">getFragment</span><span class="params">(Fragment fragment)</span>&#123;</span><br><span class="line">            list.add(fragment.getClass());</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ViewPagerTopAdapter</span><span class="params">(<span class="meta">@NonNull</span> FragmentActivity fragmentActivity)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(fragmentActivity);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@NonNull</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Fragment <span class="title function_">createFragment</span><span class="params">(<span class="type">int</span> position)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> (Fragment) list.get(position).newInstance();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IllegalAccessException | InstantiationException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getItemCount</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> list.size();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<p><strong>TabLayout+ViewPager2</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//java</span></span><br><span class="line"><span class="keyword">package</span> com.example.fragmentstudy;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.annotation.NonNull;</span><br><span class="line"><span class="keyword">import</span> androidx.annotation.Nullable;</span><br><span class="line"><span class="keyword">import</span> androidx.fragment.app.Fragment;</span><br><span class="line"><span class="keyword">import</span> androidx.viewpager2.widget.ViewPager2;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.text.style.AlignmentSpan;</span><br><span class="line"><span class="keyword">import</span> android.view.LayoutInflater;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"><span class="keyword">import</span> android.view.ViewGroup;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.example.fragmentstudy.Adapter.ViewPagerTopAdapter;</span><br><span class="line"><span class="keyword">import</span> com.example.fragmentstudy.Fragment.BlankFragment1;</span><br><span class="line"><span class="keyword">import</span> com.example.fragmentstudy.Fragment.BlankFragment2;</span><br><span class="line"><span class="keyword">import</span> com.example.fragmentstudy.Fragment.BlankFragment3;</span><br><span class="line"><span class="keyword">import</span> com.google.android.material.tabs.TabLayout;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Objects;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HomeFragment</span> <span class="keyword">extends</span> <span class="title class_">Fragment</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> ViewPager2 mViewPager2;</span><br><span class="line">    <span class="keyword">private</span> TabLayout mTabLayout;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">HomeFragment</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// Required empty public constructor</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> HomeFragment <span class="title function_">newInstance</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">HomeFragment</span> <span class="variable">fragment</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HomeFragment</span>();</span><br><span class="line">        <span class="type">Bundle</span> <span class="variable">args</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Bundle</span>();</span><br><span class="line">        fragment.setArguments(args);</span><br><span class="line">        <span class="keyword">return</span> fragment;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> View <span class="title function_">onCreateView</span><span class="params">(LayoutInflater inflater, ViewGroup container,</span></span><br><span class="line"><span class="params">                             Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> inflater.inflate(R.layout.fragment_home, container, <span class="literal">false</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onViewCreated</span><span class="params">(<span class="meta">@NonNull</span> View view, <span class="meta">@Nullable</span> Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onViewCreated(view, savedInstanceState);</span><br><span class="line">        mViewPager2 = view.findViewById(R.id.viewpager2);</span><br><span class="line">        mTabLayout = view.findViewById(R.id.tab_layout);</span><br><span class="line">        initTab();</span><br><span class="line">        initData();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">initData</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//传参在Activity直接this，在Fragment中this.requireActivity()</span></span><br><span class="line">        <span class="type">ViewPagerTopAdapter</span> <span class="variable">viewPagerTopAdapter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ViewPagerTopAdapter</span>(<span class="built_in">this</span>.requireActivity());</span><br><span class="line">        viewPagerTopAdapter.getFragment(<span class="keyword">new</span> <span class="title class_">BlankFragment1</span>());</span><br><span class="line">        viewPagerTopAdapter.getFragment(<span class="keyword">new</span> <span class="title class_">BlankFragment2</span>());</span><br><span class="line">        viewPagerTopAdapter.getFragment(<span class="keyword">new</span> <span class="title class_">BlankFragment3</span>());</span><br><span class="line">        mViewPager2.setAdapter(viewPagerTopAdapter);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//监听ViewPager2，设置Tab选中</span></span><br><span class="line">        mViewPager2.registerOnPageChangeCallback(<span class="keyword">new</span> <span class="title class_">ViewPager2</span>.OnPageChangeCallback() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onPageSelected</span><span class="params">(<span class="type">int</span> position)</span> &#123;</span><br><span class="line">                <span class="built_in">super</span>.onPageSelected(position);</span><br><span class="line">                mTabLayout.getTabAt(position).select();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//设置TabLayout的Tab</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">initTab</span><span class="params">()</span> &#123;</span><br><span class="line">        String[] name = &#123;<span class="string">&quot;汽车&quot;</span>, <span class="string">&quot;美食&quot;</span>, <span class="string">&quot;趣闻&quot;</span>&#125;;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">3</span>; i++) &#123;</span><br><span class="line">            mTabLayout.addTab(mTabLayout.newTab().setText(name[i]));</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//监听TabLayout，第一个方法有用而已</span></span><br><span class="line">        mTabLayout.addOnTabSelectedListener(<span class="keyword">new</span> <span class="title class_">TabLayout</span>.OnTabSelectedListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onTabSelected</span><span class="params">(TabLayout.Tab tab)</span> &#123;</span><br><span class="line">                mViewPager2.setCurrentItem(tab.getPosition());</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onTabUnselected</span><span class="params">(TabLayout.Tab tab)</span> &#123;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onTabReselected</span><span class="params">(TabLayout.Tab tab)</span> &#123;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//xml布局</span></span><br><span class="line">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span><br><span class="line">&lt;LinearLayout xmlns:android=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span><br><span class="line">    xmlns:tools=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span><br><span class="line">    android:layout_width=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">    android:layout_height=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">    xmlns:app=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span><br><span class="line">    tools:context=<span class="string">&quot;.HomeFragment&quot;</span></span><br><span class="line">    android:orientation=<span class="string">&quot;vertical&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">    &lt;com.google.android.material.tabs.TabLayout</span><br><span class="line">        android:id=<span class="string">&quot;@+id/tab_layout&quot;</span></span><br><span class="line">        android:layout_width=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">        android:layout_height=<span class="string">&quot;50dp&quot;</span></span><br><span class="line">        app:tabMode=<span class="string">&quot;auto&quot;</span>/&gt;</span><br><span class="line"></span><br><span class="line">    &lt;androidx.viewpager2.widget.ViewPager2</span><br><span class="line">        android:id=<span class="string">&quot;@+id/viewpager2&quot;</span></span><br><span class="line">        android:layout_width=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">        android:layout_height=<span class="string">&quot;0dp&quot;</span></span><br><span class="line">        android:layout_weight=<span class="string">&quot;1&quot;</span>/&gt;</span><br><span class="line"></span><br><span class="line">&lt;/LinearLayout&gt;</span><br></pre></td></tr></table></figure>



<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Adapter适配器</span></span><br><span class="line"><span class="comment">//放Fragment继承FragmentStateAdapter</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ViewPagerTopAdapter</span> <span class="keyword">extends</span> <span class="title class_">FragmentStateAdapter</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//先记住这种用法吧,先把Fragmen的类获取过来，后面直接newInstance返回出去</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;Class&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">getFragment</span><span class="params">(Fragment fragment)</span>&#123;</span><br><span class="line">            list.add(fragment.getClass());</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ViewPagerTopAdapter</span><span class="params">(<span class="meta">@NonNull</span> FragmentActivity fragmentActivity)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(fragmentActivity);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@NonNull</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Fragment <span class="title function_">createFragment</span><span class="params">(<span class="type">int</span> position)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> (Fragment) list.get(position).newInstance();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IllegalAccessException | InstantiationException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//记得return null;</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getItemCount</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> list.size();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_33235287/article/details/104341114?ops_request_misc=&request_id=&biz_id=102&utm_term=ViewPager2+TabLayout&utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduweb~default-2-104341114.142%5Ev99%5Epc_search_result_base9&spm=1018.2226.3001.4187">玩Android项目开发7—–项目页面（使用ViewPager 2 + TabLayout实现项目页面）_tablayout.mode_auto-CSDN博客</a></p>
<h3 id="Service服务"><a href="#Service服务" class="headerlink" title="Service服务"></a>Service服务</h3><p>这里以一个简单的音乐播放器引入</p>
<p><strong>activity_main.xml</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">RelativeLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">&quot;.MainActivity&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/btn_play_or_stop&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_centerVertical</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginStart</span>=<span class="string">&quot;40dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;播放/暂停&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;20sp&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">SeekBar</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/skb_play&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:paddingStart</span>=<span class="string">&quot;20dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:paddingEnd</span>=<span class="string">&quot;20dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_below</span>=<span class="string">&quot;@id/btn_play_or_stop&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_centerHorizontal</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;20dp&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">RelativeLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p>在assests资源文件夹下放一首mp3音乐，命名为test_music.mp3</p>
<p><strong>MyTestMusicService</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyTestMusicService</span> <span class="keyword">extends</span> <span class="title class_">Service</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> MediaPlayer mMediaPlayer;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyTestMusicService</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> IBinder <span class="title function_">onBind</span><span class="params">(Intent intent)</span> &#123;</span><br><span class="line">        <span class="comment">//当执行完了onCreate后，就会执行onBind把操作歌曲的方法返回</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">MyBinder</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreate();</span><br><span class="line">        <span class="comment">//这里只执行一次，用于准备播放器</span></span><br><span class="line">        mMediaPlayer = <span class="keyword">new</span> <span class="title class_">MediaPlayer</span>();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">AssetManager</span> <span class="variable">assetManager</span> <span class="operator">=</span> getAssets();</span><br><span class="line">            <span class="type">AssetFileDescriptor</span> <span class="variable">assetFileDescriptor</span> <span class="operator">=</span> assetManager.openFd(<span class="string">&quot;test_music.mp3&quot;</span>);</span><br><span class="line">            mMediaPlayer.setDataSource(assetFileDescriptor.getFileDescriptor(), assetFileDescriptor.getStartOffset(), assetFileDescriptor.getLength());</span><br><span class="line">            <span class="comment">//准备资源</span></span><br><span class="line">            mMediaPlayer.prepare();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        Log.i(<span class="string">&quot;TAGG&quot;</span>, <span class="string">&quot;准备播放音乐&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//该方法包含关于歌曲的操作</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyBinder</span> <span class="keyword">extends</span> <span class="title class_">Binder</span> &#123;</span><br><span class="line">        <span class="comment">//判断是否属于播放状态</span></span><br><span class="line">        <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isPlaying</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> mMediaPlayer.isPlaying();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//播放或暂停歌曲</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">play</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (isPlaying()) &#123;</span><br><span class="line">                mMediaPlayer.pause();<span class="comment">//暂停</span></span><br><span class="line">                Log.i(<span class="string">&quot;TAGG&quot;</span>, <span class="string">&quot;音乐暂停播放&quot;</span>);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                mMediaPlayer.start();<span class="comment">//播放</span></span><br><span class="line">                Log.i(<span class="string">&quot;TAGG&quot;</span>, <span class="string">&quot;音乐继续播放&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//返回歌曲的长度，单位为毫秒</span></span><br><span class="line">        <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getDuration</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> mMediaPlayer.getDuration();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//返回歌曲目前的进度，单位为毫秒</span></span><br><span class="line">        <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getCurrentPosition</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> mMediaPlayer.getCurrentPosition();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//设置歌曲播放的进度，单位为毫秒</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">seekTo</span><span class="params">(<span class="type">int</span> mesc)</span> &#123;</span><br><span class="line">            mMediaPlayer.seekTo(mesc);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>MainActivity</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainActivity</span> <span class="keyword">extends</span> <span class="title class_">AppCompatActivity</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Button btnPlayOrStop;</span><br><span class="line">    <span class="keyword">private</span> SeekBar skb;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> ServiceConnection mServiceConnection;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> MyTestMusicService.MyBinder musicController;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Handler mHandler;<span class="comment">//定时更新播放进度</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line">        initView();</span><br><span class="line">        initEvent();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">initView</span><span class="params">()</span> &#123;</span><br><span class="line">        btnPlayOrStop = findViewById(R.id.btn_play_or_stop);</span><br><span class="line">        btnPlayOrStop.setOnClickListener(<span class="keyword">new</span> <span class="title class_">View</span>.OnClickListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View view)</span> &#123;</span><br><span class="line">                play();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        skb = findViewById(R.id.skb_play);</span><br><span class="line">        skb.setOnSeekBarChangeListener(<span class="keyword">new</span> <span class="title class_">SeekBar</span>.OnSeekBarChangeListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onProgressChanged</span><span class="params">(SeekBar seekBar, <span class="type">int</span> i, <span class="type">boolean</span> b)</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (b)&#123;</span><br><span class="line">                    musicController.seekTo(i);<span class="comment">//进度条改变</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onStartTrackingTouch</span><span class="params">(SeekBar seekBar)</span> &#123;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onStopTrackingTouch</span><span class="params">(SeekBar seekBar)</span> &#123;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">initEvent</span><span class="params">()</span> &#123;</span><br><span class="line">        mHandler = <span class="keyword">new</span> <span class="title class_">Handler</span>(getMainLooper(), <span class="keyword">new</span> <span class="title class_">Handler</span>.Callback() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">handleMessage</span><span class="params">(<span class="meta">@NonNull</span> Message message)</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (message.what == <span class="number">0</span>) &#123;</span><br><span class="line">                    updatePlayPosition();<span class="comment">//更新播放进度</span></span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        startMusicService();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 启动服务</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">startMusicService</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">Intent</span> <span class="variable">intent</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(<span class="built_in">this</span>, MyTestMusicService.class);</span><br><span class="line">        startService(intent);</span><br><span class="line">        Toast.makeText(<span class="built_in">this</span>, <span class="string">&quot;启动服务&quot;</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">        bindMusicService();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 停止服务</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">stopMusicService</span><span class="params">()</span> &#123;</span><br><span class="line">        unBindMusicService();</span><br><span class="line">        <span class="type">Intent</span> <span class="variable">intent</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(<span class="built_in">this</span>, MyTestMusicService.class);</span><br><span class="line">        stopService(intent);</span><br><span class="line">        Toast.makeText(<span class="built_in">this</span>, <span class="string">&quot;停止服务&quot;</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 绑定服务</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">bindMusicService</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">Intent</span> <span class="variable">intent</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(<span class="built_in">this</span>, MyTestMusicService.class);</span><br><span class="line">        <span class="comment">//创建连接对象</span></span><br><span class="line">        <span class="keyword">if</span> (mServiceConnection == <span class="literal">null</span>) &#123;</span><br><span class="line">            mServiceConnection = <span class="keyword">new</span> <span class="title class_">ServiceConnection</span>() &#123;</span><br><span class="line">                <span class="comment">//与服务连接上回调</span></span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onServiceConnected</span><span class="params">(ComponentName componentName, IBinder iBinder)</span> &#123;</span><br><span class="line">                    Log.i(<span class="string">&quot;TAGG&quot;</span>, <span class="string">&quot;绑定服务&quot;</span>);</span><br><span class="line">                    musicController = (MyTestMusicService.MyBinder) iBinder;<span class="comment">//绑定服务后获取Binder</span></span><br><span class="line">                    <span class="comment">//更新按钮的文字</span></span><br><span class="line">                    btnPlayOrStop.setText(<span class="string">&quot;播放&quot;</span>);</span><br><span class="line">                    <span class="comment">//设置进度条最大值</span></span><br><span class="line">                    skb.setMax(musicController.getDuration());</span><br><span class="line">                    <span class="comment">//设置进度条的进度</span></span><br><span class="line">                    skb.setProgress(musicController.getCurrentPosition());</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="comment">//不会执行，不需理会</span></span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onServiceDisconnected</span><span class="params">(ComponentName componentName)</span> &#123;</span><br><span class="line"></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;;</span><br><span class="line">            <span class="comment">//绑定服务</span></span><br><span class="line">            <span class="comment">//BIND_AUTO_CREATE创建后自动绑定</span></span><br><span class="line">            bindService(intent, mServiceConnection, BIND_AUTO_CREATE);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            Toast.makeText(<span class="built_in">this</span>, <span class="string">&quot;已经绑定服务&quot;</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 解绑服务</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">unBindMusicService</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (mServiceConnection != <span class="literal">null</span>) &#123;</span><br><span class="line">            unbindService(mServiceConnection);</span><br><span class="line">            mServiceConnection = <span class="literal">null</span>;</span><br><span class="line">            Log.i(<span class="string">&quot;TAGG&quot;</span>, <span class="string">&quot;接绑服务&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            Toast.makeText(<span class="built_in">this</span>, <span class="string">&quot;还未绑定服务&quot;</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 更新按钮的文字</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">updatePlayTest</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (musicController.isPlaying()) &#123;</span><br><span class="line">            btnPlayOrStop.setText(<span class="string">&quot;播放&quot;</span>);</span><br><span class="line">            mHandler.sendEmptyMessageDelayed(<span class="number">0</span>, <span class="number">500</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            btnPlayOrStop.setText(<span class="string">&quot;暂停&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 播放或暂停</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">play</span><span class="params">()</span>&#123;</span><br><span class="line">        updatePlayTest();</span><br><span class="line">        musicController.play();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 更新进度条</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">updatePlayPosition</span><span class="params">()</span> &#123;</span><br><span class="line">        skb.setProgress(musicController.getCurrentPosition());</span><br><span class="line">        mHandler.sendEmptyMessageDelayed(<span class="number">0</span>, <span class="number">500</span>);<span class="comment">//500ms更新一次进度条</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 进入界面后重新更新进度条</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onResume</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onResume();</span><br><span class="line">        <span class="keyword">if</span> (musicController!=<span class="literal">null</span>)&#123;</span><br><span class="line">            mHandler.sendEmptyMessage(<span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 停止更新进度条</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onStop</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onStop();</span><br><span class="line">        mHandler.removeCallbacksAndMessages(<span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 当绑定服务后，不解绑服务直接退出，会有错误抛出，所以需要在当前Activity页面销毁的时候，执行解绑服务</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onDestroy</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onDestroy();</span><br><span class="line">        <span class="keyword">if</span> (mServiceConnection != <span class="literal">null</span>) &#123;</span><br><span class="line">            stopMusicService();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h3 id="SharedPreferences"><a href="#SharedPreferences" class="headerlink" title="SharedPreferences"></a>SharedPreferences</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//存数据</span></span><br><span class="line">SharedPreferences.Editor qq_xml=getSharedPreferences(<span class="string">&quot;qq_xml&quot;</span>,MODE_PRIVATE).edit();</span><br><span class="line">qq_xml.putString(<span class="string">&quot;number&quot;</span>,number_qq);</span><br><span class="line">qq_xml.putString(<span class="string">&quot;password&quot;</span>,pass1_qq);</span><br><span class="line">qq_xml.apply();</span><br><span class="line"></span><br><span class="line"><span class="comment">//读数据</span></span><br><span class="line">SharedPreferences nw_qq=getSharedPreferences(<span class="string">&quot;qq_xml&quot;</span>,MODE_PRIVATE);</span><br><span class="line">String number=nw_qq.getString(<span class="string">&quot;number&quot;</span>,<span class="string">&quot;&quot;</span>);</span><br><span class="line">String pasword=nw_qq.getString(<span class="string">&quot;password&quot;</span>,<span class="string">&quot;&quot;</span>);</span><br></pre></td></tr></table></figure>





<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//记住密码</span></span><br><span class="line"><span class="keyword">package</span> com.example.databasestudy.Class;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.content.Context;</span><br><span class="line"><span class="keyword">import</span> android.content.SharedPreferences;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SP</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> SharedPreferences.Editor edit;</span><br><span class="line">    <span class="keyword">private</span> SharedPreferences mSharedPreferences;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//要获取某个界面的sp，传入上下文</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">getSP</span><span class="params">(Context context)</span>&#123;</span><br><span class="line">        <span class="comment">//getSharedPreferences存在就读取，不存在创建，后面传名字和打开方式</span></span><br><span class="line">        mSharedPreferences = context.getSharedPreferences(<span class="string">&quot;data_1&quot;</span>, Context.MODE_PRIVATE);</span><br><span class="line">        <span class="comment">//需要构造editor，用edit方法构造</span></span><br><span class="line">        edit = mSharedPreferences.edit();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">(String username,String password,String isRememberPassword)</span>&#123;</span><br><span class="line">        edit.putString(<span class="string">&quot;username&quot;</span>,username);</span><br><span class="line">        edit.putString(<span class="string">&quot;password&quot;</span>,password);</span><br><span class="line">        edit.putString(<span class="string">&quot;isRememberPassword&quot;</span>,isRememberPassword);</span><br><span class="line">        <span class="comment">//apply方法是在何时时候放入数据库，速度快，还有edit.commit();，在当时就存储进去</span></span><br><span class="line">        edit.apply();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">clear</span><span class="params">(String isRememberPassword)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (isRememberPassword.equals(<span class="string">&quot;NO&quot;</span>))&#123;</span><br><span class="line">            edit.clear();</span><br><span class="line">            edit.putString(<span class="string">&quot;isRememberPassword&quot;</span>, <span class="string">&quot;NO&quot;</span>);</span><br><span class="line">            edit.apply();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Map&lt;String,String&gt; <span class="title function_">read</span><span class="params">()</span>&#123;</span><br><span class="line">        Map&lt;String,String&gt; data = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        <span class="comment">//读取不需要editor实例</span></span><br><span class="line">        data.put(<span class="string">&quot;username&quot;</span>,mSharedPreferences.getString(<span class="string">&quot;username&quot;</span>,<span class="string">&quot;&quot;</span>));</span><br><span class="line">        data.put(<span class="string">&quot;password&quot;</span>,mSharedPreferences.getString(<span class="string">&quot;password&quot;</span>,<span class="string">&quot;&quot;</span>));</span><br><span class="line">        data.put(<span class="string">&quot;isRememberPassword&quot;</span>,mSharedPreferences.getString(<span class="string">&quot;isRememberPassword&quot;</span>,<span class="string">&quot;NO&quot;</span>));</span><br><span class="line">        <span class="keyword">return</span> data;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h3 id="SQLite"><a href="#SQLite" class="headerlink" title="SQLite"></a>SQLite</h3><table>
<thead>
<tr>
<th align="left">存储类</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">NULL</td>
<td align="left">值是一个 NULL 值。</td>
</tr>
<tr>
<td align="left">INTEGER</td>
<td align="left">值是一个带符号的整数，根据值的大小存储在 1、2、3、4、6 或 8 字节中。</td>
</tr>
<tr>
<td align="left">REAL</td>
<td align="left">值是一个浮点值，存储为 8 字节的 IEEE 浮点数字。</td>
</tr>
<tr>
<td align="left">TEXT</td>
<td align="left">值是一个文本字符串，使用数据库编码（UTF-8、UTF-16BE 或 UTF-16LE）存储。</td>
</tr>
<tr>
<td align="left">BLOB</td>
<td align="left">值是一个 blob 数据，完全根据它的输入存储。</td>
</tr>
</tbody></table>
<p>数据库事务：</p>
<p>安全性、高效性</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//事物的安全性</span></span><br><span class="line"><span class="comment">//beginTransaction();//开启事务，如果事务没有成功，数据库不会改变</span></span><br><span class="line"><span class="comment">//setTransactionSuccessful();//数据库事务成功</span></span><br><span class="line"><span class="comment">//endTransaction();//关闭事物</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">long</span> <span class="title function_">insert</span><span class="params">(String number, String name, String grade, String gender)</span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">SQLiteDatabase</span> <span class="variable">db</span> <span class="operator">=</span> getWritableDatabase();</span><br><span class="line">        db.beginTransaction();<span class="comment">//开启事务，如果事务没有成功，数据库不会改变</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">ContentValues</span> <span class="variable">values</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ContentValues</span>();<span class="comment">//其实也是键值对</span></span><br><span class="line">            values.put(<span class="string">&quot;number&quot;</span>,number);</span><br><span class="line">            values.put(<span class="string">&quot;name&quot;</span>,name);</span><br><span class="line">            values.put(<span class="string">&quot;grade&quot;</span>,grade);</span><br><span class="line">            values.put(<span class="string">&quot;gender&quot;</span>,gender);</span><br><span class="line">            <span class="type">long</span> <span class="variable">l</span> <span class="operator">=</span> db.insert(WE,<span class="literal">null</span>,values);<span class="comment">//第二个参数表示为空时链接到哪，不知道就先写空</span></span><br><span class="line">            db.setTransactionSuccessful();<span class="comment">//数据库事务成功</span></span><br><span class="line">            <span class="keyword">return</span> l;</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;中途出错！&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            db.endTransaction();</span><br><span class="line">            db.close();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//事物的安全性</span></span><br><span class="line"><span class="comment">//使用普通方法添加大量数据和使用事务来添加大量的事物来对比时间，以此来看选择谁,</span></span><br><span class="line"><span class="comment">//由于开启事物是把要存储的内容先存储到内存，然后一次性写入，如果是普通方法就是打开数据库，存数据，关闭数据库这样一个操作，非常耗时间</span></span><br><span class="line"><span class="comment">//然后创建数据库时除了本身的文件还额外创建了一个文件，这个文件就是当空间不够或者说文件太大时就会存到这个wenji</span></span><br></pre></td></tr></table></figure>







<p><strong>构建传参时可以定死名字工厂和版本，就传界面进行构建</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">String</span> <span class="variable">DB_NAME</span> <span class="operator">=</span> <span class="string">&quot;MySQLite.db&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">SQLite</span><span class="params">(Context context)</span>&#123;</span><br><span class="line">    <span class="built_in">super</span>(context,DB_NAME,<span class="literal">null</span>,<span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//完整的构造方法，有许多种</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">SQLite</span><span class="params">(<span class="meta">@Nullable</span> Context context, <span class="meta">@Nullable</span> String name, <span class="meta">@Nullable</span> SQLiteDatabase.CursorFactory factory, <span class="type">int</span> version)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(context, name, factory, version);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>





<p><strong>建表语句，一个数据库可以有很多个表,下面还有更新方法，没学</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">    <span class="comment">//onCreate在数据库创建时调用，只调用一次</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(SQLiteDatabase sqLiteDatabase)</span> &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">create</span> <span class="operator">=</span> <span class="string">&quot;create table &quot;</span> + WE</span><br><span class="line">                    +<span class="string">&quot; (&quot;</span> + <span class="string">&quot;id integer primary key autoincrement,&quot;</span></span><br><span class="line">                    +<span class="string">&quot;number text,&quot;</span></span><br><span class="line">                    +<span class="string">&quot;name text,&quot;</span></span><br><span class="line">                    +<span class="string">&quot;grade ,&quot;</span></span><br><span class="line">                    +<span class="string">&quot;gender text&quot;</span> + <span class="string">&quot;)&quot;</span>;</span><br><span class="line">            sqLiteDatabase.execSQL(create);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//注意是sqLiteDatabase执行建表语句，而不是getWritableDatabase()对象执行，表名一定不能重复，重复调用语句注意传参</span></span><br><span class="line"><span class="comment">//也就是先写出数据库专门的建表语句，然后执行as自带的数据库建表方法</span></span><br><span class="line"><span class="comment">//数据库专门建表语句：  create table 表名 (id integer primary key autoincrement,number text,... )</span></span><br></pre></td></tr></table></figure>





<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onUpgrade</span><span class="params">(SQLiteDatabase sqLiteDatabase, <span class="type">int</span> i, <span class="type">int</span> i1)</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>







<p><strong>各种操作</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* insert()增加数据</span></span><br><span class="line"><span class="comment">* delete()删除数据</span></span><br><span class="line"><span class="comment">* update()修改数据</span></span><br><span class="line"><span class="comment">* query()查找数据*/</span></span><br></pre></td></tr></table></figure>



<p><em><strong>增加数据</strong></em></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//可以加个Bean类，里面放各种数据，操作和代码都更简单</span></span><br><span class="line"><span class="comment">//insert方法返回值为long类型</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">long</span> <span class="title function_">insert</span><span class="params">(String number, String name, String grade, String gender)</span>&#123;</span><br><span class="line">    <span class="type">SQLiteDatabase</span> <span class="variable">db</span> <span class="operator">=</span> getWritableDatabase();</span><br><span class="line"></span><br><span class="line">    <span class="type">ContentValues</span> <span class="variable">values</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ContentValues</span>();<span class="comment">//其实也是键值对</span></span><br><span class="line">    values.put(<span class="string">&quot;number&quot;</span>,number);</span><br><span class="line">    values.put(<span class="string">&quot;name&quot;</span>,name);</span><br><span class="line">    values.put(<span class="string">&quot;grade&quot;</span>,grade);</span><br><span class="line">    values.put(<span class="string">&quot;gender&quot;</span>,gender);</span><br><span class="line">    <span class="keyword">return</span> db.insert(WE,<span class="literal">null</span>,values);<span class="comment">//第二个参数表示为空时链接到哪，不知道就先写空</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<p><em><strong>删除数据</strong></em></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//delete方法返回值为int类型，删除了多少个就返回多少</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">delete</span><span class="params">(String number)</span>&#123;</span><br><span class="line">        <span class="type">SQLiteDatabase</span> <span class="variable">db</span> <span class="operator">=</span> getWritableDatabase();</span><br><span class="line">        <span class="comment">/*第一个参数为表的名字，第二个参数为判断语句，写条件的，第三个为值,要new一个String数组</span></span><br><span class="line"><span class="comment">    ，里面填充要传的所有值，问号代表将后面的值依次填充进去问号*/</span></span><br><span class="line">        <span class="keyword">return</span> db.delete(WE,<span class="string">&quot;number like ?&quot;</span>,<span class="keyword">new</span> <span class="title class_">String</span>[]&#123;number&#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<p><em><strong>修改数据</strong></em></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">//change方法返回值为int类型，更改了多少个数据就返回多少</span><br><span class="line">public int change(String number, String name, String grade, String gender)&#123;</span><br><span class="line">        SQLiteDatabase db = getWritableDatabase();</span><br><span class="line">        ContentValues values = new ContentValues();//其实也是键值对</span><br><span class="line">        values.put(&quot;number&quot;,number);</span><br><span class="line">        values.put(&quot;name&quot;,name);</span><br><span class="line">        values.put(&quot;grade&quot;,grade);</span><br><span class="line">        values.put(&quot;gender&quot;,gender);</span><br><span class="line">        /*</span><br><span class="line">        * 传入4个参数，第一个为表名，第二个为修改的完整数据，第三个为判断语句，根据什么来查找修改的</span><br><span class="line">        * 第四个为要往判断语句里面填充的值，要为String类型的数组*/</span><br><span class="line">        return db.update(WE,values,&quot;number like ?&quot;,new String[]&#123;number&#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<p><em><strong>查找数据</strong></em></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//query方法传回的是指针cursor</span></span><br><span class="line"> <span class="meta">@SuppressLint(&quot;Range&quot;)</span></span><br><span class="line"> <span class="keyword">public</span> List&lt;data&gt; <span class="title function_">check</span><span class="params">(String number)</span>&#123;</span><br><span class="line">     <span class="type">SQLiteDatabase</span> <span class="variable">db</span> <span class="operator">=</span> getWritableDatabase();</span><br><span class="line">     List&lt;data&gt;list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">     <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * 传入4个参数，第一个参数为表名，第二个参数为数据库语句中的要查询哪些数据，其实也就是条件语句，写要得到哪些列，</span></span><br><span class="line"><span class="comment">     * 传入null则代表哪一列都要，或者传入一个String数组，里面写着你要查询的列,</span></span><br><span class="line"><span class="comment">     * 第三个和第四个参数合起来为判断语句，根据什么来查找，第三个写判断语句，第四个写传入的参</span></span><br><span class="line"><span class="comment">     * 后面几个参数都是数据库中复杂的了*/</span></span><br><span class="line">     <span class="type">Cursor</span> <span class="variable">cursor</span> <span class="operator">=</span> db.query(WE, <span class="keyword">new</span> <span class="title class_">String</span>[]&#123;<span class="string">&quot;number,name,grade&quot;</span>&#125;, <span class="string">&quot;number like ?&quot;</span></span><br><span class="line">                              , <span class="keyword">new</span> <span class="title class_">String</span>[]&#123;number&#125;, <span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">null</span>);</span><br><span class="line">     <span class="keyword">if</span> (cursor!=<span class="literal">null</span>)&#123;</span><br><span class="line">         <span class="comment">//如果能移动到下一个就继续,循环不断得到的数据我们要保存到一个list中，最后返回list即可</span></span><br><span class="line">         <span class="keyword">while</span> (cursor.moveToNext())&#123;</span><br><span class="line">             <span class="comment">//getString表示得到当前指针的第几列的值，整型，这个值的类型要我们自己知道再去调用不同的get方法</span></span><br><span class="line">             <span class="comment">//getColumnIndex表示通过列名返回此列是第几列</span></span><br><span class="line">             <span class="type">String</span> <span class="variable">number_back</span> <span class="operator">=</span> cursor.getString(cursor.getColumnIndex(<span class="string">&quot;number&quot;</span>));</span><br><span class="line">             <span class="type">String</span> <span class="variable">name_back</span> <span class="operator">=</span> cursor.getString(cursor.getColumnIndex(<span class="string">&quot;name&quot;</span>));</span><br><span class="line">             <span class="type">String</span> <span class="variable">grade_back</span> <span class="operator">=</span> cursor.getString(cursor.getColumnIndex(<span class="string">&quot;grade&quot;</span>));</span><br><span class="line"></span><br><span class="line">             <span class="type">data</span> <span class="variable">data</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">data</span>();</span><br><span class="line">             data.setNumber(number_back);</span><br><span class="line">             data.setName(name_back);</span><br><span class="line">             data.setGrade(grade_back);</span><br><span class="line"></span><br><span class="line">             list.add(data);</span><br><span class="line">         &#125;</span><br><span class="line">         <span class="comment">//最后要关闭</span></span><br><span class="line">         cursor.close();</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">     <span class="keyword">return</span> list;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>







<h3 id="LitePal开源库"><a href="#LitePal开源库" class="headerlink" title="LitePal开源库"></a>LitePal开源库</h3><p>这里只展示简单用法，要了解更多用法可以去看作者博客，中午网址那里就是哦，中文网址也有相关博客教学</p>
<p>GitHub上LitePal开源库介绍网站：<a target="_blank" rel="noopener" href="https://github.com/guolindev/LitePal">https://github.com/guolindev/LitePal</a></p>
<p>中文网址：<a target="_blank" rel="noopener" href="https://blog.csdn.net/guolin_blog/category_9262963.html">https://blog.csdn.net/guolin_blog/category_9262963.html</a></p>
<p><strong>配置LitePal</strong></p>
<p><strong>导入jar包，添加依赖</strong></p>
<p><strong>原本是可以直接添加依赖的，但不知道为什么我的项目添加不成功，后面知道了，<code>jcenter</code>停用了但LitePal是在<code>jcenter</code>上的导致下载失败，还是直接导入jar包了，添加依赖的操作可以跳过，直接看下面怎么导入jar包的</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//在settings.gradle中找到这个代码块加入jcenter()和下面那句代码</span></span><br><span class="line">dependencyResolutionManagement &#123;</span><br><span class="line">    repositoriesMode.set(RepositoriesMode.FAIL_ON_PROJECT_REPOS)</span><br><span class="line">    repositories &#123;</span><br><span class="line">        google()</span><br><span class="line">        mavenCentral()</span><br><span class="line">        <span class="comment">//加入下面两句代码</span></span><br><span class="line">        jcenter()</span><br><span class="line">        maven &#123; url <span class="string">&#x27;https://jitpack.io&#x27;</span> &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//然后再正常导入依赖</span></span><br><span class="line">dependencies &#123;</span><br><span class="line">    implementation <span class="string">&#x27;org.litepal.guolindev:core:3.2.3&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<ul>
<li><p><strong>首先去<a target="_blank" rel="noopener" href="https://github.com/guolindev/LitePal/blob/master/downloads/litepal-2.0.0.jar%E4%B8%8B%E8%BD%BDlitepal%E7%9A%84jar%E5%8C%85%EF%BC%8C%E4%B9%8B%E5%90%8E%E5%9C%A8%E9%A1%B9%E7%9B%AE%E5%AF%BC%E5%85%A5%EF%BC%8C%E6%B2%A1%E6%9C%89%E6%89%BE%E5%88%B0lib%E7%9B%AE%E5%BD%95%E7%9A%84%E6%8C%89%E7%85%A7%E5%9B%BE%E7%89%87%E7%9A%84%E8%B7%AF%E5%BE%84%E6%96%B0%E5%BB%BA%E4%B8%80%E4%B8%AA">https://github.com/guolindev/LitePal/blob/master/downloads/litepal-2.0.0.jar下载litepal的jar包，之后在项目导入，没有找到lib目录的按照图片的路径新建一个</a></strong></p>
</li>
<li><p><strong>将下载好的文件复制到这个目录下，这个文件我已经放在压缩包里面了哦，右击复制进来的jar包，点击<code>Add As Library</code></strong></p>
</li>
</ul>
<p><strong>配置<code>litepal.xml</code></strong></p>
<ul>
<li><strong>首先新建<code>assets</code>资源目录,有的就不用新建了</strong></li>
</ul>
<p>​				<strong>右击<code>app</code>-&gt;<code>New </code>-&gt;<code>Folder</code>-&gt;点击<code>Assets Folder</code>-&gt;<code>Finish</code></strong></p>
<ul>
<li><strong>然后再在<code>assets</code>目录下<code>new File</code>一个litepal.xml文件，接着编辑里面的内容：</strong></li>
</ul>
<p>配置文件相当简单，<code>&lt;dbname&gt;</code>用于设定数据库的名字，<code>&lt;version&gt;</code>用于设定数据库的版本号，<code>&lt;list&gt;</code>用于设定所有的映射模型，我们稍后就会用到,复制下面的代码到新建的xml文件里面即可</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span><br><span class="line">&lt;litepal&gt;</span><br><span class="line">    &lt;dbname value=&quot;NewsDemo&quot; /&gt;</span><br><span class="line">    &lt;version value=&quot;1&quot; /&gt;</span><br><span class="line">    &lt;list&gt;</span><br><span class="line">    &lt;/list&gt;</span><br><span class="line"></span><br><span class="line">&lt;/litepal&gt;</span><br></pre></td></tr></table></figure>



<p><strong>配置LitePalApplication(下面方式选择一种即可)</strong></p>
<ul>
<li>方式一</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;manifest&gt;</span><br><span class="line">    &lt;application android:name=&quot;org.litepal.LitePalApplication&quot;//添加此句代码</span><br><span class="line">        ...</span><br><span class="line">        &gt;</span><br><span class="line">        ...</span><br><span class="line">    &lt;/application&gt;</span><br><span class="line">&lt;/manifest&gt;</span><br></pre></td></tr></table></figure>

<p>或者：</p>
<ul>
<li>方式二</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;manifest&gt;</span><br><span class="line">    &lt;application android:name=&quot;org.litepal.MyOwnApplication&quot;</span><br><span class="line">        ...</span><br><span class="line">        &gt;</span><br><span class="line">        ...</span><br><span class="line">    &lt;/application&gt;</span><br><span class="line">&lt;/manifest&gt;</span><br></pre></td></tr></table></figure>

<p>这种方式需要继承 <strong>LitePalApplication</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public class MyOwnApplication extends LitePalApplication &#123;  </span><br><span class="line">    ...  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>或者：</p>
<ul>
<li>方式三</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">public class MyOwnApplication extends AnotherApplication &#123;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onCreate() &#123;</span><br><span class="line">        super.onCreate();</span><br><span class="line">        LitePal.initialize(this);</span><br><span class="line">    &#125;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>使用方法</strong></p>
<ul>
<li><p><strong>创建和升级数据库</strong></p>
</li>
<li><p><strong>跟前面使用SQLite数据库一样，我们以一个Student类进行讲解，新建一个Student类，并让这个类继承<code> LitePalSupport</code></strong></p>
</li>
</ul>
<p><strong>注：这个类是一个典型的Java Bean类，在这个Student类中我们定义了number、name、gender、grade这些字段，并且生成了getter方法（获取值）和setter方法（赋值），这个类就可以用来建表了，每个字段就是表的一列，这就是对象关系映射最直观的体验</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> <span class="keyword">extends</span> <span class="title class_">LitePalSupport</span> &#123;</span><br><span class="line"><span class="comment">//跟之前不同，这里要继承LitePalSupport</span></span><br><span class="line">    String number;</span><br><span class="line">    String name;</span><br><span class="line">    String gender;</span><br><span class="line">    String grade;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getNumber</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> number;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setNumber</span><span class="params">(String number)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.number = number;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getGender</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> gender;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setGender</span><span class="params">(String gender)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.gender = gender;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getGrade</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> grade;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setGrade</span><span class="params">(String grade)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.grade = grade;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<ul>
<li><strong>之后我们把Student类添加到映射模型列表当中，修改<code>litepal.xml</code>中的代码</strong></li>
</ul>
<p><strong><code>&lt;mapping class = &quot;类&quot;/&gt;</code>,双引号之间的类换成上面讲的包名.类名，如图，这里的<code>&lt;mapping&gt;</code>标签来声明要配置的映射模型类，注意一定要使用完整的类名，不管有多少模型类需要映射，都用同样的方法配置在<code>&lt;list&gt;</code>标签下</strong></p>
<p><img src="/%E5%AE%89%E5%8D%93%E5%BC%80%E5%8F%91%E7%AC%94%E8%AE%B0.assets/Snipaste_2022-11-11_13-21-08.png"></p>
<ul>
<li><strong>创建数据库和访问数据库的方法</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LitePal.getDatabase();<span class="comment">//LitePal创建数据库方法</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p><strong>而要升级数据库如增加列只需要在映射的类那里新加一个数据域即可，如果要加多一张表就只需要新建一个类似的Student类按照同样的方法写即可</strong></p>
</li>
<li><p><strong>增加数据</strong></p>
</li>
</ul>
<p><strong>注意：无论是要对数据进行怎么样的操作都应该要创建数据库，创建好了就是打开数据库，要先调用<code>LitePal.getDatabase();</code>这个方法才能操作数据库，万万记得</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//litepal插入数据</span></span><br><span class="line"> <span class="type">Student</span>  <span class="variable">student</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>();</span><br><span class="line">student.setNumber(number);</span><br><span class="line">student.setName(name);</span><br><span class="line">student.setGrade(grade);</span><br><span class="line">student.setGender(<span class="string">&quot;男&quot;</span>);</span><br><span class="line"></span><br><span class="line">student.save();</span><br><span class="line"><span class="comment">//save是保存数据的方法</span></span><br><span class="line"><span class="comment">//新建映射的类的对象，并且修改完成这个对象后，直接调用save()方法即可保存，用起来很简单</span></span><br></pre></td></tr></table></figure>



<ul>
<li><strong>删除数据</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">LitePal.deleteAll(Student.class,<span class="string">&quot;number like ?&quot;</span>,mEditText_number.getText().toString().trim());</span><br><span class="line"><span class="comment">//deleteAll就是删除数据的方法</span></span><br><span class="line"><span class="comment">//deleteAll第一个参数是表的名字，是之前映射类名.class；第二个参数是传一条判断根据什么删除的语句，</span></span><br><span class="line"><span class="comment">//如这里就是名字是?的，而?是什么是跟在后面传的参数</span></span><br></pre></td></tr></table></figure>



<p><strong>修改数据</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Student</span> <span class="variable">student</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>();</span><br><span class="line">student.setName(name);</span><br><span class="line">student.setGrade(grade);</span><br><span class="line">student.setGrade(<span class="string">&quot;男&quot;</span>);</span><br><span class="line">student.updateAll(<span class="string">&quot;number like ?&quot;</span>,number);</span><br><span class="line"><span class="comment">//updateAll就是修改数据的方法</span></span><br><span class="line"><span class="comment">//updateAll第一个参数传入一个限制语句，不传就是修改全部的</span></span><br></pre></td></tr></table></figure>



<p><strong>查询数据</strong></p>
<ul>
<li><strong>简单查询</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//find方法按照id查找，第一个参数为表名，第二个为第几条数据</span></span><br><span class="line"><span class="type">Student</span> <span class="variable">student</span> <span class="operator">=</span> LitePal.find(Student.class,<span class="number">1</span>);</span><br></pre></td></tr></table></figure>



<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//findFirst方法传入表名即可，返回第一条数据对象</span></span><br><span class="line"><span class="type">Student</span> <span class="variable">student</span> <span class="operator">=</span> LitePal.findFirst(Student.class);</span><br></pre></td></tr></table></figure>



<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//findLast方法传入表名即可，放回最后一条数据对象</span></span><br><span class="line"><span class="type">Student</span> <span class="variable">student</span> <span class="operator">=</span> LitePal.findLast(Student.class);</span><br></pre></td></tr></table></figure>



<ul>
<li><strong>连缀查询</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//where方法传入一个限制语句，这里表示number为多少，后面跟要查询的数，find方法传入要在哪个表找</span></span><br><span class="line">List&lt;Student&gt;list = LitePal.where(<span class="string">&quot;number like ?&quot;</span>,mEditText_number.getText().toString().trim())</span><br><span class="line">                            .find(Student.class);</span><br></pre></td></tr></table></figure>









<h3 id="动画"><a href="#动画" class="headerlink" title="动画"></a>动画</h3><h4 id="帧动画"><a href="#帧动画" class="headerlink" title="帧动画"></a>帧动画</h4><ul>
<li><strong>在Android中，帧动画的本质是把一组预先准备好的图片循环切换播放，造成一种动画效果，幻灯片快速播放形成电影。</strong></li>
</ul>
<p><em><strong>通过xml方式实现</strong></em></p>
<ol>
<li>第一步：先把要系列播放的图片导入到项目中</li>
<li>第二步：在<code>drawable</code>目录下创建<code>animation_flower.xml</code>文件(文件名随意)</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span><br><span class="line">&lt;animation-list xmlns:android=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span><br><span class="line">    android:oneshot=<span class="string">&quot;false&quot;</span>&gt;<span class="comment">// 是否只播放一次 false 循环播放</span></span><br><span class="line"></span><br><span class="line">    &lt;item</span><br><span class="line">        android:drawable=<span class="string">&quot;@drawable/img01&quot;</span></span><br><span class="line">        android:duration=<span class="string">&quot;200&quot;</span> /&gt;<span class="comment">//动画持续时间</span></span><br><span class="line">    &lt;item</span><br><span class="line">        android:drawable=<span class="string">&quot;@drawable/img02&quot;</span></span><br><span class="line">        android:duration=<span class="string">&quot;200&quot;</span> /&gt;</span><br><span class="line">    &lt;item</span><br><span class="line">        android:drawable=<span class="string">&quot;@drawable/img03&quot;</span></span><br><span class="line">        android:duration=<span class="string">&quot;200&quot;</span> /&gt;</span><br><span class="line">    &lt;item</span><br><span class="line">        android:drawable=<span class="string">&quot;@drawable/img04&quot;</span></span><br><span class="line">        android:duration=<span class="string">&quot;200&quot;</span> /&gt;</span><br><span class="line">    &lt;item</span><br><span class="line">        android:drawable=<span class="string">&quot;@drawable/img05&quot;</span></span><br><span class="line">        android:duration=<span class="string">&quot;200&quot;</span> /&gt;</span><br><span class="line"></span><br><span class="line">&lt;/animation-list&gt;</span><br></pre></td></tr></table></figure>



<ol start="3">
<li>第三步：布局和Activity</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//首先在布局中的Image控件把background属性设置为drawable中刚才的drawable文件</span></span><br><span class="line"><span class="comment">//然后在Activity中引用即可</span></span><br><span class="line"><span class="type">AnimationDrawable</span> <span class="variable">animationDrawable</span> <span class="operator">=</span> (AnimationDrawable) mImageView.getBackground();<span class="comment">//获取动画对象</span></span><br><span class="line">mAnimationDrawable.start();<span class="comment">//播放动画</span></span><br><span class="line">mAnimationDrawable.stop();<span class="comment">//结束动画</span></span><br></pre></td></tr></table></figure>



<p><em><strong>通过Java方法形式实现</strong></em></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//跟xml实现方式很像        </span></span><br><span class="line"><span class="comment">// 获取动画对象</span></span><br><span class="line">mAnimationDrawable =<span class="keyword">new</span> <span class="title class_">AnimationDrawable</span>();        </span><br><span class="line">mAnimationDrawable.addFrame(getResources().getDrawable(R.drawable.img01),<span class="number">200</span>);</span><br><span class="line">mAnimationDrawable.addFrame(getResources().getDrawable(R.drawable.img02),<span class="number">200</span>);</span><br><span class="line">mAnimationDrawable.addFrame(getResources().getDrawable(R.drawable.img03),<span class="number">200</span>);</span><br><span class="line">mAnimationDrawable.addFrame(getResources().getDrawable(R.drawable.img04),<span class="number">200</span>);</span><br><span class="line">mAnimationDrawable.addFrame(getResources().getDrawable(R.drawable.img05),<span class="number">200</span>);</span><br><span class="line">mAnimationDrawable.addFrame(getResources().getDrawable(R.drawable.img06),<span class="number">200</span>);</span><br><span class="line">mAnimationDrawable.setOneShot(<span class="literal">false</span>);<span class="comment">//设置循环播放</span></span><br><span class="line">mImageViewShow.setBackground(mAnimationDrawable);</span><br><span class="line">mAnimationDrawable.start();<span class="comment">//播放动画</span></span><br><span class="line">mAnimationDrawable.stop();<span class="comment">//结束动画</span></span><br></pre></td></tr></table></figure>





<h4 id="补间动画"><a href="#补间动画" class="headerlink" title="补间动画"></a>补间动画</h4><ul>
<li><strong>在Android动画中，补间动画一共可以分成四类即透明度动画、缩放动画、旋转动画、位移动画。</strong></li>
<li><strong>其实现方法可以通过xml来配置，也可以通过代码来实现。</strong></li>
<li><strong>透明度动画-AlphaAnimation，缩放动画-ScaleAnimation，位移动画-TranslateAnimation，旋转动画-RotateAnimation</strong></li>
</ul>
<p><em><strong>通过xml方式实现</strong></em></p>
<p>用<code>xml</code>实现补间动画，需要将<code>xml</code>放到res下的<code>anim</code>目录，Android工程默认是没有<code>anim</code>文件夹的在读文件前我们先把<code>anim</code> 文件夹以及文件建好</p>
<p>点中工程的<code>res</code>目录 右键<code>New</code> -&gt;<code>Directory</code>-&gt; 弹窗中输入<code>anim</code><br>点中刚刚新建的<code>anim</code>目录 右键<code>New</code> -&gt; <code>Animation Resource File</code><br>创建好了以后输入如下的布局文件代码</p>
<ol>
<li><strong>透明度</strong></li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span><br><span class="line">&lt;alpha xmlns:android=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span><br><span class="line">    android:interpolator=<span class="string">&quot;@android:anim/accelerate_decelerate_interpolator&quot;</span></span><br><span class="line">    android:fromAlpha=<span class="string">&quot;1.0&quot;</span></span><br><span class="line">    android:toAlpha=<span class="string">&quot;0.1&quot;</span></span><br><span class="line">    android:duration=<span class="string">&quot;2000&quot;</span>/&gt;</span><br></pre></td></tr></table></figure>



<p><strong>注：<code>android:interpolator=&quot;&quot;</code></strong></p>
<p><code>Interpolator</code>分类如下：</p>
<ul>
<li><code>AccelerateDecelerateInterpolator</code>，效果是开始和结束的速率比较慢，中间加速；</li>
<li><code>AccelerateInterpolator</code>,效果是开始速率比较慢，后面加速；</li>
<li><code>DecelerateInterpolator</code>,效果是开始速率比较快，后面减速；</li>
<li><code>LinearInterpolator</code>,效果是速率是恒定的；</li>
<li><code>AnticipateInterpolator</code>,效果是开始向后甩，然后向前；</li>
<li><code>AnticipateOvershootInterpolator</code>,效果是开始向后甩，冲到目标值，最后又回到最终值；</li>
<li><code>OvershootInterpolator</code>,效果开始向前甩，冲到目标值，最后又回到了最终值；</li>
<li><code>BounceInterpolator</code>,效果是在结束时反弹；</li>
<li><code>CycleInterpolator</code>,效果是循环播放，速率是正弦曲线；</li>
<li><code>TimeInterpolator</code>,一个接口，可以自定义插值器。</li>
</ul>
<p>插值器们对应的资源ID:</p>
<ul>
<li><code>AccelerateDecelerateInterpolator</code>，对应的是<code>@android:anim/accelerate_decelerate_interpolator</code>；</li>
<li><code>AccelerateInterpolator</code>,对应的是<code>@android:anim/accelerate_interpolator</code>；</li>
<li><code>DecelerateInterpolator</code>,对应的是<code>@android:anim/decelerate_interpolator</code>；</li>
<li><code>LinearInterpolator</code>,对应的是<code>@android:anim/linear_interpolator</code>；</li>
<li><code>AnticipateInterpolator</code>,对应是<code>@android:anim/anticipate_interpolator</code>；</li>
<li><code>AnticipateOvershootInterpolator</code>,对应的是<code>@android:anim/anticipate_overshoot_interpolator</code>；</li>
<li><code>OvershootInterpolator</code>,对应的是<code>@android:anim/overshoot_interpolator</code>；</li>
<li><code>BounceInterpolator</code>,对应是<code>@android:anim/bounce_interpolator</code>；</li>
<li><code>CycleInterpolator</code>,对应是<code>@android:anim/cycle_interpolator</code>。</li>
</ul>
<table>
<thead>
<tr>
<th>属性值</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody><tr>
<td>fromAlpha</td>
<td align="center">起始透明度（透明度的范围为：0-1，完全透明-完全不透明）</td>
</tr>
<tr>
<td>toAlpha</td>
<td align="center">结束透明度</td>
</tr>
<tr>
<td>duration</td>
<td align="center">持续时间（毫秒）</td>
</tr>
</tbody></table>
<ol start="2">
<li><strong>缩放</strong></li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span><br><span class="line">&lt;scale xmlns:android=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span><br><span class="line">    android:interpolator=<span class="string">&quot;@android:anim/accelerate_interpolator&quot;</span></span><br><span class="line">    android:fromXScale=<span class="string">&quot;0.2&quot;</span></span><br><span class="line">    android:toXScale=<span class="string">&quot;1.5&quot;</span></span><br><span class="line">    android:fromYScale=<span class="string">&quot;0.2&quot;</span></span><br><span class="line">    android:toYScale=<span class="string">&quot;1.5&quot;</span></span><br><span class="line">    android:pivotX=<span class="string">&quot;50%&quot;</span></span><br><span class="line">    android:pivotY=<span class="string">&quot;50%&quot;</span></span><br><span class="line">    android:duration=<span class="string">&quot;2000&quot;</span>/&gt;</span><br></pre></td></tr></table></figure>



<table>
<thead>
<tr>
<th align="center">属性值</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody><tr>
<td align="center">fromXScale</td>
<td align="center">沿着X轴缩放的起始比例</td>
</tr>
<tr>
<td align="center">fromYScale</td>
<td align="center">沿着Y轴缩放的起始比例</td>
</tr>
<tr>
<td align="center">toXScale</td>
<td align="center">沿着X轴缩放的结束比例</td>
</tr>
<tr>
<td align="center">toYScale</td>
<td align="center">沿着Y轴缩放的结束比例</td>
</tr>
<tr>
<td align="center">pivotX</td>
<td align="center">缩放的中轴点X坐标，即距离自身左边缘的位置，比如50%就是以图像的 中心为中轴点</td>
</tr>
<tr>
<td align="center">pivotY</td>
<td align="center">缩放的中轴点Y坐标</td>
</tr>
<tr>
<td align="center">duration</td>
<td align="center">持续时间</td>
</tr>
</tbody></table>
<p>​	</p>
<p>​	</p>
<ol start="3">
<li><strong>位移</strong></li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span><br><span class="line">&lt;translate xmlns:android=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span><br><span class="line">    android:interpolator=<span class="string">&quot;@android:anim/accelerate_decelerate_interpolator&quot;</span></span><br><span class="line">    android:fromXDelta=<span class="string">&quot;0&quot;</span></span><br><span class="line">    android:toXDelta=<span class="string">&quot;320&quot;</span></span><br><span class="line">    android:fromYDelta=<span class="string">&quot;0&quot;</span></span><br><span class="line">    android:toYDelta=<span class="string">&quot;0&quot;</span></span><br><span class="line">    android:duration=<span class="string">&quot;2000&quot;</span>/&gt;</span><br></pre></td></tr></table></figure>



<table>
<thead>
<tr>
<th>属性值</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>fromXDelta</td>
<td>动画起始位置的X坐标</td>
</tr>
<tr>
<td>fromYDelta</td>
<td>动画起始位置的Y坐标</td>
</tr>
<tr>
<td>toXDelta</td>
<td>动画结束位置的X坐标</td>
</tr>
<tr>
<td>toYDelta</td>
<td>动画结束位置的Y坐标</td>
</tr>
<tr>
<td>duration</td>
<td>持续时间</td>
</tr>
</tbody></table>
<ol start="4">
<li><strong>旋转</strong></li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span><br><span class="line">&lt;rotate xmlns:android=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span><br><span class="line">    android:interpolator=<span class="string">&quot;@android:anim/accelerate_decelerate_interpolator&quot;</span></span><br><span class="line">    android:fromDegrees=<span class="string">&quot;0&quot;</span></span><br><span class="line">    android:toDegrees=<span class="string">&quot;360&quot;</span></span><br><span class="line">    android:duration=<span class="string">&quot;1000&quot;</span></span><br><span class="line">    android:repeatCount=<span class="string">&quot;1&quot;</span></span><br><span class="line">    android:repeatMode=<span class="string">&quot;reverse&quot;</span>/&gt;</span><br></pre></td></tr></table></figure>



<table>
<thead>
<tr>
<th align="center">属性值</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody><tr>
<td align="center">fromDegrees&#x2F;toDegrees</td>
<td align="center">旋转的起始&#x2F;结束角度</td>
</tr>
<tr>
<td align="center">repeatCount</td>
<td align="center">旋转的次数，默认值为0，代表一次，假如是其他值，比如3，则旋转4次 另外，值为-1或者infinite时，表示动画永不停止</td>
</tr>
<tr>
<td align="center">repeatMode</td>
<td align="center">设置重复模式，默认restart，但只有当repeatCount大于0或者infinite或-1时 才有效。还可以设置成reverse，表示偶数次显示动画时会做方向相反的运动</td>
</tr>
<tr>
<td align="center">duration</td>
<td align="center">持续时间</td>
</tr>
</tbody></table>
<p>​	<br>​	</p>
<ol start="5">
<li><strong>组合</strong></li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span><br><span class="line">&lt;set xmlns:android=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span><br><span class="line">    android:interpolator=<span class="string">&quot;@android:anim/decelerate_interpolator&quot;</span></span><br><span class="line">    android:shareInterpolator=<span class="string">&quot;true&quot;</span> &gt;</span><br><span class="line"></span><br><span class="line">    &lt;scale</span><br><span class="line">        android:duration=<span class="string">&quot;2000&quot;</span></span><br><span class="line">        android:fromXScale=<span class="string">&quot;0.2&quot;</span></span><br><span class="line">        android:fromYScale=<span class="string">&quot;0.2&quot;</span></span><br><span class="line">        android:pivotX=<span class="string">&quot;50%&quot;</span></span><br><span class="line">        android:pivotY=<span class="string">&quot;50%&quot;</span></span><br><span class="line">        android:toXScale=<span class="string">&quot;1.5&quot;</span></span><br><span class="line">        android:toYScale=<span class="string">&quot;1.5&quot;</span> /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;rotate</span><br><span class="line">        android:duration=<span class="string">&quot;1000&quot;</span></span><br><span class="line">        android:fromDegrees=<span class="string">&quot;0&quot;</span></span><br><span class="line">        android:repeatCount=<span class="string">&quot;1&quot;</span></span><br><span class="line">        android:repeatMode=<span class="string">&quot;reverse&quot;</span></span><br><span class="line">        android:toDegrees=<span class="string">&quot;360&quot;</span> /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;translate</span><br><span class="line">        android:duration=<span class="string">&quot;2000&quot;</span></span><br><span class="line">        android:fromXDelta=<span class="string">&quot;0&quot;</span></span><br><span class="line">        android:fromYDelta=<span class="string">&quot;0&quot;</span></span><br><span class="line">        android:toXDelta=<span class="string">&quot;320&quot;</span></span><br><span class="line">        android:toYDelta=<span class="string">&quot;0&quot;</span> /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;alpha</span><br><span class="line">        android:duration=<span class="string">&quot;2000&quot;</span></span><br><span class="line">        android:fromAlpha=<span class="string">&quot;1.0&quot;</span></span><br><span class="line">        android:toAlpha=<span class="string">&quot;0.1&quot;</span> /&gt;</span><br><span class="line"></span><br><span class="line">&lt;/set&gt;</span><br></pre></td></tr></table></figure>







<p><em><strong>通过Java代码实现</strong></em></p>
<ol>
<li><strong>透明度</strong></li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment">//fromAlpha   动画开始的透明度，从0.0 --1.0 ，0.0表示全透明，1.0表示完全不透明</span></span><br><span class="line"><span class="comment">//toAlpha       动画结束时的透明度，也是从0.0 --1.0 ，0.0表示全透明，1.0表示完全不透明</span></span><br><span class="line"> <span class="keyword">public</span> <span class="title function_">AlphaAnimation</span><span class="params">(<span class="type">float</span> fromAlpha, <span class="type">float</span> toAlpha)</span> &#123;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>



<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">animation=  <span class="keyword">new</span> <span class="title class_">AlphaAnimation</span>(<span class="number">0</span>, <span class="number">1</span>);</span><br><span class="line">animation.setDuration(<span class="number">2000</span>);</span><br><span class="line">mImageView.startAnimation(animation);</span><br></pre></td></tr></table></figure>





<ol start="2">
<li><strong>缩放</strong></li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="title function_">ScaleAnimation</span><span class="params">(<span class="type">float</span> fromX, <span class="type">float</span> toX, <span class="type">float</span> fromY, <span class="type">float</span> toY,</span></span><br><span class="line"><span class="params">	<span class="type">int</span> pivotXType, <span class="type">float</span> pivotXValue, <span class="type">int</span> pivotYType, <span class="type">float</span> pivotYValue)</span> &#123;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> animation = <span class="keyword">new</span> <span class="title class_">ScaleAnimation</span>(<span class="number">0</span>, <span class="number">1.4f</span>, <span class="number">0</span>, <span class="number">1.4f</span>,</span><br><span class="line">                   ScaleAnimation.RELATIVE_TO_SELF,<span class="number">0.5f</span>,ScaleAnimation.RELATIVE_TO_SELF,<span class="number">0.5f</span>);</span><br><span class="line">animation.setDuration(<span class="number">2000</span>);</span><br><span class="line"> mImageView.startAnimation(animation);</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p><strong>重要：</strong></p>
<table>
<thead>
<tr>
<th align="center"><strong>属性值</strong></th>
<th align="center"><strong>含义</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="center">pivotXType</td>
<td align="center">有2种模式，RELATIVE_TO_SELF（相对于自身）和RELATIVE_TO_PARENT（相对于父布局）pivotx,pivotY的值就应该是0-1的浮点数，分别对应xml中的%（自身）和%p（父布局）</td>
</tr>
<tr>
<td align="center">pivotYType</td>
<td align="center">同pivotXType</td>
</tr>
</tbody></table>
<p><code>mRotateAnimation.setFillAfter(true);//旋转完后停止</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">view.requestLayout();//重新计算布局高度，布局修改时diao</span><br></pre></td></tr></table></figure>



<ol start="3">
<li><strong>位移</strong></li>
</ol>
<p>x正向右（小变化到大），y正向下（小变化到大）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">//fromXDelta     起始点X轴坐标，可以是数值、百分数、百分数p 三种样式，同scale</span></span><br><span class="line"> <span class="comment">//fromYDelta    起始点Y轴从标，可以是数值、百分数、百分数p 三种样式</span></span><br><span class="line"><span class="comment">//toXDelta         结束点X轴坐标</span></span><br><span class="line">  <span class="comment">//toYDelta        结束点Y轴坐标 </span></span><br><span class="line"> <span class="comment">// fromYType、toYType同ScaleAnimation，</span></span><br><span class="line"> <span class="keyword">public</span> <span class="title function_">TranslateAnimation</span><span class="params">(<span class="type">int</span> fromXType, <span class="type">float</span> fromXValue, <span class="type">int</span> toXType,</span></span><br><span class="line"><span class="params">  <span class="type">float</span> toXValue,<span class="type">int</span> fromYType, <span class="type">float</span> fromYValue, <span class="type">int</span> toYType, <span class="type">float</span> toYValue)</span> &#123;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>





<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">animation= <span class="keyword">new</span> <span class="title class_">TranslateAnimation</span>(TranslateAnimation.RELATIVE_TO_SELF, <span class="number">0</span>, TranslateAnimation.RELATIVE_TO_SELF, <span class="number">0.5f</span>,</span><br><span class="line">        TranslateAnimation.RELATIVE_TO_SELF, <span class="number">0</span>, TranslateAnimation.RELATIVE_TO_SELF, <span class="number">0.5f</span>);</span><br><span class="line">animation.setDuration(<span class="number">2000</span>);</span><br><span class="line">mImageView.startAnimation(animation);</span><br></pre></td></tr></table></figure>





<ol start="4">
<li><strong>旋转</strong></li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="title function_">RotateAnimation</span><span class="params">(<span class="type">float</span> fromDegrees, <span class="type">float</span> toDegrees, <span class="type">int</span> pivotXType,</span></span><br><span class="line"><span class="params"> <span class="type">float</span> pivotXValue, <span class="type">int</span> pivotYType, <span class="type">float</span> pivotYValue)</span> &#123;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>



<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">animation= <span class="keyword">new</span> <span class="title class_">RotateAnimation</span>(<span class="number">0</span>, -<span class="number">720</span>, RotateAnimation.RELATIVE_TO_SELF, <span class="number">0.5f</span>,</span><br><span class="line">                       RotateAnimation.RELATIVE_TO_SELF, <span class="number">0.5f</span>);</span><br><span class="line">animation.setDuration(<span class="number">2000</span>);</span><br><span class="line">mImageView.startAnimation(animation);</span><br></pre></td></tr></table></figure>





<ol start="5">
<li><strong>组合</strong></li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Animation</span> <span class="variable">rotateAnimation</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">RotateAnimation</span>(<span class="number">0</span>, -<span class="number">720</span>, RotateAnimation.RELATIVE_TO_SELF, <span class="number">0.5f</span>,</span><br><span class="line">        RotateAnimation.RELATIVE_TO_SELF, <span class="number">0.5f</span>);</span><br><span class="line">rotateAnimation.setDuration(<span class="number">2000</span>);</span><br><span class="line"></span><br><span class="line"><span class="type">Animation</span> <span class="variable">translateAnimation</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TranslateAnimation</span>(TranslateAnimation.RELATIVE_TO_PARENT, <span class="number">0</span></span><br><span class="line">                                                      , TranslateAnimation.RELATIVE_TO_PARENT, <span class="number">0.5f</span>,</span><br><span class="line">        TranslateAnimation.RELATIVE_TO_PARENT, <span class="number">0</span>, TranslateAnimation.RELATIVE_TO_PARENT, <span class="number">0.5f</span>);</span><br><span class="line">translateAnimation.setDuration(<span class="number">2000</span>);</span><br><span class="line"></span><br><span class="line"><span class="type">Animation</span> <span class="variable">scaleAnimation</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ScaleAnimation</span>(<span class="number">0</span>, <span class="number">1.4f</span>, <span class="number">0</span>, <span class="number">1.4f</span>, ScaleAnimation.RELATIVE_TO_SELF,</span><br><span class="line">        <span class="number">0.5f</span>, ScaleAnimation.RELATIVE_TO_SELF, <span class="number">0.5f</span>);</span><br><span class="line">scaleAnimation.setDuration(<span class="number">2000</span>);</span><br><span class="line"></span><br><span class="line"><span class="type">Animation</span> <span class="variable">alphaAnimation</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AlphaAnimation</span>(<span class="number">0</span>, <span class="number">1</span>);</span><br><span class="line">alphaAnimation.setDuration(<span class="number">2000</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="type">AnimationSet</span> <span class="variable">animationSet</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AnimationSet</span>(<span class="literal">true</span>);</span><br><span class="line">animationSet.addAnimation(rotateAnimation);</span><br><span class="line">animationSet.addAnimation(translateAnimation);</span><br><span class="line">animationSet.addAnimation(scaleAnimation);</span><br><span class="line">animationSet.addAnimation(alphaAnimation);</span><br><span class="line">animationSet.setDuration(<span class="number">4000</span>);</span><br><span class="line">animationSet.setFillAfter(<span class="literal">true</span>);</span><br><span class="line">mImageView.startAnimation(animationSet);</span><br></pre></td></tr></table></figure>







<h4 id="属性动画（补间动画优化版）"><a href="#属性动画（补间动画优化版）" class="headerlink" title="属性动画（补间动画优化版）"></a>属性动画（补间动画优化版）</h4><ul>
<li><p>补间动画作用的对象是View,也就是作用的对象是Android中的控件，如ImageView、Button、TextView等，也可以作用在布局上如LinearLayout、ConstraintLayout、RelativeLayout等，但是对于一些不是View的对象，无法对这些对象进行动画操作。比如我们要对某个控件的某个属性做进行动画操作，如其颜色，这个颜色也可以看成一个对象，但其并不是View对象，补间动画就无法实现，属性动画可以对这个颜色值做动画， 能实现一些更加复杂的动画效果。</p>
</li>
<li><p>补间动画只是改变了<code>View</code>的视觉效果，而不会真正去改变View的属性</p>
</li>
<li><p>ObjectAnimator 对象动画   ValueAnimator的子类，允许对指定对象的属性执行动画。</p>
</li>
<li><p>ValueAnimator 值动画   计算初始值和结束值的过渡动画。</p>
</li>
<li><p>PropertyValueHolder 用于同时执行多个动画</p>
</li>
<li><p>TypeEvaluator 估值器</p>
</li>
<li><p>AnimatorSet 动画集合   Animator的子类，用于组合多个Animator，制定多个动画的播放次序。</p>
</li>
<li><p>Interpolator 差值器</p>
</li>
</ul>
<p>1、属性动画都是通过ValueAnimator 类和ObjectAnimator 类来完成，其中ObjectAnimator类是对对象做动画，ValueAnimator 类是对值做动画。<br>2、PropertyValueHolder类可以同时执行多个动画，AnimatorSetl类可以将多个动画按一定的秩序先后执行。<br>3、TypeEvaluator估值器和Interpolator 差值器</p>
<ol>
<li><strong>对象动画（ObjectAnimator）</strong></li>
</ol>
<ul>
<li><code>ObjectAnimator</code>类是属性动画中非常重要的一个类，可以通过该类对<code>View</code>不仅可以实现一些基本的移、旋转、缩放和透明度四种基本变换动画，还能实现一些其他属性值的变换动画。</li>
</ul>
<p><em><strong>Java方法实现</strong></em></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">public</span> <span class="keyword">static</span> ObjectAnimator <span class="title function_">ofFloat</span><span class="params">(Object target, String propertyName, <span class="type">float</span>... values)</span> &#123;</span><br><span class="line">        <span class="type">ObjectAnimator</span> <span class="variable">anim</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectAnimator</span>(target, propertyName);</span><br><span class="line">        anim.setFloatValues(values);</span><br><span class="line">        <span class="keyword">return</span> anim;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">/*方法中第一个参数Object target 的作用对象通常是View,也就是Android中的控件或布局。</span></span><br><span class="line"><span class="comment">方法中第二个参数String propertyName 通常是需要执行动画的属性，具体值如下表所示</span></span><br><span class="line"><span class="comment">方法中第三个参数float... values 表示属性的变换范围，该参数可以传多个值。*/</span></span><br></pre></td></tr></table></figure>



<table>
<thead>
<tr>
<th>属性</th>
<th>值的用法</th>
</tr>
</thead>
<tbody><tr>
<td>rotation</td>
<td>以屏幕方向为轴的旋转度数</td>
</tr>
<tr>
<td>alpha</td>
<td>透明度</td>
</tr>
<tr>
<td>translationX &#x2F; translationY</td>
<td>X&#x2F;Y方向的位移</td>
</tr>
<tr>
<td>scaleX &#x2F;scaleY</td>
<td>X&#x2F;Y方向的缩放倍数</td>
</tr>
<tr>
<td>rotationX &#x2F; rotationY</td>
<td>以X&#x2F;Y轴为轴的旋转度数</td>
</tr>
</tbody></table>
<p>具体使用</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ImageView</span> <span class="variable">imageView</span> <span class="operator">=</span> findViewById(R.id.imageView);</span><br><span class="line"><span class="type">ObjectAnimator</span> <span class="variable">animator</span> <span class="operator">=</span> ObjectAnimator.ofFloat(imageView, <span class="string">&quot;alpha&quot;</span>, <span class="number">1f</span>, <span class="number">0f</span>, <span class="number">1f</span>);</span><br><span class="line">animator.setDuration(<span class="number">5000</span>);</span><br><span class="line">animator.start();</span><br></pre></td></tr></table></figure>



<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ImageView</span> <span class="variable">imageView</span> <span class="operator">=</span> findViewById(R.id.imageView);</span><br><span class="line"><span class="type">ObjectAnimator</span> <span class="variable">animator</span> <span class="operator">=</span> ObjectAnimator.ofFloat(imageView, <span class="string">&quot;alpha&quot;</span>, <span class="number">1f</span>, <span class="number">0f</span>, <span class="number">1f</span>);</span><br><span class="line">animator.setDuration(<span class="number">2000</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//动画延迟500ms执行</span></span><br><span class="line">animator.setStartDelay(<span class="number">500</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//执行重复次数 +1</span></span><br><span class="line">animator.setRepeatCount(<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置动画重复播放模式 RESTART -执行完一遍后重新执行</span></span><br><span class="line"><span class="comment">// REVERSE -执行完一遍后 从末位置往前执行</span></span><br><span class="line">animator.setRepeatMode(ValueAnimator.RESTART);</span><br><span class="line"></span><br><span class="line"><span class="comment">//监听值变换</span></span><br><span class="line">animator.addUpdateListener(<span class="keyword">new</span> <span class="title class_">ValueAnimator</span>.AnimatorUpdateListener() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onAnimationUpdate</span><span class="params">(ValueAnimator animation)</span> &#123;</span><br><span class="line">        Log.i(<span class="string">&quot;MainActivity&quot;</span>,<span class="string">&quot;value：&quot;</span> +animation.getAnimatedValue());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">animator.start();</span><br></pre></td></tr></table></figure>







<p><em><strong>xml方式实现</strong></em></p>
<p>在<code>res</code>目录下新建<code>animator</code>文件夹<br><code>animator</code>文件夹下创建动画XML文件，如<code>animator_alpha.xml</code><br>往该xml文件中输入如下代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span><br><span class="line">&lt;objectAnimator xmlns:android=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span><br><span class="line">    android:propertyName=<span class="string">&quot;alpha&quot;</span></span><br><span class="line">    android:valueFrom=<span class="string">&quot;1&quot;</span></span><br><span class="line">    android:valueTo=<span class="string">&quot;0&quot;</span></span><br><span class="line">    android:valueType=<span class="string">&quot;floatType&quot;</span> /&gt;</span><br></pre></td></tr></table></figure>



<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ImageView</span> <span class="variable">imageView</span> <span class="operator">=</span> findViewById(R.id.imageView);</span><br><span class="line"><span class="type">Animator</span> <span class="variable">animator</span> <span class="operator">=</span> AnimatorInflater.loadAnimator(Main2Activity.<span class="built_in">this</span>, R.animator.animator_alpha);</span><br><span class="line">animator.setTarget(imageView);</span><br><span class="line">animator.start();</span><br></pre></td></tr></table></figure>







<ol start="2">
<li><strong>值动画（ValueAnimator）</strong></li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ValueAnimator <span class="title function_">ofFloat</span><span class="params">(<span class="type">float</span>... values)</span> -- 浮点型数值</span><br><span class="line">ValueAnimator  <span class="title function_">ofInt</span><span class="params">(<span class="type">int</span>... values)</span> -- 整型数值</span><br><span class="line">ValueAnimator  <span class="title function_">ofObject</span><span class="params">(TypeEvaluator evaluator, Object... values)</span> -- 自定义对象类型</span><br></pre></td></tr></table></figure>



<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> <span class="type">ImageView</span> <span class="variable">imageView</span> <span class="operator">=</span> findViewById(R.id.imageView);</span><br><span class="line"><span class="type">ValueAnimator</span> <span class="variable">anim</span> <span class="operator">=</span> ValueAnimator.ofFloat(<span class="number">0f</span>, <span class="number">1f</span>);</span><br><span class="line">anim.setDuration(<span class="number">5000</span>);</span><br><span class="line">anim.addUpdateListener(<span class="keyword">new</span> <span class="title class_">ValueAnimator</span>.AnimatorUpdateListener() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onAnimationUpdate</span><span class="params">(ValueAnimator animation)</span> &#123;</span><br><span class="line">        <span class="type">float</span> <span class="variable">currentValue</span> <span class="operator">=</span> (<span class="type">float</span>) animation.getAnimatedValue();</span><br><span class="line">        Log.d(<span class="string">&quot;MainActivity&quot;</span>, <span class="string">&quot;cuurent value is &quot;</span> + currentValue);</span><br><span class="line">        imageView.setAlpha(currentValue);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">anim.start();</span><br></pre></td></tr></table></figure>







<ol start="3">
<li><strong>PropertyValueHolder</strong></li>
</ol>
<p><code>PropertyValueHolder</code>可以让前面的一些动画同时执行。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ImageView</span> <span class="variable">imageView</span> <span class="operator">=</span> findViewById(R.id.imageView);</span><br><span class="line"><span class="type">PropertyValuesHolder</span> <span class="variable">alphaProper</span> <span class="operator">=</span> PropertyValuesHolder.ofFloat(<span class="string">&quot;alpha&quot;</span>, <span class="number">0.5f</span>, <span class="number">1f</span>);</span><br><span class="line"><span class="type">PropertyValuesHolder</span> <span class="variable">scaleXProper</span> <span class="operator">=</span> PropertyValuesHolder.ofFloat(<span class="string">&quot;scaleX&quot;</span>, <span class="number">0f</span>, <span class="number">1f</span>);</span><br><span class="line"><span class="type">PropertyValuesHolder</span> <span class="variable">scaleYProper</span> <span class="operator">=</span> PropertyValuesHolder.ofFloat(<span class="string">&quot;scaleY&quot;</span>, <span class="number">0f</span>, <span class="number">1f</span>);</span><br><span class="line"><span class="type">PropertyValuesHolder</span> <span class="variable">translationXProper</span> <span class="operator">=</span> PropertyValuesHolder.ofFloat(<span class="string">&quot;translationX&quot;</span>, -<span class="number">100</span>, <span class="number">100</span>);</span><br><span class="line"><span class="type">PropertyValuesHolder</span> <span class="variable">translationYProper</span> <span class="operator">=</span> PropertyValuesHolder.ofFloat(<span class="string">&quot;translationY&quot;</span>, -<span class="number">100</span>, <span class="number">100</span>);</span><br><span class="line"><span class="type">PropertyValuesHolder</span> <span class="variable">rotationProper</span> <span class="operator">=</span> PropertyValuesHolder.ofFloat(<span class="string">&quot;rotation&quot;</span>, <span class="number">0</span>, <span class="number">360</span>);</span><br><span class="line"><span class="type">ValueAnimator</span> <span class="variable">animator</span> <span class="operator">=</span> ObjectAnimator.ofPropertyValuesHolder(imageView, alphaProper,</span><br><span class="line">        scaleXProper, scaleYProper,translationXProper,translationYProper,rotationProper);</span><br><span class="line">animator.setDuration(<span class="number">5000</span>);</span><br><span class="line">animator.start();</span><br></pre></td></tr></table></figure>







<ol start="4">
<li><strong>动画组合（AnimatorSet）</strong></li>
</ol>
<p>前面的PropertyValueHolder类能实现将多个动画同时执行，AnimatorSet类不仅能让多个动画同时执行，还能让多个动画按一定的顺序执行，同时也能穿插多个动画同时执行。<br>主要的方法如下：</p>
<p>after(Animator anim)将现有动画插入到传入的动画之后执行<br>after(long delay) 将现有动画延迟指定毫秒后执行<br>before(Animator anim) 将现有动画插入到传入的动画之前执行<br>with(Animator anim) 将现有动画和传入的动画同时执行</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ImageView</span> <span class="variable">imageView</span> <span class="operator">=</span> findViewById(R.id.imageView);</span><br><span class="line"><span class="type">ObjectAnimator</span> <span class="variable">rotate</span> <span class="operator">=</span> ObjectAnimator.ofFloat(imageView, <span class="string">&quot;rotation&quot;</span>, <span class="number">0f</span>, <span class="number">360f</span>);</span><br><span class="line"><span class="type">ObjectAnimator</span> <span class="variable">translationX</span> <span class="operator">=</span> ObjectAnimator.ofFloat(imageView, <span class="string">&quot;translationX&quot;</span>, -<span class="number">100</span>, <span class="number">100f</span>);</span><br><span class="line"><span class="type">ObjectAnimator</span> <span class="variable">translationY</span> <span class="operator">=</span> ObjectAnimator.ofFloat(imageView, <span class="string">&quot;translationY&quot;</span>, -<span class="number">100</span>, <span class="number">100f</span>);</span><br><span class="line"><span class="type">ObjectAnimator</span> <span class="variable">scaleX</span> <span class="operator">=</span> ObjectAnimator.ofFloat(imageView, <span class="string">&quot;scaleX&quot;</span>, <span class="number">0</span>, <span class="number">1f</span>);</span><br><span class="line"><span class="type">ObjectAnimator</span> <span class="variable">scaleY</span> <span class="operator">=</span> ObjectAnimator.ofFloat(imageView, <span class="string">&quot;scaleY&quot;</span>, <span class="number">0</span>, <span class="number">1f</span>);</span><br><span class="line"><span class="type">ObjectAnimator</span> <span class="variable">alpha</span> <span class="operator">=</span> ObjectAnimator.ofFloat(imageView, <span class="string">&quot;alpha&quot;</span>, <span class="number">1f</span>, <span class="number">0f</span>, <span class="number">1f</span>);</span><br><span class="line"><span class="type">AnimatorSet</span> <span class="variable">animSet</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AnimatorSet</span>();</span><br><span class="line">animSet.play(rotate)</span><br><span class="line">        .with(alpha)</span><br><span class="line">        .after(scaleX)</span><br><span class="line">        .before(translationX)</span><br><span class="line">        .after(<span class="number">1000</span>)</span><br><span class="line">        .before(translationY)</span><br><span class="line">        .with(scaleY);</span><br><span class="line">animSet.setDuration(<span class="number">5000</span>);</span><br><span class="line">animSet.start();</span><br></pre></td></tr></table></figure>







<ol start="5">
<li><strong>差值器（Interpolator）</strong></li>
</ol>
<p>前面的动画属性的变换都是均匀变换，可以通过<code>差值器（Interpolator）</code>来控制值变化的速率</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ImageView</span> <span class="variable">imageView</span> <span class="operator">=</span> findViewById(R.id.imageView);</span><br><span class="line"><span class="type">ObjectAnimator</span> <span class="variable">animator</span> <span class="operator">=</span> ObjectAnimator.ofFloat(imageView, <span class="string">&quot;alpha&quot;</span>,  <span class="number">0f</span>, <span class="number">1f</span>);</span><br><span class="line">animator.setDuration(<span class="number">5000</span>);</span><br><span class="line"><span class="comment">//加速查值器，参数越大，速度越来越快</span></span><br><span class="line">animator.setInterpolator(<span class="keyword">new</span> <span class="title class_">AccelerateInterpolator</span>(<span class="number">5</span>));</span><br><span class="line">animator.start();</span><br></pre></td></tr></table></figure>



<p>系统提供，也可自定义</p>
<table>
<thead>
<tr>
<th align="center">动画名称</th>
<th align="center">效果</th>
</tr>
</thead>
<tbody><tr>
<td align="center">AccelerateInterpolator</td>
<td align="center">加速查值器，参数越大，速度越来越快</td>
</tr>
<tr>
<td align="center">DecelerateInterpolator</td>
<td align="center">减速差值起，和加速查值器相反</td>
</tr>
<tr>
<td align="center">AccelerateDecelerateInterpolator</td>
<td align="center">先加速后减速</td>
</tr>
<tr>
<td align="center">AnticipateInterpolator</td>
<td align="center">先后退在加速前进</td>
</tr>
<tr>
<td align="center">AnticipateOvershootInterpolator</td>
<td align="center">以X&#x2F;Y轴为轴的旋转度数</td>
</tr>
<tr>
<td align="center">BounceInterpolator</td>
<td align="center">弹球效果插值</td>
</tr>
<tr>
<td align="center">CycleInterpolator</td>
<td align="center">周期运动插值</td>
</tr>
<tr>
<td align="center">LinearInterpolator</td>
<td align="center">匀速插值</td>
</tr>
<tr>
<td align="center">OvershootInterpolator</td>
<td align="center">先快速完成动画，再回到结束样式</td>
</tr>
</tbody></table>
<p>​	</p>
<ol start="6">
<li><strong>估值器（TypeEvaluator）</strong><br>在前面的值动画（ValueAnimator）中和对象动画（ObjectAnimator）有一个传对象的方法：</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ValueAnimator  <span class="title function_">ofObject</span><span class="params">(TypeEvaluator evaluator, Object... values)</span></span><br><span class="line">ObjectAnimator <span class="title function_">ofObject</span><span class="params">(Object target, String propertyName,</span></span><br><span class="line"><span class="params">            TypeEvaluator evaluator, Object... values)</span></span><br></pre></td></tr></table></figure>


<p>这些方法动都需要传一个TypeEvaluator，我们先来看下这个类的源码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">TypeEvaluator</span>&lt;T&gt; &#123;</span><br><span class="line"><span class="keyword">public</span> T <span class="title function_">evaluate</span><span class="params">(<span class="type">float</span> fraction, T startValue, T endValue)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>从TypeEvaluator估值器的源码可以看出该类的作用就是告诉动画，如何从起始值过度到结束值。<br>Android源码中有好几个类实现来该接口，也就是系统提供的一些默认估值器， 我们以FloatEvaluator为例看下其实现代码。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FloatEvaluator</span> <span class="keyword">implements</span> <span class="title class_">TypeEvaluator</span>&lt;Number&gt; &#123;</span><br><span class="line">    <span class="keyword">public</span> Float <span class="title function_">evaluate</span><span class="params">(<span class="type">float</span> fraction, Number startValue, Number endValue)</span> &#123;</span><br><span class="line">        <span class="type">float</span> <span class="variable">startFloat</span> <span class="operator">=</span> startValue.floatValue();</span><br><span class="line">        <span class="keyword">return</span> startFloat + fraction * (endValue.floatValue() - startFloat);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>从FloatEvaluator的实现可以看出在evaluate方法中用结束值减去初始值，算出它们之间的差值，然后乘以fraction这个系数，再加上初始值，那么就得到当前动画的值了</p>
<p>我们也可以以该方法为例 实现一个自定义的估值器实现一个背景颜色值的变化</p>
<p>我们先定义一个默认估值器类MyTypeEvaluator,该类自定义了颜色过渡的方式</p>
<p>​<br>​     package com.lucashu.animation;<br>​<br>​    import android.animation.TypeEvaluator;<br>​<br>​    public class MyTypeEvaluator implements TypeEvaluator<String> {<br>​        private int mCurrentRed &#x3D; -1;<br>​        private int mCurrentGreen &#x3D; -1;<br>​        private int mCurrentBlue &#x3D; -1;<br>​    @Override<br>​    public String evaluate(float fraction, String startValue, String endValue) {<br>​        int startRed &#x3D; Integer.parseInt(startValue.substring(1, 3), 16);<br>​        int startGreen &#x3D; Integer.parseInt(startValue.substring(3, 5), 16);<br>​        int startBlue &#x3D; Integer.parseInt(startValue.substring(5, 7), 16);<br>​        int endRed &#x3D; Integer.parseInt(endValue.substring(1, 3), 16);<br>​        int endGreen &#x3D; Integer.parseInt(endValue.substring(3, 5), 16);<br>​        int endBlue &#x3D; Integer.parseInt(endValue.substring(5, 7), 16);<br>​        &#x2F;&#x2F; 初始化颜色的值<br>​        if (mCurrentRed &#x3D;&#x3D; -1) {<br>​            mCurrentRed &#x3D; startRed;<br>​        }<br>​        if (mCurrentGreen &#x3D;&#x3D; -1) {<br>​            mCurrentGreen &#x3D; startGreen;<br>​        }<br>​        if (mCurrentBlue &#x3D;&#x3D; -1) {<br>​            mCurrentBlue &#x3D; startBlue;<br>​        }<br>​        &#x2F;&#x2F; 计算初始颜色和结束颜色之间的差值<br>​        int redDiff &#x3D; Math.abs(startRed - endRed);<br>​        int greenDiff &#x3D; Math.abs(startGreen - endGreen);<br>​        int blueDiff &#x3D; Math.abs(startBlue - endBlue);<br>​        int colorDiff &#x3D; redDiff + greenDiff + blueDiff;<br>​        if (mCurrentRed !&#x3D; endRed) {<br>​            mCurrentRed &#x3D; getCurrentColor(startRed, endRed, colorDiff, 0,<br>​                    fraction);<br>​        } else if (mCurrentGreen !&#x3D; endGreen) {<br>​            mCurrentGreen &#x3D; getCurrentColor(startGreen, endGreen, colorDiff,<br>​                    redDiff, fraction);<br>​        } else if (mCurrentBlue !&#x3D; endBlue) {<br>​            mCurrentBlue &#x3D; getCurrentColor(startBlue, endBlue, colorDiff,<br>​                    redDiff + greenDiff, fraction);<br>​        }<br>​        &#x2F;&#x2F; 将计算出的当前颜色的值组装返回<br>​        String currentColor &#x3D; “#” + getHexString(mCurrentRed)<br>​                + getHexString(mCurrentGreen) + getHexString(mCurrentBlue);<br>​        return currentColor;<br>​    }<br>​    &#x2F;**<br>​     * 根据fraction值来计算当前的颜色。<br>​     <em>&#x2F;<br>​    private int getCurrentColor(int startColor, int endColor, int colorDiff,<br>​                                int offset, float fraction) {<br>​        int currentColor;<br>​        if (startColor &gt; endColor) {<br>​            currentColor &#x3D; (int) (startColor - (fraction * colorDiff - offset));<br>​            if (currentColor &lt; endColor) {<br>​                currentColor &#x3D; endColor;<br>​            }<br>​        } else {<br>​            currentColor &#x3D; (int) (startColor + (fraction * colorDiff - offset));<br>​            if (currentColor &gt; endColor) {<br>​                currentColor &#x3D; endColor;<br>​            }<br>​        }<br>​        return currentColor;<br>​    }<br>​<br>​    &#x2F;</em>*<br>​     * 将10进制颜色值转换成16进制。<br>​     *&#x2F;<br>​    private String getHexString(int value) {<br>​        String hexString &#x3D; Integer.toHexString(value);<br>​        if (hexString.length() &#x3D;&#x3D; 1) {<br>​            hexString &#x3D; “0” + hexString;<br>​        }<br>​        return hexString;<br>​    }<br>​    }</p>
<p>再自定义一个View，在该类中画一个矩形框</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyView</span> <span class="keyword">extends</span> <span class="title class_">View</span> &#123;</span><br><span class="line"><span class="keyword">private</span> String color;</span><br><span class="line"><span class="keyword">private</span> Paint mPaint;</span><br><span class="line"><span class="keyword">public</span> <span class="title function_">MyView</span><span class="params">(Context context, AttributeSet attrs)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>(context, attrs);</span><br><span class="line">    mPaint = <span class="keyword">new</span> <span class="title class_">Paint</span>(Paint.ANTI_ALIAS_FLAG);</span><br><span class="line">    mPaint.setColor(Color.WHITE);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">getColor</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> color;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setColor</span><span class="params">(String color)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.color = color;</span><br><span class="line">    mPaint.setColor(Color.parseColor(color));</span><br><span class="line">    invalidate();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onDraw</span><span class="params">(Canvas canvas)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>.onDraw(canvas);</span><br><span class="line">    canvas.drawRect(<span class="number">0</span>, <span class="number">0</span>, <span class="number">500</span>,<span class="number">500</span>, mPaint);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>自顶一个View在布局文件中添加如下</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;com.lucashu.animation.MyView</span><br><span class="line">    android:id=<span class="string">&quot;@+id/myview&quot;</span></span><br><span class="line">    android:layout_width=<span class="string">&quot;200dp&quot;</span></span><br><span class="line">    android:layout_height=<span class="string">&quot;200dp&quot;</span></span><br><span class="line">    android:layout_marginBottom=<span class="string">&quot;100dp&quot;</span></span><br><span class="line">    app:layout_constraintBottom_toBottomOf=<span class="string">&quot;parent&quot;</span></span><br><span class="line">    app:layout_constraintEnd_toEndOf=<span class="string">&quot;parent&quot;</span></span><br><span class="line">    app:layout_constraintStart_toStartOf=<span class="string">&quot;parent&quot;</span> /&gt;</span><br></pre></td></tr></table></figure>

<p>将在估值器加到动画中，该动画作用在我们自定义的View上</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">MyView</span> <span class="variable">imageView</span> <span class="operator">=</span> findViewById(R.id.myview);</span><br><span class="line"><span class="type">ObjectAnimator</span> <span class="variable">anim</span> <span class="operator">=</span> ObjectAnimator.ofObject(</span><br><span class="line">        imageView,<span class="string">&quot;color&quot;</span>, <span class="keyword">new</span> <span class="title class_">MyTypeEvaluator</span>(),</span><br><span class="line">        <span class="string">&quot;#0000FF&quot;</span>,<span class="string">&quot;#FF0000&quot;</span>);</span><br><span class="line">anim.setDuration(<span class="number">5000</span>);</span><br><span class="line">anim.start();</span><br></pre></td></tr></table></figure>









<h3 id="Handler和Runable"><a href="#Handler和Runable" class="headerlink" title="Handler和Runable"></a>Handler和Runable</h3><h4 id="启动页"><a href="#启动页" class="headerlink" title="启动页"></a>启动页</h4><p>安卓启动app会自带一个页面，这个页面会加载app，之后才会加载自己设置的启动页面，如果启动页面的逻辑很快过去就会显得欢迎页面一闪而过切有滑动显示自带启动页情况</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Handler延时        </span></span><br><span class="line">		<span class="type">Runnable</span> <span class="variable">runnable</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Runnable</span>() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">                startActivity(<span class="keyword">new</span> <span class="title class_">Intent</span>(WelcomeActivity.<span class="built_in">this</span>, MainActivity.class));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="type">Handler</span> <span class="variable">handler</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Handler</span>();</span><br><span class="line">        handler.postDelayed(runnable,<span class="number">2000</span>);</span><br></pre></td></tr></table></figure>



<p><strong>冷启动背景</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">&quot;AppTheme.Launcher&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;Theme.AppCompat.Light.NoActionBar&quot;</span>&gt;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:windowBackground&quot;</span>&gt;</span>@drawable/bg_splash<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">activity</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:name</span>=<span class="string">&quot;.ui.activity.SplashActivity&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:exported</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:theme</span>=<span class="string">&quot;@style/AppTheme.Launcher&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">intent-filter</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">&quot;android.intent.action.MAIN&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">category</span> <span class="attr">android:name</span>=<span class="string">&quot;android.intent.category.LAUNCHER&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">intent-filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">activity</span>&gt;</span></span><br></pre></td></tr></table></figure>





<h4 id="Handler消息机制"><a href="#Handler消息机制" class="headerlink" title="Handler消息机制"></a>Handler消息机制</h4><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/ly0724ok/article/details/117324053/">(28条消息) Android——Handler详解_android handler_Yawn__的博客-CSDN博客</a></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*主线程创建Handler（属于主线程，Looper.myLooper()），之后子线程调用这个Handler传消息*/</span></span><br><span class="line">  mHandler = <span class="keyword">new</span> <span class="title class_">Handler</span>(Looper.myLooper())&#123;</span><br><span class="line">      <span class="meta">@Override</span></span><br><span class="line">      <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">handleMessage</span><span class="params">(<span class="meta">@NonNull</span> Message msg)</span> &#123;</span><br><span class="line">          <span class="built_in">super</span>.handleMessage(msg);</span><br><span class="line">          <span class="keyword">if</span> (msg.what==<span class="number">0</span>)&#123;</span><br><span class="line">              <span class="type">Boolean</span> <span class="variable">isStart</span> <span class="operator">=</span> (Boolean) msg.obj;</span><br><span class="line">              <span class="keyword">if</span> (isStart)&#123;</span><br><span class="line">                  startActivity(<span class="keyword">new</span> <span class="title class_">Intent</span>(WelcomeActivity.<span class="built_in">this</span>,HomeActivity.class));</span><br><span class="line">                  finish();</span><br><span class="line">              &#125;</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="comment">/*子线程读数据*/</span></span><br><span class="line">  <span class="keyword">new</span> <span class="title class_">Thread</span>(<span class="keyword">new</span> <span class="title class_">Runnable</span>() &#123;</span><br><span class="line">      <span class="meta">@Override</span></span><br><span class="line">      <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">          <span class="type">Message</span> <span class="variable">message</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Message</span>();</span><br><span class="line">          message.what = <span class="number">0</span>;<span class="comment">//what表示是哪个子线程发的消息</span></span><br><span class="line">          message.arg1 = <span class="number">0</span>;<span class="comment">//arg1和arg2内置标识用的</span></span><br><span class="line">          message.arg2 = <span class="number">1</span>;</span><br><span class="line">          message.obj = <span class="literal">true</span>;<span class="comment">//传其他类型就用org这个参数，为Object类，什么都能传</span></span><br><span class="line">          mHandler.sendMessage(message);<span class="comment">//还有许多传消息的方法</span></span><br><span class="line">      &#125;</span><br><span class="line">  &#125;).start();</span><br></pre></td></tr></table></figure>





<h3 id="Material-Design设计语言"><a href="#Material-Design设计语言" class="headerlink" title="Material Design设计语言"></a>Material Design设计语言</h3><p>Material Design（中文名：材料设计语言），是由Google推出的<strong>设计语言</strong>，这种设计语言旨在为手机、平板电脑、台式机和“其他平台<em>”提供更一致、更广泛的“外观和感觉”</em>。</p>
<p>那为什么谷歌会觉得Material Design可以解决Android平台界面风格不统一的问题呢？</p>
<p>一言蔽之——好看。</p>
<h4 id="Toolbar-顶部导航，常用"><a href="#Toolbar-顶部导航，常用" class="headerlink" title="Toolbar(顶部导航，常用)"></a><code>Toolbar</code>(顶部导航，常用)</h4><p>我们平常建立一个项目，原生的顶上标题栏<code>Actionbar</code>都是深紫色的标题栏，而且<code>ActionBar</code>是一个只能位于活动的顶部的标题栏。</p>
<p><code>ActionBar</code>弃用了，可以用<code>ToolBar</code>实现一样的功能</p>
<p><strong>替代<code>ActionBar</code></strong></p>
<p>主题改成<code>&lt;style name=&quot;Theme.MyApplication&quot; parent=&quot;Theme.MaterialComponents.DayNight.NoActionBar.Bridge&quot;&gt;</code>,在xml使用<code>Toolbar</code>控件即可，要显示什么标题在<code>AndroidManifest.xml</code>设置<code>android:label=&quot;Fruits&quot;</code></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">androidx.appcompat.widget.Toolbar</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">&quot;@+id/toolbar&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;?attr/actionBarSize&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:background</span>=<span class="string">&quot;?attr/colorPrimary&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:theme</span>=<span class="string">&quot;@style/ThemeOverlay.AppCompat.Dark.ActionBar&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:popupTheme</span>=<span class="string">&quot;@style/ThemeOverlay.AppCompat.Light&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Toolbar</span> <span class="variable">toolbar</span> <span class="operator">=</span> (Toolbar) findViewById(R.id.toolbar);</span><br><span class="line">setSupportActionBar(toolbar);</span><br></pre></td></tr></table></figure>



<p><strong>自定义<code>ToolBar</code>菜单</strong></p>
<p>先在<code>res</code>下新建<code>menu</code>资源文件夹,例子如下，<code>item</code>标签表示一个新建选项，<code>icon</code>为图标，<code>title</code>标题，<code>showAction</code>为显示方式，<code>showAsAction</code> 主要有以下几种值可选:always表示永远显示在 <code>Toolbar</code>中，如果屏幕空间不够则不显示;<code>ifRoom</code>表示屏幕空间足够的情况下显示在<code>Toolbar</code>中，不够的话就显示在菜单当中;<code>never</code> 则表示水远显示在菜单当中。在菜单中的项没有图标，即使设置了图标，只显示文字，菜单为收起形式，点击展开</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">menu</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/backup&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:icon</span>=<span class="string">&quot;@drawable/backup&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:title</span>=<span class="string">&quot;Backup&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:showAsAction</span>=<span class="string">&quot;always&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/delete&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:icon</span>=<span class="string">&quot;@drawable/delete&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:title</span>=<span class="string">&quot;Backup&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:showAsAction</span>=<span class="string">&quot;ifRoom&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/settings&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:icon</span>=<span class="string">&quot;@drawable/settings&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:title</span>=<span class="string">&quot;Backup&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:showAsAction</span>=<span class="string">&quot;never&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">menu</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>然后在Java中重写两个方法来导入menu和使用，在<code>onOptionsItemMenu()</code>方法中加载了菜单文件，然后<code>onOptionsItemSelected()</code>方法中处理<code>ActionBar</code>各个按钮的点击事件。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">onCreateOptionsMenu</span><span class="params">(Menu menu)</span>&#123;</span><br><span class="line">    getMenuInflater().inflate(R.menu.toolbar,menu);<span class="comment">//在这里加载了toolbar.xml这个菜单文件</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">onOptionsItemSelected</span><span class="params">(MenuItem item)</span>&#123;</span><br><span class="line">    <span class="keyword">switch</span> (item.getItemId())&#123;</span><br><span class="line">        <span class="keyword">case</span> R.id.backup:</span><br><span class="line">            Toast.makeText(<span class="built_in">this</span>,<span class="string">&quot;You clicked Backup &quot;</span>,Toast.LENGTH_SHORT).show();</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> R.id.delete:</span><br><span class="line">            Toast.makeText(<span class="built_in">this</span>,<span class="string">&quot;You clicked Delete &quot;</span>,Toast.LENGTH_SHORT).show();</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> R.id.settings:</span><br><span class="line">            Toast.makeText(<span class="built_in">this</span>,<span class="string">&quot;You clicked Settings &quot;</span>,Toast.LENGTH_SHORT).show();</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 反射使item属性为never时使icon和title同时可见</span></span><br><span class="line"><span class="comment"> * */</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">onMenuOpened</span><span class="params">(<span class="type">int</span> featureId, Menu menu)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (menu != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (menu.getClass().getSimpleName().equalsIgnoreCase(<span class="string">&quot;MenuBuilder&quot;</span>)) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="type">Method</span> <span class="variable">method</span> <span class="operator">=</span> menu.getClass().getDeclaredMethod(<span class="string">&quot;setOptionalIconsVisible&quot;</span>, Boolean.TYPE);</span><br><span class="line">                method.setAccessible(<span class="literal">true</span>);</span><br><span class="line">                method.invoke(menu, <span class="literal">true</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">super</span>.onMenuOpened(featureId, menu);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h4 id="滑动菜单（右滑显示，如QQ）"><a href="#滑动菜单（右滑显示，如QQ）" class="headerlink" title="滑动菜单（右滑显示，如QQ）"></a>滑动菜单（右滑显示，如QQ）</h4><h5 id="DrawerLayout（抽屉，常用）"><a href="#DrawerLayout（抽屉，常用）" class="headerlink" title="DrawerLayout（抽屉，常用）"></a><code>DrawerLayout</code>（抽屉，常用）</h5><p>这个控件中允许有2个子布局（控件），第一个显示在外面，第二个为折叠起来，右滑展开，其中第二个控件中的<code>layout_gravity</code>是必须需要指定的，其中<code>left</code>表示菜单在左边，<code>start</code>表示会根据系统语言进行判断，如果系统语言是从左到右的，则滑动菜单在左边。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">androidx.drawerlayout.widget.DrawerLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">&quot;@+id/draw_layout&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">&quot;.MainActivity&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">FrameLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">androidx.appcompat.widget.Toolbar</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/toolbar&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;?attr/actionBarSize&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:background</span>=<span class="string">&quot;?attr/colorPrimary&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:theme</span>=<span class="string">&quot;@style/ThemeOverlay.AppCompat.Dark.ActionBar&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:popupTheme</span>=<span class="string">&quot;@style/ThemeOverlay.AppCompat.Light&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">FrameLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;300dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_gravity</span>=<span class="string">&quot;start&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:background</span>=<span class="string">&quot;#FFF&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;This is menu&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;30sp&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">androidx.drawerlayout.widget.DrawerLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p>为了让隐藏菜单更容易被触发，我们在<code>Toolbar</code>上加一个导航按钮，点击它也可以打开滑动菜单(防止用户不知道左滑能打开东西，参考QQ设计)。<strong>注:<code>HomeAsUp</code>默认为返回按钮，图标为箭头，这里就把这个按钮替换了图标和功能罢了。</strong><code>GravityCompat.START</code>和xml定义一样，xml布局里面在菜单中的子布局<code>android:layout_gravity=&quot;start&quot;</code>属性一样，还有<code>GravityCompat.END</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//使用ActionBar自带功能加按钮（上面使用了ToolBar替代了ActionBar，但实体还是ActionBar）      </span></span><br><span class="line"><span class="type">ActionBar</span> <span class="variable">actionBar</span> <span class="operator">=</span> getSupportActionBar()<span class="comment">//获取对象</span></span><br><span class="line">        <span class="keyword">if</span> (actionBar!=<span class="literal">null</span>)&#123;</span><br><span class="line">            actionBar.setDisplayHomeAsUpEnabled(<span class="literal">true</span>);<span class="comment">//导航按钮显示</span></span><br><span class="line">            actionBar.setHomeAsUpIndicator(R.drawable.ic_menu);<span class="comment">//设置导航按钮图标</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//onOptionsItemSelected方法中监听导航按钮，id如下</span></span><br><span class="line"><span class="keyword">case</span> android.R.id.home:</span><br><span class="line">                mDrawerLayout.openDrawer(GravityCompat.START);</span><br><span class="line">				<span class="comment">//使得滑动显示出来，传入一个Gravity参数，GravityCompat.START和xml定义一样</span></span><br><span class="line">                <span class="keyword">break</span>;</span><br></pre></td></tr></table></figure>



<h5 id="NavigationView优化滑动呼出菜单-自带免设计罢了-（包含图片圆形化库）"><a href="#NavigationView优化滑动呼出菜单-自带免设计罢了-（包含图片圆形化库）" class="headerlink" title="NavigationView优化滑动呼出菜单(自带免设计罢了)（包含图片圆形化库）"></a><code>NavigationView</code>优化滑动呼出菜单(自带免设计罢了)（包含图片圆形化库）</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">implementation<span class="string">&#x27;com.google.android.material:material:1.0.0&#x27;</span><span class="comment">//Design Support库（包含NavigationeView），现在默认生成</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">implementation<span class="string">&#x27;de.hdodenhof:circleimageview:3.0.1&#x27;</span><span class="comment">//一个开源库，轻松实现图片圆形化</span></span><br></pre></td></tr></table></figure>



<p>准备两个部分的东西，menu菜单（NavigationView中的选项菜单）和headerLayout（NavigationView中的头部布局）</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--menu--&gt;</span></span><br><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">menu</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">group</span> <span class="attr">android:checkableBehavior</span>=<span class="string">&quot;single&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--        group 代表一个组，checkableBehavior指定为single表示组内所有菜单项只能单选--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">item</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/nav_call&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:icon</span>=<span class="string">&quot;@drawable/nav_call&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:title</span>=<span class="string">&quot;Call&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--        菜单单项显示的文字--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">item</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/nav_friend&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:icon</span>=<span class="string">&quot;@drawable/nav_friend&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:title</span>=<span class="string">&quot;Friend&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">item</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/nav_location&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:icon</span>=<span class="string">&quot;@drawable/nav_location&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:title</span>=<span class="string">&quot;Location&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">item</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/nav_mail&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:icon</span>=<span class="string">&quot;@drawable/nav_mail&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:title</span>=<span class="string">&quot;Mail&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">item</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/nav_task&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:icon</span>=<span class="string">&quot;@drawable/nav_task&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:title</span>=<span class="string">&quot;Task&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">group</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">menu</span>&gt;</span></span><br></pre></td></tr></table></figure>



<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">//headerLayout</span><br><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">RelativeLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;180dp&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:padding</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:background</span>=<span class="string">&quot;?attr/colorPrimary&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">de.hdodenhof.circleimageview.CircleImageView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/icon_image&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;70dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;70dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:src</span>=<span class="string">&quot;@drawable/icon&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_centerInParent</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/username&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_alignParentBottom</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;wendy&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textColor</span>=<span class="string">&quot;#FFF&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;14sp&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/mail&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_above</span>=<span class="string">&quot;@id/username&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;1111@qq&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textColor</span>=<span class="string">&quot;#FFF&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;14sp&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">RelativeLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>



<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">com.google.android.material.navigation.NavigationView</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_gravity</span>=<span class="string">&quot;start&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>这里layout_gravity一定要有，不然会阻挡整个屏幕，toolbar会不见掉</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">      <span class="type">NavigationView</span> <span class="variable">navigationView</span> <span class="operator">=</span> findViewById(R.id.nav_view);</span><br><span class="line">      navigationView.setCheckedItem(R.id.nav_call);<span class="comment">//设置默认选中按钮</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//监听</span></span><br><span class="line">      navigationView.setNavigationItemSelectedListener(<span class="keyword">new</span> <span class="title class_">NavigationView</span>.OnNavigationItemSelectedListener() &#123;</span><br><span class="line">          <span class="meta">@Override</span></span><br><span class="line">          <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">onNavigationItemSelected</span><span class="params">(<span class="meta">@NonNull</span> MenuItem item)</span> &#123;</span><br><span class="line">              mDrawerLayout.closeDrawers();</span><br><span class="line">              <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;);</span><br></pre></td></tr></table></figure>



<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//点击事件</span></span><br><span class="line">nav_home = (NavigationView) findViewById(R.id.nav_home);</span><br><span class="line">      <span class="type">CardView</span> <span class="variable">cardView</span> <span class="operator">=</span> nav_home.getHeaderView(<span class="number">0</span>).findViewById(R.id.cv_exit);</span><br><span class="line">      cardView.setOnClickListener(<span class="keyword">new</span> <span class="title class_">View</span>.OnClickListener() &#123;</span><br><span class="line">          <span class="meta">@Override</span></span><br><span class="line">          <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View v)</span> &#123;</span><br><span class="line">              Toast.makeText(HomeActivity.<span class="built_in">this</span>, <span class="string">&quot;ddd&quot;</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;);</span><br></pre></td></tr></table></figure>





<h4 id="悬浮按钮和可交互提示"><a href="#悬浮按钮和可交互提示" class="headerlink" title="悬浮按钮和可交互提示"></a>悬浮按钮和可交互提示</h4><p>立面设计是Material Design中的一条重要设计思想，而悬浮按钮就是最具有代表性的立面设计了，这种按钮不属于主界面平面的一部分而是位于另外一个维度。同时我们也学习一种可交互式的提示。</p>
<h5 id="FloatingActionButton"><a href="#FloatingActionButton" class="headerlink" title="FloatingActionButton"></a><code>FloatingActionButton</code></h5><p><code> android:elevation=&quot;100dp&quot;</code>设置悬浮高度，下面有阴影</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">com.google.android.material.floatingactionbutton.FloatingActionButton</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">&quot;@+id/fab&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_gravity</span>=<span class="string">&quot;bottom|end&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_margin</span>=<span class="string">&quot;16dp&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:elevation</span>=<span class="string">&quot;100dp&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:src</span>=<span class="string">&quot;@drawable/ic_done&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<p>这个控件监听方法同平台button</p>
<h5 id="Snackbar可交互提示"><a href="#Snackbar可交互提示" class="headerlink" title="Snackbar可交互提示"></a><code>Snackbar</code>可交互提示</h5><p>首先明确<code>Snackbar</code>和<code>Toast</code>有各自的应用场景，<code>Snackbark</code>可以给用户提供了一个可交互按钮，给用户提供一些额外操作。基本同<code>Toast</code>，toast只是为了发出一个提示给用户罢了，有些如删除数据的场景就可以用这种带交互的好，可以允许用户取消删除</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">floatingActionButton.setOnClickListener(<span class="keyword">new</span> <span class="title class_">View</span>.OnClickListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View v)</span> &#123;</span><br><span class="line">                Snackbar.make(v,<span class="string">&quot;toast&quot;</span>,Snackbar.LENGTH_SHORT)</span><br><span class="line">                        .setAction(<span class="string">&quot;Undo&quot;</span>, <span class="keyword">new</span> <span class="title class_">View</span>.OnClickListener() &#123;</span><br><span class="line">                            <span class="meta">@Override</span></span><br><span class="line">                            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View v)</span> &#123;</span><br><span class="line">                                Toast.makeText(MainActivity.<span class="built_in">this</span>, <span class="string">&quot;取消&quot;</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;).show();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br></pre></td></tr></table></figure>



<h5 id="CoordinatorLayout布局"><a href="#CoordinatorLayout布局" class="headerlink" title="CoordinatorLayout布局"></a><code>CoordinatorLayout</code>布局</h5><p><code>CoordinatorLayout</code>可以说是加强版的<code>FrameLayout</code>（帧布局），也是Design Support库提供的，它在普通情况下和<code>FrameLayout</code>作用基本一致。不一样的是<code>CoordinatorLayout</code>可以监听其子控件的各种事件，然后自动帮助我们做出最为合理的响应。</p>
<p>举个例子，刚刚弹出来的Snackbar提示把悬浮按钮遮挡住了，这时让CoordinatorLayout监听到Snackbar的弹出事件，它就会自动让FloatingActionButton向上偏移。</p>
<p>直接在代码中将<code>FrameLayout</code>替换一下就可以</p>
<h4 id="卡片式布局（包含Glide库）"><a href="#卡片式布局（包含Glide库）" class="headerlink" title="卡片式布局（包含Glide库）"></a>卡片式布局（包含Glide库）</h4><h5 id="CardView（类FrameLayout）"><a href="#CardView（类FrameLayout）" class="headerlink" title="CardView（类FrameLayout）"></a><code>CardView</code>（类<code>FrameLayout</code>）</h5><p>CardView是实现卡片上布局的重要控件。它实际上也是一个FrameLayout，只是额外提供了圆角和阴影的效果，看上去会有立体的感觉。</p>
<p>1、cardBackgroundColor 设置背景色</p>
<p>CardView是View的子类，View一般使用Background设置背景色，为什么还要单独提取出一个属性让我们来设置背景色呢？</p>
<p>为了实现阴影效果，内部已经消耗掉了 Background 属性</p>
<p>2、cardCornerRadius 设置圆角半径</p>
<p>3、contentPadding 设置内部padding</p>
<p>View提供了padding设置间距，为什么还要单独提取出一个属性？</p>
<p>相同的原因，内部消耗掉了 padding 属性</p>
<p>4、cardElevation 设置阴影大小</p>
<p>5、cardUseCompatPadding</p>
<p>默认为false，用于5.0及以上，true则添加额外的 padding 绘制阴影</p>
<p>6、cardPreventCornerOverlap</p>
<p>默认为true，用于5.0及以下，添加额外的 padding，防止内容和圆角重叠</p>
<p><strong>Glide</strong>是一个超级强大的图片加载库，可以加载本地图片、网络图片、gif图片，甚至本地视频。而且Glide的用法也很简单，只用一行代码我们会在下面进行设置。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">implementation<span class="string">&#x27;com.github.bumptech.glide:glide:4.9.0&#x27;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">/*直接按照提示用最新的库，库版本过低还未迁移到AndroidX，会有警告，低版本在gradle.properties</span></span><br><span class="line"><span class="comment">    加android.enableJetifier=true*/</span></span><br></pre></td></tr></table></figure>



<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Glide.with(context)</span><br><span class="line">                .load(path.toString())</span><br><span class="line">                .error(R.mipmap.menu_cancellation)<span class="comment">//图片加载失败后，显示的图片</span></span><br><span class="line">                .diskCacheStrategy(DiskCacheStrategy.RESULT) <span class="comment">//缓存图片</span></span><br><span class="line">                .into(imageView);</span><br></pre></td></tr></table></figure>



<h5 id="AppBarLayout解决CoordinatorLayou默认左上角放置重叠问题"><a href="#AppBarLayout解决CoordinatorLayou默认左上角放置重叠问题" class="headerlink" title="AppBarLayout解决CoordinatorLayou默认左上角放置重叠问题"></a><code>AppBarLayout</code>解决<code>CoordinatorLayou</code>默认左上角放置重叠问题</h5><p>运行后我们发现，先前的<code>Toolbar</code>被遮挡了，这是因为<code>CoordinatorLayou</code>是和<code>FrameLayout</code>一样，在没有进行明确定位时，默认都会摆放在布局的左上角，所以产生了遮挡。那除了对<code>RecyclerView</code>进行偏移，我们还可以借助Design Support库中提供的另外一个工具——<code>AppBarLayout</code>来解决遮挡。**<code>AppBarLayout</code>实际上是一个垂直方向的<code>LinearLayout</code>**，它在内部做了很多滚动事件的封装，并应用了一些Material Design的设计理念。<code>AppBarLayout</code>又必须是<code>CoordinatorLayout</code>的子布局</p>
<p>包住冲突事件</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">com.google.android.material.appbar.AppBarLayout</span></span></span><br><span class="line"><span class="tag"></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span>&gt;</span></span><br><span class="line">        </span><br><span class="line"><span class="tag">&lt;<span class="name">androidx.appcompat.widget.Toolbar</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">&quot;@+id/toolbar&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;?attr/actionBarSize&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:background</span>=<span class="string">&quot;?attr/colorPrimary&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:theme</span>=<span class="string">&quot;@style/ThemeOverlay.AppCompat.Dark.ActionBar&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:popupTheme</span>=<span class="string">&quot;@style/ThemeOverlay.AppCompat.Light&quot;</span>/&gt;</span></span><br><span class="line">        </span><br><span class="line"><span class="tag">&lt;/<span class="name">com.google.android.material.appbar.AppBarLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p>然后再另外给**<code>RecyclerView</code>**指定一个布局行为</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app:layout_behavior=<span class="string">&quot;@string/appbar_scrolling_view_behavior&quot;</span></span><br></pre></td></tr></table></figure>

<p>运行看效果</p>
<p>那现在我们只是用AppBarLayout解决了遮挡问题，那应用了一些Material Design的设计理念是怎么体现的呢？其实这时RecyclerView已经将滚动事件通知了AppBarLayout，但是我们还没有进行处理，我们在<strong>Toolbar</strong>添加以下代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app:layout_scrollFlags=<span class="string">&quot;scroll|enterAlways|snap&quot;</span></span><br></pre></td></tr></table></figure>

<p><code>scroll</code>表示当<code>RecyclerView</code>向上滚动时，<code>Toolbar</code>会跟着向上滚动并隐藏；<code>enterAlways</code>表示当<code>RecyclerView</code>向下滚动时，<code>Toolbar</code>会跟着向下滚动并重新显示。<code>snap</code>表示<code>Toolbar</code>还没有完全隐藏或显示的时候，会根据当前滚动距离，自动选择是隐藏还是显示。运行看一下。</p>
<h4 id="下拉刷新"><a href="#下拉刷新" class="headerlink" title="下拉刷新"></a>下拉刷新</h4><h5 id="swiperefreshlayout"><a href="#swiperefreshlayout" class="headerlink" title="swiperefreshlayout"></a><code>swiperefreshlayout</code></h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">implementation <span class="string">&quot;androidx.swiperefreshlayout:swiperefreshlayout:1.1.0&quot;</span></span><br></pre></td></tr></table></figure>

<p>包在<code>RecyclerView</code>外面使用，这时候<code>RecyclerView</code>添加的滚动行为要放到刷新控件中，不然刷新控件不生效，会被挡住</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">mSwipeRefreshLayout = findViewById(R.id.refresh);</span><br><span class="line">        mSwipeRefreshLayout.setColorSchemeResources(R.color.black);</span><br><span class="line">        mSwipeRefreshLayout.setOnRefreshListener(<span class="keyword">new</span> <span class="title class_">SwipeRefreshLayout</span>.OnRefreshListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onRefresh</span><span class="params">()</span> &#123;</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">Thread</span>(<span class="keyword">new</span> <span class="title class_">Runnable</span>() &#123;</span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">                        <span class="keyword">try</span> &#123;</span><br><span class="line">                            Thread.sleep(<span class="number">2000</span>);</span><br><span class="line">                        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">                        &#125;</span><br><span class="line">                        runOnUiThread(<span class="keyword">new</span> <span class="title class_">Runnable</span>() &#123;</span><br><span class="line">                            <span class="meta">@Override</span></span><br><span class="line">                            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">                                initFruits();</span><br><span class="line">                                adapter.notifyDataSetChanged();</span><br><span class="line">                                mSwipeRefreshLayout.setRefreshing(<span class="literal">false</span>);</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;).start();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br></pre></td></tr></table></figure>



<h4 id="可折叠标题栏"><a href="#可折叠标题栏" class="headerlink" title="可折叠标题栏"></a>可折叠标题栏</h4><h5 id="CollapsingToolbarLayout"><a href="#CollapsingToolbarLayout" class="headerlink" title="CollapsingToolbarLayout"></a><code>CollapsingToolbarLayout</code></h5><p>顾名思义，<code>CollapsingToolbarLayout</code>是一个作用于<code>Toolbar</code>基础之上的布局，被限定只能作为<code>AppBarLayout</code>的直接子布局来使用，而<code>AppBarLayout</code>又必须是<code>CoordinatorLayout</code>的子布局。</p>
<p><strong>充分利用系统状态栏空间</strong></p>
<p><code>android:fitsSystemWindows=&quot;true&quot;</code></p>
<p>因为我们现在写的是嵌套结构，所以为了实现这种效果，我们需要分别在<code>CoordinatorLayout</code>、<code>AppBarLayout</code>和<code>CollapsingToolbarLayout</code>设置其<code>android:fitsSystemWindows</code>属性为<code>ture</code>，就表示该控件ImageView会出现在系统状态栏上。除了这些我们还要将状态栏的颜色去设置成透明色才行。具体怎么实现大家有兴趣的可以去看书里的具体做法。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">Observable.create(<span class="keyword">new</span> <span class="title class_">ObservableOnSubscribe</span>&lt;String&gt;() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">subscribe</span><span class="params">(ObservableEmitter&lt;String&gt; emitter)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        emitter.onNext(<span class="string">&quot;Hello&quot;</span>);</span><br><span class="line">        emitter.onComplete();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">.map(<span class="keyword">new</span> <span class="title class_">Function</span>&lt;String, String&gt;() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">apply</span><span class="params">(String s)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">// 对发射的字符串进行转换，这里简单地在字符串后面加上 &quot; RxJava&quot;</span></span><br><span class="line">        <span class="keyword">return</span> s + <span class="string">&quot; RxJava&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">.subscribe(<span class="keyword">new</span> <span class="title class_">Observer</span>&lt;String&gt;() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onSubscribe</span><span class="params">(Disposable d)</span> &#123;</span><br><span class="line">        <span class="comment">// 订阅时的操作</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onNext</span><span class="params">(String result)</span> &#123;</span><br><span class="line">        <span class="comment">// 接收到转换后的事件，result 是 &quot;Hello RxJava&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onError</span><span class="params">(Throwable e)</span> &#123;</span><br><span class="line">        <span class="comment">// 发生错误时的操作</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onComplete</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// 完成时的操作</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>







<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.derry.rxjavastudy.simple01;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.appcompat.app.AppCompatActivity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.app.ProgressDialog;</span><br><span class="line"><span class="keyword">import</span> android.graphics.Bitmap;</span><br><span class="line"><span class="keyword">import</span> android.graphics.BitmapFactory;</span><br><span class="line"><span class="keyword">import</span> android.graphics.Canvas;</span><br><span class="line"><span class="keyword">import</span> android.graphics.Color;</span><br><span class="line"><span class="keyword">import</span> android.graphics.Paint;</span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> android.util.Log;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"><span class="keyword">import</span> android.widget.ImageView;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.derry.rxjavastudy.R;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.net.HttpURLConnection;</span><br><span class="line"><span class="keyword">import</span> java.net.URL;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> io.reactivex.Observable;</span><br><span class="line"><span class="keyword">import</span> io.reactivex.Observer;</span><br><span class="line"><span class="keyword">import</span> io.reactivex.android.schedulers.AndroidSchedulers;</span><br><span class="line"><span class="keyword">import</span> io.reactivex.annotations.NonNull;</span><br><span class="line"><span class="keyword">import</span> io.reactivex.disposables.Disposable;</span><br><span class="line"><span class="keyword">import</span> io.reactivex.functions.Consumer;</span><br><span class="line"><span class="keyword">import</span> io.reactivex.functions.Function;</span><br><span class="line"><span class="keyword">import</span> io.reactivex.schedulers.Schedulers;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainActivity</span> <span class="keyword">extends</span> <span class="title class_">AppCompatActivity</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 打印logcat日志的标签</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">TAG</span> <span class="operator">=</span> MainActivity.class.getSimpleName();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 网络图片的链接地址</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="type">String</span> <span class="variable">PATH</span> <span class="operator">=</span> <span class="string">&quot;http://pic1.win4000.com/wallpaper/c/53cdd1f7c1f21.jpg&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 弹出加载框（正在加载中...）</span></span><br><span class="line">    <span class="keyword">private</span> ProgressDialog progressDialog;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ImageView控件，用来显示结果图像</span></span><br><span class="line">    <span class="keyword">private</span> ImageView image;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line"></span><br><span class="line">        image = findViewById(R.id.image);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 图片显示加载功能</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> view</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">showImageAction</span><span class="params">(View view)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 如果我们采用传统方式 完成此功能，每位开发者的思想都不一样 （思维不同 ）</span></span><br><span class="line"><span class="comment">         * A同学 线程池</span></span><br><span class="line"><span class="comment">         * B同学 new Thread + Handler</span></span><br><span class="line"><span class="comment">         * C同学 xxx</span></span><br><span class="line"><span class="comment">         * D同学 古老的方式</span></span><br><span class="line"><span class="comment">         * ....</span></span><br><span class="line"><span class="comment">         *</span></span><br><span class="line"><span class="comment">         * 如果采用传统开发方式，我们后面的开发者接手前面开发者的代码，就很痛苦（弊端）</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * TODO　RX思维</span></span><br><span class="line"><span class="comment">         *</span></span><br><span class="line"><span class="comment">         * 起点 和 终点</span></span><br><span class="line"><span class="comment">         *</span></span><br><span class="line"><span class="comment">         * RxJava RXJS RxXXX  RX系列框架 为什么把所有函数都成为操作符 因为我们的函数要去操作  从起点 流向 终点7</span></span><br><span class="line"><span class="comment">         *</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// TODO 第二步</span></span><br><span class="line">        <span class="comment">// 起点</span></span><br><span class="line">        Observable.just(PATH)</span><br><span class="line"></span><br><span class="line">                <span class="comment">// TODO 第三步</span></span><br><span class="line">                <span class="comment">// 需求：001 图片下载需求  PATH ---》 Bitmap</span></span><br><span class="line">                .map(<span class="keyword">new</span> <span class="title class_">Function</span>&lt;String, Bitmap&gt;() &#123;</span><br><span class="line">                    <span class="meta">@NonNull</span></span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="keyword">public</span> Bitmap <span class="title function_">apply</span><span class="params">(<span class="meta">@NonNull</span> String path)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">                        <span class="keyword">try</span> &#123;</span><br><span class="line"><span class="comment">//                            Thread.sleep(2000); // 睡眠2秒钟</span></span><br><span class="line"></span><br><span class="line">                            <span class="type">URL</span> <span class="variable">url</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">URL</span>(path);</span><br><span class="line">                            <span class="type">HttpURLConnection</span> <span class="variable">httpURLConnection</span> <span class="operator">=</span> (HttpURLConnection) url.openConnection();</span><br><span class="line">                            httpURLConnection.setConnectTimeout(<span class="number">5000</span>); <span class="comment">// 设置请求连接时长 5秒</span></span><br><span class="line">                            <span class="type">int</span> <span class="variable">responseCode</span> <span class="operator">=</span> httpURLConnection.getResponseCode(); <span class="comment">// 才开始 request    拿到服务器的响应  200成功  404有问题 ...</span></span><br><span class="line">                            <span class="keyword">if</span> (responseCode == HttpURLConnection.HTTP_OK) &#123;</span><br><span class="line">                                <span class="type">InputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> httpURLConnection.getInputStream();</span><br><span class="line">                                <span class="type">Bitmap</span> <span class="variable">bitmap</span> <span class="operator">=</span> BitmapFactory.decodeStream(inputStream);</span><br><span class="line">                                <span class="keyword">return</span> bitmap;</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                            e.printStackTrace();</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;)</span><br><span class="line"></span><br><span class="line">                <span class="comment">// 需求：002 加水印</span></span><br><span class="line">                .map(<span class="keyword">new</span> <span class="title class_">Function</span>&lt;Bitmap, Bitmap&gt;() &#123;</span><br><span class="line">                    <span class="meta">@NonNull</span></span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="keyword">public</span> Bitmap <span class="title function_">apply</span><span class="params">(<span class="meta">@NonNull</span> Bitmap bitmap)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">                        <span class="type">Paint</span> <span class="variable">paint</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Paint</span>();</span><br><span class="line">                        paint.setColor(Color.RED);</span><br><span class="line">                        paint.setTextSize(<span class="number">88</span>);</span><br><span class="line">                        <span class="type">Bitmap</span> <span class="variable">shuiyingBitmap</span> <span class="operator">=</span> drawTextToBitmap(bitmap, <span class="string">&quot;韭菜盖饭&quot;</span>, paint, <span class="number">88</span>, <span class="number">88</span>);</span><br><span class="line">                        <span class="keyword">return</span> shuiyingBitmap;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;)</span><br><span class="line"></span><br><span class="line">                <span class="comment">// 需求：003 日志记录需求</span></span><br><span class="line">                .map(<span class="keyword">new</span> <span class="title class_">Function</span>&lt;Bitmap, Bitmap&gt;() &#123;</span><br><span class="line">                    <span class="meta">@NonNull</span></span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="keyword">public</span> Bitmap <span class="title function_">apply</span><span class="params">(<span class="meta">@NonNull</span> Bitmap bitmap)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">                        Log.e(TAG, <span class="string">&quot;什么时候下载了图片 apply: &quot;</span> + System.currentTimeMillis() );</span><br><span class="line">                        <span class="keyword">return</span> bitmap;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                <span class="comment">// 给上面的分配异步线程（图片下载操作）</span></span><br><span class="line">                .subscribeOn(Schedulers.io())</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                <span class="comment">// 终点分配 Android主线程</span></span><br><span class="line">                .observeOn(AndroidSchedulers.mainThread())</span><br><span class="line"></span><br><span class="line">                <span class="comment">// TODO 导火索 点燃了  开始执行</span></span><br><span class="line">                <span class="comment">// 关联：观察者设计模式   关联 起点 和 终点  ==  订阅</span></span><br><span class="line">                .subscribe(</span><br><span class="line"></span><br><span class="line">                        <span class="comment">// 终点</span></span><br><span class="line">                        <span class="keyword">new</span> <span class="title class_">Observer</span>&lt;Bitmap&gt;() &#123;</span><br><span class="line"></span><br><span class="line">                            <span class="comment">// TODO 第一步</span></span><br><span class="line">                            <span class="comment">// 订阅成功</span></span><br><span class="line">                            <span class="meta">@Override</span></span><br><span class="line">                            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onSubscribe</span><span class="params">(Disposable d)</span> &#123;</span><br><span class="line">                                <span class="comment">// 显示加载框</span></span><br><span class="line">                                progressDialog = <span class="keyword">new</span> <span class="title class_">ProgressDialog</span>(MainActivity.<span class="built_in">this</span>);</span><br><span class="line">                                progressDialog.setTitle(<span class="string">&quot;RXJava Derry run 正在加载中..&quot;</span>);</span><br><span class="line">                                progressDialog.show();</span><br><span class="line">                            &#125;</span><br><span class="line"></span><br><span class="line">                            <span class="comment">// TODO 第四步 显示图片   水印的Bitmap</span></span><br><span class="line">                            <span class="comment">// 上一层给我的响应</span></span><br><span class="line">                            <span class="meta">@Override</span></span><br><span class="line">                            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onNext</span><span class="params">(Bitmap bitmap)</span> &#123;</span><br><span class="line">                                image.setImageBitmap(bitmap); <span class="comment">// 显示到控件上</span></span><br><span class="line">                            &#125;</span><br><span class="line"></span><br><span class="line">                            <span class="comment">// 链条思维发生了异常</span></span><br><span class="line">                            <span class="meta">@Override</span></span><br><span class="line">                            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onError</span><span class="params">(Throwable e)</span> &#123;</span><br><span class="line"></span><br><span class="line">                            &#125;</span><br><span class="line"></span><br><span class="line">                            <span class="comment">// TODO 第五步 整个链条思维全部结束</span></span><br><span class="line">                            <span class="comment">// 整个链条全部结束</span></span><br><span class="line">                            <span class="meta">@Override</span></span><br><span class="line">                            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onComplete</span><span class="params">()</span> &#123;</span><br><span class="line">                                <span class="comment">// 隐藏加载框</span></span><br><span class="line">                                <span class="keyword">if</span> (progressDialog != <span class="literal">null</span>)</span><br><span class="line">                                    progressDialog.dismiss();</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 图片上绘制文字 加水印</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Bitmap <span class="title function_">drawTextToBitmap</span><span class="params">(Bitmap bitmap, String text, Paint paint, <span class="type">int</span> paddingLeft, <span class="type">int</span> paddingTop)</span> &#123;</span><br><span class="line">        Bitmap.<span class="type">Config</span> <span class="variable">bitmapConfig</span> <span class="operator">=</span> bitmap.getConfig();</span><br><span class="line"></span><br><span class="line">        paint.setDither(<span class="literal">true</span>); <span class="comment">// 获取跟清晰的图像采样</span></span><br><span class="line">        paint.setFilterBitmap(<span class="literal">true</span>);<span class="comment">// 过滤一些</span></span><br><span class="line">        <span class="keyword">if</span> (bitmapConfig == <span class="literal">null</span>) &#123;</span><br><span class="line">            bitmapConfig = Bitmap.Config.ARGB_8888;</span><br><span class="line">        &#125;</span><br><span class="line">        bitmap = bitmap.copy(bitmapConfig, <span class="literal">true</span>);</span><br><span class="line">        <span class="type">Canvas</span> <span class="variable">canvas</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Canvas</span>(bitmap);</span><br><span class="line"></span><br><span class="line">        canvas.drawText(text, paddingLeft, paddingTop, paint);</span><br><span class="line">        <span class="keyword">return</span> bitmap;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 常用操作符</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> view</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">action</span><span class="params">(View view)</span> &#123;</span><br><span class="line"></span><br><span class="line">        String[] strings = &#123;<span class="string">&quot;AAA&quot;</span>, <span class="string">&quot;BBB&quot;</span>, <span class="string">&quot;CCC&quot;</span>&#125;;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// for</span></span><br><span class="line">        <span class="comment">/*for (String string : strings) &#123;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        &#125;*/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 起点</span></span><br><span class="line">        Observable.fromArray(strings)</span><br><span class="line"></span><br><span class="line">                <span class="comment">// 订阅：起点 和 终点</span></span><br><span class="line">                .subscribe(<span class="keyword">new</span> <span class="title class_">Consumer</span>&lt;String&gt;() &#123;</span><br><span class="line"></span><br><span class="line">                    <span class="comment">// 终点</span></span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">accept</span><span class="params">(<span class="meta">@NonNull</span> String s)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">                        Log.d(TAG, <span class="string">&quot;accept: &quot;</span> + s);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>





<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_50709355/article/details/127176797?ops_request_misc=%7B%22request_id%22:%22170123531316800184156037%22,%22scm%22:%2220140713.130102334..%22%7D&request_id=170123531316800184156037&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~blog~top_positive~default-1-127176797-null-null.nonecase&utm_term=rxjava&spm=1018.2226.3001.4450">RXJAVA从入门到精通-CSDN博客</a></p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://www.wuleizhenshang.love">无泪真伤</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://www.wuleizhenshang.love/2022/02/24/%E5%AE%89%E5%8D%93%E5%BC%80%E5%8F%91%E7%AC%94%E8%AE%B0/">https://www.wuleizhenshang.love/2022/02/24/%E5%AE%89%E5%8D%93%E5%BC%80%E5%8F%91%E7%AC%94%E8%AE%B0/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://www.wuleizhenshang.love" target="_blank">Blog-无泪真伤</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E5%BC%80%E5%8F%91%E5%B8%B8%E7%94%A8/">开发常用</a></div><div class="post_share"><div class="social-share" data-image="https://pic.imgdb.cn/item/65dd5b1c9f345e8d035100ba.jpg" data-sites="wechat,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-full"><a href="/2023/10/11/%E9%9D%9E%E5%85%B3%E7%B3%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E5%BA%93%EF%BC%88%E9%80%89%E4%BF%AE%E8%AF%BE%EF%BC%89/" title="非关系型数据库（选修课）"><img class="cover" src="https://pic.imgdb.cn/item/6558704bc458853aef160963.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">非关系型数据库（选修课）</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2023/11/18/maven/" title="Maven的使用"><img class="cover" src="https://pic.imgdb.cn/item/65587027c458853aef156fb1.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-11-18</div><div class="title">Maven的使用</div></div></a></div><div><a href="/2024/02/24/Git%EF%BC%88B%E7%AB%99%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%89/" title="Git（B站学习笔记）"><img class="cover" src="https://pic.imgdb.cn/item/6559956bc458853aefc5409e.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-02-24</div><div class="title">Git（B站学习笔记）</div></div></a></div><div><a href="/2023/11/18/%E7%AE%97%E6%B3%95/" title="算法"><img class="cover" src="https://pic.imgdb.cn/item/65587081c458853aef16f416.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-11-18</div><div class="title">算法</div></div></a></div><div><a href="/2024/02/24/Kotlin%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" title="Kotlin学习笔记"><img class="cover" src="https://pic.imgdb.cn/item/65d9e5d59f345e8d03230185.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-02-24</div><div class="title">Kotlin学习笔记</div></div></a></div><div><a href="/2024/05/19/%E5%AF%BC%E5%85%A5%E9%A1%B9%E7%9B%AE%E5%92%8C%E7%8E%AF%E5%A2%83%E8%AF%B4%E6%98%8E/" title="Android导入项目及环境说明"><img class="cover" src="https://pic.imgdb.cn/item/664a0a9ad9c307b7e97d01c6.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-05-19</div><div class="title">Android导入项目及环境说明</div></div></a></div><div><a href="/2024/05/19/Android%E6%A8%A1%E5%9D%97%E5%8C%96%E5%92%8C%E7%BB%84%E4%BB%B6%E5%8C%96/" title="Android模块化开发和组件化开发"><img class="cover" src="https://pic.imgdb.cn/item/664a0d30d9c307b7e980f34a.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-05-19</div><div class="title">Android模块化开发和组件化开发</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://pic.imgdb.cn/item/65582252c458853aeff7c6f5.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">无泪真伤</div><div class="author-info__description">不会爱，不愿爱！</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">13</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">6</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">4</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/wuleizhenshang"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">本人新人一枚！写博客知识记录个人学习经历，有错误请见谅！</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AE%89%E5%8D%93%E5%BC%80%E5%8F%91%E7%AC%94%E8%AE%B0"><span class="toc-number">1.</span> <span class="toc-text">安卓开发笔记</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%80%E5%8F%91%E5%BF%85%E5%81%9A"><span class="toc-number">1.1.</span> <span class="toc-text">开发必做</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#themes%E8%AE%BE%E7%BD%AE%E7%9B%B8%E5%85%B3"><span class="toc-number">1.1.0.0.1.</span> <span class="toc-text">themes设置相关</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%B2%89%E4%BE%B5%E5%BC%8F%E4%BD%93%E9%AA%8C"><span class="toc-number">1.1.0.0.2.</span> <span class="toc-text">沉侵式体验</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%80%8F%E6%98%8E%E7%8A%B6%E6%80%81%E6%A0%8F"><span class="toc-number">1.1.0.0.3.</span> <span class="toc-text">透明状态栏</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%9A%90%E8%97%8FActionBar"><span class="toc-number">1.1.0.0.4.</span> <span class="toc-text">隐藏ActionBar</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%9A%90%E8%97%8F%E5%AF%BC%E8%88%AA%E6%A0%8F"><span class="toc-number">1.1.0.1.</span> <span class="toc-text">隐藏导航栏</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BE%9D%E8%B5%96%E8%AE%BE%E7%BD%AE"><span class="toc-number">1.1.0.2.</span> <span class="toc-text">依赖设置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%A8%E5%B1%8F%E6%89%8B%E5%8A%BF"><span class="toc-number">1.1.0.3.</span> <span class="toc-text">全屏手势</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E5%9B%BE%E6%A0%87"><span class="toc-number">1.1.0.3.1.</span> <span class="toc-text">设置图标</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E5%A4%96%E9%83%A8%E5%AD%97%E4%BD%93"><span class="toc-number">1.1.0.3.2.</span> <span class="toc-text">使用外部字体</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E5%86%85%E7%BD%AE%E7%BB%98%E5%88%B6%E7%9F%A2%E9%87%8F%E5%9B%BE"><span class="toc-number">1.1.0.3.3.</span> <span class="toc-text">使用内置绘制矢量图</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8F%8C%E5%87%BB%E9%80%80%E5%87%BA"><span class="toc-number">1.1.0.3.4.</span> <span class="toc-text">双击退出</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82"><span class="toc-number">1.1.1.</span> <span class="toc-text">网络请求</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%83%E5%B1%80"><span class="toc-number">1.1.2.</span> <span class="toc-text">布局</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%A7%E4%BB%B6"><span class="toc-number">1.1.3.</span> <span class="toc-text">控件</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E6%8E%A7%E4%BB%B6%E5%8F%AF%E8%A7%81%E4%B8%8E%E4%B8%8D%E5%8F%AF%E8%A7%81"><span class="toc-number">1.1.3.1.</span> <span class="toc-text">设置控件可见与不可见</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E8%83%8C%E6%99%AF"><span class="toc-number">1.1.3.2.</span> <span class="toc-text">自定义背景</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Dialog%EF%BC%88%E5%AF%B9%E8%AF%9D%E6%A1%86%EF%BC%89"><span class="toc-number">1.1.3.3.</span> <span class="toc-text">Dialog（对话框）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#TextView"><span class="toc-number">1.1.3.4.</span> <span class="toc-text">TextView</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Edittext"><span class="toc-number">1.1.3.5.</span> <span class="toc-text">Edittext</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ImageView"><span class="toc-number">1.1.3.6.</span> <span class="toc-text">ImageView</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%87%A0%E7%A7%8DButton"><span class="toc-number">1.1.3.7.</span> <span class="toc-text">几种Button</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%87%E8%83%BDRecyclerView"><span class="toc-number">1.1.3.8.</span> <span class="toc-text">万能RecyclerView</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DatePicker-%E6%97%B6%E9%97%B4%E9%80%89%E6%8B%A9%E5%99%A8"><span class="toc-number">1.1.3.9.</span> <span class="toc-text">DatePicker(时间选择器)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#TabLayout"><span class="toc-number">1.1.3.10.</span> <span class="toc-text">TabLayout</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ProgressBar"><span class="toc-number">1.1.3.11.</span> <span class="toc-text">ProgressBar</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Spinner%EF%BC%88%E4%B8%8B%E6%8B%89%E9%80%89%E6%8B%A9%E6%A1%86%EF%BC%8CAndroid%E5%BE%AE%E8%B0%83%E5%99%A8%EF%BC%89"><span class="toc-number">1.1.3.12.</span> <span class="toc-text">Spinner（下拉选择框，Android微调器）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#NestedScrollView%E5%92%8CScrollView"><span class="toc-number">1.1.3.13.</span> <span class="toc-text">NestedScrollView和ScrollView</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Activity%E7%9B%B8%E5%85%B3"><span class="toc-number">1.1.4.</span> <span class="toc-text">Activity相关</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E7%9B%B8%E5%85%B3"><span class="toc-number">1.1.4.1.</span> <span class="toc-text">生命周期相关</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%B7%B3%E8%BD%AC%E4%BC%A0%E5%80%BC"><span class="toc-number">1.1.4.2.</span> <span class="toc-text">跳转传值</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Fragment%E7%9B%B8%E5%85%B3"><span class="toc-number">1.1.5.</span> <span class="toc-text">Fragment相关</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Service%E6%9C%8D%E5%8A%A1"><span class="toc-number">1.1.6.</span> <span class="toc-text">Service服务</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SharedPreferences"><span class="toc-number">1.1.7.</span> <span class="toc-text">SharedPreferences</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SQLite"><span class="toc-number">1.1.8.</span> <span class="toc-text">SQLite</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#LitePal%E5%BC%80%E6%BA%90%E5%BA%93"><span class="toc-number">1.1.9.</span> <span class="toc-text">LitePal开源库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8A%A8%E7%94%BB"><span class="toc-number">1.1.10.</span> <span class="toc-text">动画</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B8%A7%E5%8A%A8%E7%94%BB"><span class="toc-number">1.1.10.1.</span> <span class="toc-text">帧动画</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A1%A5%E9%97%B4%E5%8A%A8%E7%94%BB"><span class="toc-number">1.1.10.2.</span> <span class="toc-text">补间动画</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B1%9E%E6%80%A7%E5%8A%A8%E7%94%BB%EF%BC%88%E8%A1%A5%E9%97%B4%E5%8A%A8%E7%94%BB%E4%BC%98%E5%8C%96%E7%89%88%EF%BC%89"><span class="toc-number">1.1.10.3.</span> <span class="toc-text">属性动画（补间动画优化版）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Handler%E5%92%8CRunable"><span class="toc-number">1.1.11.</span> <span class="toc-text">Handler和Runable</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%90%AF%E5%8A%A8%E9%A1%B5"><span class="toc-number">1.1.11.1.</span> <span class="toc-text">启动页</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Handler%E6%B6%88%E6%81%AF%E6%9C%BA%E5%88%B6"><span class="toc-number">1.1.11.2.</span> <span class="toc-text">Handler消息机制</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Material-Design%E8%AE%BE%E8%AE%A1%E8%AF%AD%E8%A8%80"><span class="toc-number">1.1.12.</span> <span class="toc-text">Material Design设计语言</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Toolbar-%E9%A1%B6%E9%83%A8%E5%AF%BC%E8%88%AA%EF%BC%8C%E5%B8%B8%E7%94%A8"><span class="toc-number">1.1.12.1.</span> <span class="toc-text">Toolbar(顶部导航，常用)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%BB%91%E5%8A%A8%E8%8F%9C%E5%8D%95%EF%BC%88%E5%8F%B3%E6%BB%91%E6%98%BE%E7%A4%BA%EF%BC%8C%E5%A6%82QQ%EF%BC%89"><span class="toc-number">1.1.12.2.</span> <span class="toc-text">滑动菜单（右滑显示，如QQ）</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#DrawerLayout%EF%BC%88%E6%8A%BD%E5%B1%89%EF%BC%8C%E5%B8%B8%E7%94%A8%EF%BC%89"><span class="toc-number">1.1.12.2.1.</span> <span class="toc-text">DrawerLayout（抽屉，常用）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#NavigationView%E4%BC%98%E5%8C%96%E6%BB%91%E5%8A%A8%E5%91%BC%E5%87%BA%E8%8F%9C%E5%8D%95-%E8%87%AA%E5%B8%A6%E5%85%8D%E8%AE%BE%E8%AE%A1%E7%BD%A2%E4%BA%86-%EF%BC%88%E5%8C%85%E5%90%AB%E5%9B%BE%E7%89%87%E5%9C%86%E5%BD%A2%E5%8C%96%E5%BA%93%EF%BC%89"><span class="toc-number">1.1.12.2.2.</span> <span class="toc-text">NavigationView优化滑动呼出菜单(自带免设计罢了)（包含图片圆形化库）</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%82%AC%E6%B5%AE%E6%8C%89%E9%92%AE%E5%92%8C%E5%8F%AF%E4%BA%A4%E4%BA%92%E6%8F%90%E7%A4%BA"><span class="toc-number">1.1.12.3.</span> <span class="toc-text">悬浮按钮和可交互提示</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#FloatingActionButton"><span class="toc-number">1.1.12.3.1.</span> <span class="toc-text">FloatingActionButton</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Snackbar%E5%8F%AF%E4%BA%A4%E4%BA%92%E6%8F%90%E7%A4%BA"><span class="toc-number">1.1.12.3.2.</span> <span class="toc-text">Snackbar可交互提示</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#CoordinatorLayout%E5%B8%83%E5%B1%80"><span class="toc-number">1.1.12.3.3.</span> <span class="toc-text">CoordinatorLayout布局</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8D%A1%E7%89%87%E5%BC%8F%E5%B8%83%E5%B1%80%EF%BC%88%E5%8C%85%E5%90%ABGlide%E5%BA%93%EF%BC%89"><span class="toc-number">1.1.12.4.</span> <span class="toc-text">卡片式布局（包含Glide库）</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#CardView%EF%BC%88%E7%B1%BBFrameLayout%EF%BC%89"><span class="toc-number">1.1.12.4.1.</span> <span class="toc-text">CardView（类FrameLayout）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#AppBarLayout%E8%A7%A3%E5%86%B3CoordinatorLayou%E9%BB%98%E8%AE%A4%E5%B7%A6%E4%B8%8A%E8%A7%92%E6%94%BE%E7%BD%AE%E9%87%8D%E5%8F%A0%E9%97%AE%E9%A2%98"><span class="toc-number">1.1.12.4.2.</span> <span class="toc-text">AppBarLayout解决CoordinatorLayou默认左上角放置重叠问题</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%8B%E6%8B%89%E5%88%B7%E6%96%B0"><span class="toc-number">1.1.12.5.</span> <span class="toc-text">下拉刷新</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#swiperefreshlayout"><span class="toc-number">1.1.12.5.1.</span> <span class="toc-text">swiperefreshlayout</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%AF%E6%8A%98%E5%8F%A0%E6%A0%87%E9%A2%98%E6%A0%8F"><span class="toc-number">1.1.12.6.</span> <span class="toc-text">可折叠标题栏</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#CollapsingToolbarLayout"><span class="toc-number">1.1.12.6.1.</span> <span class="toc-text">CollapsingToolbarLayout</span></a></li></ol></li></ol></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2024/05/19/Android%E6%A8%A1%E5%9D%97%E5%8C%96%E5%92%8C%E7%BB%84%E4%BB%B6%E5%8C%96/" title="Android模块化开发和组件化开发"><img src="https://pic.imgdb.cn/item/664a0d30d9c307b7e980f34a.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Android模块化开发和组件化开发"/></a><div class="content"><a class="title" href="/2024/05/19/Android%E6%A8%A1%E5%9D%97%E5%8C%96%E5%92%8C%E7%BB%84%E4%BB%B6%E5%8C%96/" title="Android模块化开发和组件化开发">Android模块化开发和组件化开发</a><time datetime="2024-05-19T14:31:00.000Z" title="发表于 2024-05-19 22:31:00">2024-05-19</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/05/19/%E5%AF%BC%E5%85%A5%E9%A1%B9%E7%9B%AE%E5%92%8C%E7%8E%AF%E5%A2%83%E8%AF%B4%E6%98%8E/" title="Android导入项目及环境说明"><img src="https://pic.imgdb.cn/item/664a0a9ad9c307b7e97d01c6.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Android导入项目及环境说明"/></a><div class="content"><a class="title" href="/2024/05/19/%E5%AF%BC%E5%85%A5%E9%A1%B9%E7%9B%AE%E5%92%8C%E7%8E%AF%E5%A2%83%E8%AF%B4%E6%98%8E/" title="Android导入项目及环境说明">Android导入项目及环境说明</a><time datetime="2024-05-19T14:18:00.000Z" title="发表于 2024-05-19 22:18:00">2024-05-19</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/02/28/%E5%87%86%E5%A4%87/" title="小白个人Android面试准备"><img src="https://pic.imgdb.cn/item/65df52089f345e8d030edde4.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="小白个人Android面试准备"/></a><div class="content"><a class="title" href="/2024/02/28/%E5%87%86%E5%A4%87/" title="小白个人Android面试准备">小白个人Android面试准备</a><time datetime="2024-02-28T15:33:46.000Z" title="发表于 2024-02-28 23:33:46">2024-02-28</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/02/28/%E9%9D%A2%E8%AF%95%E7%AE%97%E6%B3%95%E5%87%86%E5%A4%87/" title="小白个人面试算法准备"><img src="https://pic.imgdb.cn/item/6602823e9f345e8d03cbcbff.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="小白个人面试算法准备"/></a><div class="content"><a class="title" href="/2024/02/28/%E9%9D%A2%E8%AF%95%E7%AE%97%E6%B3%95%E5%87%86%E5%A4%87/" title="小白个人面试算法准备">小白个人面试算法准备</a><time datetime="2024-02-28T15:33:46.000Z" title="发表于 2024-02-28 23:33:46">2024-02-28</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/02/24/Kotlin%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" title="Kotlin学习笔记"><img src="https://pic.imgdb.cn/item/65d9e5d59f345e8d03230185.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Kotlin学习笔记"/></a><div class="content"><a class="title" href="/2024/02/24/Kotlin%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" title="Kotlin学习笔记">Kotlin学习笔记</a><time datetime="2024-02-24T15:29:30.000Z" title="发表于 2024-02-24 23:29:30">2024-02-24</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2023 - 2024 By 无泪真伤</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">Welcome to my blog! --by Wuleizhenshang</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"><script>if (!window.MathJax) {
  window.MathJax = {
    tex: {
      inlineMath: [['$', '$'], ['\\(', '\\)']],
      tags: 'ams'
    },
    chtml: {
      scale: 1.1
    },
    options: {
      renderActions: {
        findScript: [10, doc => {
          for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
            const display = !!node.type.match(/; *mode=display/)
            const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
            const text = document.createTextNode('')
            node.parentNode.replaceChild(text, node)
            math.start = {node: text, delim: '', n: 0}
            math.end = {node: text, delim: '', n: 0}
            doc.math.push(math)
          }
        }, '']
      }
    }
  }
  
  const script = document.createElement('script')
  script.src = 'https://cdn.jsdelivr.net/npm/mathjax/es5/tex-mml-chtml.min.js'
  script.id = 'MathJax-script'
  script.async = true
  document.head.appendChild(script)
} else {
  MathJax.startup.document.state(0)
  MathJax.texReset()
  MathJax.typesetPromise()
}</script></div><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-nest.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = false#  open shake (抖動特效);
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-heart.min.js" async="async" mobile="false"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>